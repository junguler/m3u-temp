
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Rouge FM - Suisse Radio listen online, Lausanne Switzerland | RadioSpinner</title>

    
    
    <meta name="description" content="Rouge FM - Suisse Radio — Swiss and Pop. Listen online from Lausanne, Switzerland. Free high quality on RadioSpinner" />
    <link rel="canonical" href="https://radiospinner.com/ch/rouge-fm-suisse-44872/" />
    <meta itemprop="description" content="Rouge FM - Suisse Radio — Swiss and Pop. Listen online from Lausanne, Switzerland. Free high quality on RadioSpinner" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://radiospinner.com/ch/rouge-fm-suisse-44872/" />
    
    <meta property="og:title" content="Rouge FM - Suisse Radio listen online, Lausanne Switzerland | RadioSpinner" />
    <meta property="og:description" content="Rouge FM - Suisse Radio — Swiss and Pop. Listen online from Lausanne, Switzerland. Free high quality on RadioSpinner" />
    <meta property="og:image" content="https://radiospinner.com/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583" />
    <meta name="twitter:title" content="Rouge FM - Suisse Radio listen online, Lausanne Switzerland | RadioSpinner" />
    <meta name="twitter:description" content="Rouge FM - Suisse Radio — Swiss and Pop. Listen online from Lausanne, Switzerland. Free high quality on RadioSpinner" />
    <meta name="twitter:image" content="https://radiospinner.com/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583" />
    <link rel="stylesheet" href="/static/stations/css/station_hero.2f36f6bee5fb.css?v=" />
    <link rel="stylesheet" href="/static/stations/css/station_player.9f8bf197baf6.css?v=" />
    
    
    <meta name="robots" content="index,follow">
    
    
    
    
    

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "RadioBroadcastService",
      "name": "Rouge FM - Suisse Radio",
      "url": "https://radiospinner.com/ch/rouge-fm-suisse-44872/",
      "description": "Listen Rouge FM - Suisse Radio station online from Lausanne, Switzerland. Rouge FM - Suisse Radio - swiss, pop, rock in high quality for free on RadioSpinner.com",
      "image": "https://radiospinner.com/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583",
      "keywords": "swiss, pop, rock",
      "broadcaster": {
        "@type": "Organization",
        "name": "Rouge FM - Suisse Radio",
        "logo": "https://radiospinner.com/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583"
      },
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "Switzerland",
        "addressRegion": "Vaud",
        "addressLocality": "Lausanne"
      }
      
    }
    </script>
    
    
    
    
    
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Switzerland",
          "item": "http://radiospinner.com/ch/"
        },
        
        
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Vaud",
          "item": "http://radiospinner.com/ch/region-vaud-ch/"
        },
        
        
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Lausanne",
          "item": "http://radiospinner.com/ch/lausanne-ch/"
        },
        
        {
          "@type": "ListItem",
          "position": 4,
          "name": "Rouge FM \u002D Suisse Radio",
          "item": "https://radiospinner.com/ch/rouge-fm-suisse-44872/"
        }
      ]
    }
    </script>
    
    
    
    
    
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Similar Stations",
      "itemListElement": [
        
        {
          "@type": "ListItem",
          "position": 1,
          "name": "1.FM \u002D Absolute Pop Latino Radio",
          "url": "http://radiospinner.com/ch/1fm-absolute-pop-latino-radio-45301/"
        },
        
        {
          "@type": "ListItem",
          "position": 2,
          "name": "One FM",
          "url": "http://radiospinner.com/ch/one-fm-45213/"
        },
        
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Radio Swiss Pop",
          "url": "http://radiospinner.com/ch/radio-swiss-pop-45244/"
        },
        
        {
          "@type": "ListItem",
          "position": 4,
          "name": "Folk Fantazija",
          "url": "http://radiospinner.com/ch/folk-fantazija-45109/"
        },
        
        {
          "@type": "ListItem",
          "position": 5,
          "name": "Vibration 108.0 FM",
          "url": "http://radiospinner.com/ch/vibration-1080-fm-44831/"
        },
        
        {
          "@type": "ListItem",
          "position": 6,
          "name": "Radio Monte Carlo (Swiss)",
          "url": "http://radiospinner.com/ch/radio-monte-carlo-swiss-45151/"
        },
        
        {
          "@type": "ListItem",
          "position": 7,
          "name": "1.FM \u002D Love Classics Radio",
          "url": "http://radiospinner.com/ch/1fm-love-classics-radio-44800/"
        },
        
        {
          "@type": "ListItem",
          "position": 8,
          "name": "Vertical Radio",
          "url": "http://radiospinner.com/ch/vertical-radio-45282/"
        },
        
        {
          "@type": "ListItem",
          "position": 9,
          "name": "Energy Zürich",
          "url": "http://radiospinner.com/ch/energy-zurich-44812/"
        },
        
        {
          "@type": "ListItem",
          "position": 10,
          "name": "Traxx FM Funk",
          "url": "http://radiospinner.com/ch/traxx-fm-funk-45197/"
        },
        
        {
          "@type": "ListItem",
          "position": 11,
          "name": "Energy St. Gallen",
          "url": "http://radiospinner.com/ch/energy-st-gallen-45110/"
        },
        
        {
          "@type": "ListItem",
          "position": 12,
          "name": "Vibration Francaise",
          "url": "http://radiospinner.com/ch/vibration-francaise-45281/"
        }
        
      ]
    }
    </script>
    
    
    
    



    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-62J3H0KPXB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-62J3H0KPXB');
    </script>

    
    
    <!-- SVG and ICO favicons only (no PNG link to avoid duplicates) -->
    <link rel="icon" type="image/svg+xml" sizes="any" href="/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="preload"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          as="style"
          crossorigin
          onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" crossorigin>
    </noscript>

    <link rel="preload" href="/static/css/vendor/fonts-local.15461b7a579d.css?v=1764461027" as="style">
    <link rel="stylesheet" href="/static/css/vendor/fonts-local.15461b7a579d.css?v=1764461027">
    <link rel="preload" href="/static/fonts/roboto-400.b07da7aa3e4f.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/roboto-500.02e18aa1a344.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/roboto-700.549a12cc5504.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/mulish-400.dde2379a58b7.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/mulish-600.0e2def529f88.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/mulish-700.0896d1f0a9c7.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/mulish-800.163802ade2c8.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/mulish-900.7dd2c1a17f2d.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/fa-solid-900.e8a427e15cc5.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/fa-regular-400.b91d376b8d76.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/fa-brands-400.f7307680c7fe.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/static/fonts/bootstrap-icons.cc1e5eda776b.woff2" as="font" type="font/woff2" crossorigin>

    <link rel="preload" href="/static/css/vendor/fontawesome-local.75da617006ba.css?v=1764461027" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/static/css/vendor/fontawesome-local.75da617006ba.css?v=1764461027">
    <noscript><link rel="stylesheet" href="/static/css/vendor/fontawesome-local.75da617006ba.css?v=1764461027"></noscript>

    <link rel="preload" href="/static/css/vendor/bootstrap-icons.0c3e9eaea042.css?v=1764461027" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/static/css/vendor/bootstrap-icons.0c3e9eaea042.css?v=1764461027">
    <noscript><link rel="stylesheet" href="/static/css/vendor/bootstrap-icons.0c3e9eaea042.css?v=1764461027"></noscript>

    <link rel="preload" href="/static/css/flags.64ed8c4ed8a7.css?v=1764461027" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/static/css/flags.64ed8c4ed8a7.css?v=1764461027"></noscript>
    <link rel="preload" href="/static/admin/css/vendor/select2/select2.a2194c262648.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/static/admin/css/vendor/select2/select2.a2194c262648.css"></noscript>
    <link rel="preload" href="/static/django_select2/django_select2.c285f72557c2.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/static/django_select2/django_select2.c285f72557c2.css"></noscript>
    <script>
      // Early ad variant hint to avoid flicker: annotate HTML with current mobile band
      (function(){
        try {
          var w = window.innerWidth || document.documentElement.clientWidth;
          var html = document.documentElement;
          html.classList.remove('rs-ad-320','rs-ad-728');
          if (w >= 576 && w < 992) html.classList.add('rs-ad-728');
          else html.classList.add('rs-ad-320');
          // Mark ad variant ready to reveal CSS-driven block without flicker
          html.classList.add('rs-ad-ready');
        } catch(e){}
      })();
    </script>
    <link rel="preload" href="/static/css/style.3b6d5ebf31ef.css?v=1764461027"
          as="style"
          data-home-rails="show">
    <noscript>
      <link rel="stylesheet" href="/static/css/style.3b6d5ebf31ef.css?v=1764461027">
    </noscript>

    <link rel="stylesheet" href="/static/css/style.3b6d5ebf31ef.css?v=1764461027">

    <link rel="preload" href="/static/css/forms.cdeac3cee6fa.css?v=1764461027" as="style">
    <noscript><link rel="stylesheet" href="/static/css/forms.cdeac3cee6fa.css?v=1764461027"></noscript>
    <link rel="stylesheet" href="/static/css/forms.cdeac3cee6fa.css?v=1764461027">

    <link rel="preload" href="/static/css/modals.4aff3722dbb6.css?v=1764461027" as="style">
    <noscript><link rel="stylesheet" href="/static/css/modals.4aff3722dbb6.css?v=1764461027"></noscript>
    <link rel="stylesheet" href="/static/css/modals.4aff3722dbb6.css?v=1764461027">

    <link rel="preload" href="/static/account/css/auth.182eeaef00e8.css?v=1764461027" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/static/account/css/auth.182eeaef00e8.css?v=1764461027">
    <noscript><link rel="stylesheet" href="/static/account/css/auth.182eeaef00e8.css?v=1764461027"></noscript>

    
</head>

<body class=""
      data-hide-rails="false">
    
    
    
    
    <div class="rs-app-shell">
        <aside class="rs-desktop-sidebar d-none d-lg-flex"
               aria-label="Primary navigation"
               data-country-code="CH">
            



<nav class="sidebar-wrapper sidebar-wrapper--desktop"
     data-country-code="CH">
  
  <div class="rs-side-scroll">
    <div class="rs-side-scroll__inner">
      <div class="rs-side-brand">
      
      <a href="/" class="rs-side-logo" aria-label="RadioSpinner">
        <img src="/static/image/logo_radio_w_spinner_d.5ce081ead0d7.png" alt="RadioSpinner" class="rs-side-logo-img" width="210" height="80" loading="lazy">
      </a>
    </div>

      <div class="rs-side-menu-wrap">
      <ul class="rs-side-menu rs-side-menu--primary">
      
      
      <li class="rs-side-item">
        <a href="/ch/" class="rs-side-link active">
          <span class="rs-side-icon rs-side-icon--flag">
            <span class="icon-badge"><span class="fflag fflag-CH ff-md"></span></span>
          </span>
          <span class="rs-side-text">All stations</span>
        </a>
      </li>
      <li class="rs-side-item">
        <a href="/ch/#locations"
           class="rs-side-link"
           data-action="locations-panel"
           aria-haspopup="true"
           aria-expanded="false">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-pin"></i></span></span>
          <span class="rs-side-text">Locations</span>
          <span class="rs-side-chevron" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
        </a>
      </li>
      
      
      <li class="rs-side-item">
        <a href="/genres/"
           class="rs-side-link"
           data-action="genres-sheet">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-music-note-list"></i></span></span>
          <span class="rs-side-text">Genres</span>
          <span class="rs-side-chevron" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
        </a>
      </li>
      
      <li class="rs-side-item">
        <a href="/collections/" class="rs-side-link">
          <span class="rs-side-icon rs-side-icon--svg">
            <span class="icon-badge"><svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="2" width="3" height="3" rx="0.8"/>
              <rect x="7.5" y="2" width="3" height="3" rx="0.8"/>
              <rect x="13" y="2" width="3" height="3" rx="0.8"/>
              <rect x="2" y="7.5" width="3" height="3" rx="0.8"/>
              <rect x="7.5" y="7.5" width="3" height="3" rx="0.8"/>
              <rect x="13" y="7.5" width="3" height="3" rx="0.8"/>
              <rect x="2" y="13" width="3" height="3" rx="0.8"/>
              <rect x="7.5" y="13" width="3" height="3" rx="0.8"/>
              <rect x="13" y="13" width="3" height="3" rx="0.8"/>
            </svg></span>
          </span>
          <span class="rs-side-text">Collections</span>
        </a>
      </li>
      
      <li class="rs-side-item">
        <a href="/history/" class="rs-side-link">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-clock-history"></i></span></span>
          <span class="rs-side-text">History</span>
        </a>
      </li>
    </ul>

      
      <ul class="rs-side-menu rs-side-menu--account">
      
      <li class="rs-side-item">
        <a href="/temp-favorites/" class="rs-side-link">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-heart"></i></span></span>
          <span class="rs-side-text">Favorites</span>
        </a>
      </li>
      
      <li class="rs-side-item">
        <a href="/accounts/login/"
           class="rs-side-link"
           data-auth-modal-trigger="sidebar-login"
           data-auth-next="/ch/rouge-fm-suisse-44872/">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-box-arrow-in-right"></i></span></span>
          <span class="rs-side-text">Log in</span>
        </a>
      </li>
    </ul>
    

    <hr class="rs-side-divider">

    <ul class="rs-side-menu rs-side-menu--utility">
      
        
        
        <li class="rs-side-item">
          <a href="/europe/"
             class="rs-side-link"
             data-action="countries-panel"
             aria-haspopup="true"
             aria-expanded="false">
            <span class="rs-side-icon">
              <span class="icon-badge">
                <i class="bi bi-globe2"></i>
              </span>
            </span>
            <span class="rs-side-text">
              Switzerland
            </span>
            <span class="rs-side-chevron" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
          </a>
        </li>
        
        <li class="rs-side-item">
          <a href="/us/"
             class="rs-side-link"
             data-auto-country-switch
             data-auto-code="US"
             data-auto-name="United States">
            <span class="rs-side-icon">
              <span class="icon-badge"><i class="bi bi-geo-alt-fill"></i></span>
            </span>
            <span class="rs-side-text">
              United States
              <span class="rs-side-subtext">Detected</span>
            </span>
            <span class="rs-side-chevron" aria-hidden="true"><i class="bi bi-arrow-repeat"></i></span>
          </a>
        </li>
        
        
        
      

      <li class="rs-side-item dropdown">
        <a class="rs-side-link dropdown-toggle" href="#" id="languageDropdownDesktop" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-translate"></i></span></span>
          <span class="rs-side-text">
            
              English
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          </span>
        </a>
        <div class="dropdown-menu rs-dropdown-menu rs-dropdown-menu--columns-3" aria-labelledby="languageDropdownDesktop" data-dropdown="languages">
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="en" class="dropdown-item language-link active">English</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="es" class="dropdown-item language-link">Español</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="de" class="dropdown-item language-link">Deutsch</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="fr" class="dropdown-item language-link">Français</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="pt" class="dropdown-item language-link">Português</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="ru" class="dropdown-item language-link">Русский</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="be" class="dropdown-item language-link">Беларуская</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="bg" class="dropdown-item language-link">Български</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="cs" class="dropdown-item language-link">Čeština</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="da" class="dropdown-item language-link">Dansk</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="el" class="dropdown-item language-link">Ελληνικά</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="hr" class="dropdown-item language-link">Hrvatski</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="id" class="dropdown-item language-link">Bahasa Indonesia</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="it" class="dropdown-item language-link">Italiano</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="hu" class="dropdown-item language-link">Magyar</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="ms" class="dropdown-item language-link">Bahasa Melayu</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="nl" class="dropdown-item language-link">Nederlands</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="pl" class="dropdown-item language-link">Polski</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="ro" class="dropdown-item language-link">Română</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="sr" class="dropdown-item language-link">Srpski</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="sk" class="dropdown-item language-link">Slovenský</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="th" class="dropdown-item language-link">ภาษาไทย</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="tr" class="dropdown-item language-link">Türkçe</a>
          
            <a href="/ch/rouge-fm-suisse-44872/" data-lang="uk" class="dropdown-item language-link">Українська</a>
          
        </div>
      </li>

      <li class="rs-side-item dropdown">
        <a class="rs-side-link dropdown-toggle" href="#" id="rsMenuDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <span class="rs-side-icon"><span class="icon-badge"><i class="bi bi-broadcast"></i></span></span>
          <span class="rs-side-text">RadioSpinner</span>
        </a>
        <div class="dropdown-menu rs-dropdown-menu" aria-labelledby="rsMenuDropdown">
          <a href="/info/radio-owners-add-station/" class="dropdown-item"><i class="bi bi-question-circle"></i> How to add a station?</a>
          
          <a href="/widget/" class="dropdown-item"><i class="bi bi-boxes"></i> Widgets</a>
          
          <a href="/contact/" class="dropdown-item"><i class="bi bi-envelope"></i> Contact Us</a>
          
          <a href="/info/privacy/" class="dropdown-item"><i class="bi bi-shield-lock"></i> Privacy</a>
          
          <a href="/info/term/" class="dropdown-item"><i class="bi bi-file-text"></i> Terms of Use</a>
        </div>
      </li>
    </ul>
  </div>
  
</nav>



        </aside>

        <div class="rs-app-main" id="content-container">
            <div class="rs-top-ad">

                    <div class="station-top-slot" aria-label="Advertisement" role="complementary">
                      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5868138356901656" crossorigin="anonymous"></script>
                      <div class="rs-ad-fixed">
                        <!-- RadioSpinner – Fixed block 335x100 -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:335px;height:100px"
                             data-ad-client="ca-pub-5868138356901656"
                             data-ad-slot="3985993104"></ins>
                        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                      </div>
                      <div class="rs-ad-fixed-medium">
                        <!-- RadioSpinner – Fixed block 728x100 -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:728px;height:100px"
                             data-ad-client="ca-pub-5868138356901656"
                             data-ad-slot="6950411252"></ins>
                        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                      </div>
                      <div class="visually-hidden">End of advertisement</div>
                    </div>

                </div>

                











<nav class="rs-topbar" aria-label="Site toolbar">
  <div class="rs-topbar-inner">
    <div class="rs-topbar-left">
      <button type="button"
              id="toggle-sidebar"
              class="rs-topbar-burger rs-topbar-btn rs-topbar-btn--icon d-inline-flex d-lg-none"
              aria-label="Menu">
        <span class="icon-badge icon-badge--ghost"><i class="bi bi-list"></i></span>
      </button>
      <a href="/"
         class="rs-topbar-logo ms-2 d-inline-flex d-lg-none"
         aria-label="RadioSpinner">
        <img src="/static/image/logo_radio_w_spinner_d.5ce081ead0d7.png"
             alt="RadioSpinner"
             width="138"
             height="40"
             loading="lazy">
      </a>
    </div>

    <div class="rs-topbar-middle">
      <div class="rs-topbar-search d-none d-lg-flex">
        <form action="/search/" method="get" class="rs-topbar-search-form" role="search">
          <input type="text"
                 name="query"
                 value=""
                 placeholder="Quick station search"
                 aria-label="Quick station search">
          <button type="button"
                  class="rs-topbar-search-clear"
                  data-search-action="clear"
                  aria-label="Clear"
                  aria-hidden="true">
            <svg class="rs-icon" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 1 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" fill="currentColor"/>
            </svg>
          </button>
          <button type="submit"
                  class="rs-topbar-search-submit rs-topbar-search-submit--primary"
                  aria-label="Search">
            <i class="bi bi-search" aria-hidden="true"></i>
          </button>
        </form>
      </div>
    </div>

    <div class="rs-topbar-actions">
      <button type="button"
              class="rs-topbar-btn rs-topbar-btn--icon rs-topbar-btn--search d-inline-flex d-lg-none"
              data-search-open
              title="Search"
              aria-label="Search">
        <span class="icon-badge"><i class="bi bi-search"></i></span>
        <span class="visually-hidden">Search</span>
      </button>

      
        <a href="/temp-favorites/"
           class="rs-topbar-btn rs-topbar-btn--icon"
           title="Favorites"
           aria-label="Favorites">
          <span class="icon-badge"><i class="bi bi-heart"></i></span>
          <span class="visually-hidden">Favorites</span>
        </a>
        <a href="/accounts/login/"
           class="rs-topbar-btn rs-topbar-btn--primary rs-topbar-btn--icon d-none d-lg-inline-flex"
           data-auth-modal-trigger="topbar-login"
           data-auth-next="/ch/rouge-fm-suisse-44872/"
           title="Log in"
           aria-label="Log in">
          <span class="icon-badge"><i class="bi bi-box-arrow-in-right"></i></span>
          <span class="visually-hidden">Log in</span>
        </a>
      
    </div>
  </div>
</nav>

<div id="topbar-search-overlay" class="topbar-search-overlay" hidden>
  <div class="topbar-search-overlay__backdrop" data-search-close aria-hidden="true"></div>
  <div class="topbar-search-overlay__panel">
    <div class="topbar-search-overlay__header">
      <h2 class="topbar-search-overlay__title">Search</h2>
      <button type="button" class="topbar-search-overlay__close" data-search-close aria-label="Close search">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
    <form action="/search/" method="get" class="rs-topbar-search-form rs-topbar-search-form--overlay" role="search">
      <span class="rs-topbar-search-icon" aria-hidden="true">
        <i class="bi bi-search"></i>
      </span>
      <input type="text"
             name="query"
             placeholder="Quick station search"
             aria-label="Quick station search">
      <button type="button"
              class="rs-topbar-search-clear"
              data-search-action="clear"
              aria-label="Clear"
              aria-hidden="true">
        <i class="bi bi-x-lg" aria-hidden="true"></i>
      </button>
      <button type="submit"
              class="rs-topbar-search-submit rs-topbar-search-submit--primary"
              aria-label="Search">
        <i class="bi bi-search" aria-hidden="true"></i>
        <span class="visually-hidden">Search</span>
      </button>
    </form>
  </div>
</div>



            <div class="rs-main-scroll">
                <div id="sidebar"
                     class="d-lg-none"
                     aria-hidden="true"
                     data-country-code="CH">
                    



<nav class="sidebar-wrapper"
     data-country-code="CH">
  
  <!-- Mobile sidebar layout -->
  <div class="rs-mobile-menu" data-rs-mobile-menu>
    <div class="rs-mobile-menu__overlay" data-menu-close tabindex="-1" aria-hidden="true"></div>
    <div class="rs-mobile-menu__surface">
      <div class="rs-mobile-menu__panel is-active" data-menu-panel="root">
        
        
        
        
        
        
          
          
        
        
          
        

        <header class="rs-mobile-menu__header">
          <a href="/"
             class="rs-mobile-menu__logo"
             aria-label="RadioSpinner">
            <img src="/static/image/logo_radio_w_spinner_d.5ce081ead0d7.png"
                 alt="Radio Spinner Logo"
                 width="520"
                 height="196"
                 decoding="async"
                 loading="eager">
          </a>
          <button type="button"
                  class="rs-mobile-menu__close"
                  data-menu-close
                  aria-label="Close menu">
            <i class="bi bi-x-lg"></i>
          </button>
        </header>

        <div class="rs-mobile-menu__body">
          <nav class="rs-mobile-menu__list" aria-label="Primary navigation">
            <a class="rs-mobile-menu__item"
               href="/">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-house-door"></i></span>
              <span class="rs-mobile-menu__item-label">Home</span>
            </a>

            
            <a class="rs-mobile-menu__item is-active"
               href="/ch/">
              <span class="rs-mobile-menu__item-icon rs-mobile-menu__item-icon--flag"><span class="fflag fflag-CH ff-lg"></span></span>
              <span class="rs-mobile-menu__item-label">All stations</span>
            </a>
            

            <button type="button"
                    class="rs-mobile-menu__item rs-mobile-menu__item--nested"
                    data-menu-open="locations">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-geo"></i></span>
              <span class="rs-mobile-menu__item-label">Locations</span>
              <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
            </button>

            <button type="button"
                    class="rs-mobile-menu__item rs-mobile-menu__item--nested"
                    data-menu-open="genres">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-tags-fill"></i></span>
              <span class="rs-mobile-menu__item-label">Genres</span>
              <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
            </button>

            <a class="rs-mobile-menu__item"
               href="/collections/">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-collection"></i></span>
              <span class="rs-mobile-menu__item-label">Collections</span>
            </a>

            <a class="rs-mobile-menu__item"
               href="/history/">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-clock-history"></i></span>
              <span class="rs-mobile-menu__item-label">History</span>
            </a>

            
              <a class="rs-mobile-menu__item"
                 href="/temp-favorites/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-heart"></i></span>
                <span class="rs-mobile-menu__item-label">Favorites</span>
              </a>
              <a class="rs-mobile-menu__item"
                 href="/accounts/login/"
                 data-auth-modal-trigger="sidebar-login"
                 data-auth-next="/ch/rouge-fm-suisse-44872/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-box-arrow-in-right"></i></span>
                <span class="rs-mobile-menu__item-label">Log in</span>
              </a>
            

            <button type="button"
                    class="rs-mobile-menu__item rs-mobile-menu__item--nested"
                    data-menu-open="languages">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-translate"></i></span>
              <span class="rs-mobile-menu__item-label">
                
                  English
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </span>
              <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
            </button>

            <button type="button"
                    class="rs-mobile-menu__item rs-mobile-menu__item--nested"
                    data-menu-open="radiospinner">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-broadcast"></i></span>
              <span class="rs-mobile-menu__item-label">RadioSpinner</span>
              <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
            </button>
          </nav>

          <div class="rs-mobile-menu__foot">
            
              
              <button type="button"
                      class="rs-mobile-menu__item rs-mobile-menu__item--muted"
                      data-menu-open="countries">
                <span class="rs-mobile-menu__item-icon">
                  <i class="bi bi-globe2"></i>
                </span>
                <span class="rs-mobile-menu__item-label">
                  Switzerland
                </span>
                <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </button>
              
                <a href="/us/"
                   class="rs-mobile-menu__item rs-mobile-menu__item--muted"
                   data-auto-country-switch
                   data-auto-code="US"
                   data-auto-name="United States">
                  <span class="rs-mobile-menu__item-icon"><i class="bi bi-geo-alt-fill"></i></span>
                  <span class="rs-mobile-menu__item-label">
                    United States
                    <span class="rs-mobile-menu__hint">Detected</span>
                  </span>
                  <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-arrow-repeat"></i></span>
                </a>
              
              
            
          </div>
        </div>
      </div>

        <div class="rs-mobile-menu__panel" data-menu-panel="genres" aria-label="Genres">
          <header class="rs-mobile-menu__header rs-mobile-menu__header--sub">
            <button type="button"
                    class="rs-mobile-menu__back"
                    data-menu-back="root"
                    data-mobile-genres-back
                    aria-label="Back">
              <i class="bi bi-chevron-left"></i>
            </button>
            <h2 class="rs-mobile-menu__title" data-mobile-genres-title>Genres</h2>
            <button type="button"
                    class="rs-mobile-menu__close"
                    data-menu-close
                    aria-label="Close menu">
              <i class="bi bi-x-lg"></i>
            </button>
          </header>
          <div class="rs-mobile-menu__body">
            <div class="rs-mobile-menu__list" data-mobile-genres-root>
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted" data-mobile-genres-empty>
                <span class="rs-mobile-menu__item-label">Loading genres...</span>
              </div>
            </div>
            <div class="rs-mobile-menu__list" data-mobile-genres-children hidden></div>
          </div>
        </div>

        <div class="rs-mobile-menu__panel" data-menu-panel="countries" aria-label="Countries">
          <header class="rs-mobile-menu__header rs-mobile-menu__header--sub">
            <button type="button"
                    class="rs-mobile-menu__back"
                    data-menu-back="root"
                    data-mobile-countries-back
                    aria-label="Back">
              <i class="bi bi-chevron-left"></i>
            </button>
            <h2 class="rs-mobile-menu__title" data-mobile-countries-title>Countries</h2>
            <button type="button"
                    class="rs-mobile-menu__close"
                    data-menu-close
                    aria-label="Close menu">
              <i class="bi bi-x-lg"></i>
            </button>
          </header>
          <div class="rs-mobile-menu__body">
            <div class="rs-mobile-menu__list" data-mobile-countries-root>
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">Loading countries...</span>
              </div>
            </div>
            <div class="rs-mobile-menu__list" data-mobile-countries-children hidden></div>
          </div>
        </div>

        <div class="rs-mobile-menu__panel" data-menu-panel="locations" aria-label="Locations">
          <header class="rs-mobile-menu__header rs-mobile-menu__header--sub">
            <button type="button"
                    class="rs-mobile-menu__back"
                    data-menu-back="root"
                    data-mobile-locations-back
                    aria-label="Back">
              <i class="bi bi-chevron-left"></i>
            </button>
            <h2 class="rs-mobile-menu__title" data-mobile-locations-title>Locations</h2>
            <button type="button"
                    class="rs-mobile-menu__close"
                    data-menu-close
                    aria-label="Close menu">
              <i class="bi bi-x-lg"></i>
            </button>
          </header>
          <div class="rs-mobile-menu__body">
            <div class="rs-mobile-menu__list" data-mobile-locations-root>
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">Loading locations...</span>
              </div>
            </div>
            <div class="rs-mobile-menu__list" data-mobile-locations-children hidden></div>
          </div>
        </div>

        

        <div class="rs-mobile-menu__panel" data-menu-panel="languages" aria-label="Languages">
          <header class="rs-mobile-menu__header rs-mobile-menu__header--sub">
            <button type="button"
                    class="rs-mobile-menu__back"
                    data-menu-back="root"
                    aria-label="Back">
              <i class="bi bi-chevron-left"></i>
            </button>
            <h2 class="rs-mobile-menu__title">Languages</h2>
            <button type="button"
                    class="rs-mobile-menu__close"
                    data-menu-close
                    aria-label="Close menu">
              <i class="bi bi-x-lg"></i>
            </button>
          </header>
          <div class="rs-mobile-menu__body">
            <nav class="rs-mobile-menu__list rs-mobile-menu__list--grid" aria-label="Languages">
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="en"
                   class="rs-mobile-menu__item language-link is-active">
                  <span class="rs-mobile-menu__item-label">English</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="es"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Español</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="de"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Deutsch</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="fr"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Français</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="pt"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Português</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="ru"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Русский</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="be"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Беларуская</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="bg"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Български</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="cs"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Čeština</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="da"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Dansk</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="el"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Ελληνικά</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="hr"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Hrvatski</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="id"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Bahasa Indonesia</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="it"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Italiano</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="hu"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Magyar</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="ms"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Bahasa Melayu</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="nl"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Nederlands</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="pl"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Polski</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="ro"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Română</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="sr"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Srpski</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="sk"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Slovenský</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="th"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">ภาษาไทย</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="tr"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Türkçe</span>
                </a>
              
                <a href="/ch/rouge-fm-suisse-44872/"
                   data-lang="uk"
                   class="rs-mobile-menu__item language-link">
                  <span class="rs-mobile-menu__item-label">Українська</span>
                </a>
              
            </nav>
          </div>
        </div>

        <div class="rs-mobile-menu__panel" data-menu-panel="radiospinner" aria-label="RadioSpinner">
          <header class="rs-mobile-menu__header rs-mobile-menu__header--sub">
            <button type="button"
                    class="rs-mobile-menu__back"
                    data-menu-back="root"
                    aria-label="Back">
              <i class="bi bi-chevron-left"></i>
            </button>
            <h2 class="rs-mobile-menu__title">RadioSpinner</h2>
            <button type="button"
                    class="rs-mobile-menu__close"
                    data-menu-close
                    aria-label="Close menu">
              <i class="bi bi-x-lg"></i>
            </button>
          </header>
          <div class="rs-mobile-menu__body">
            <nav class="rs-mobile-menu__list" aria-label="RadioSpinner">
              
              <a class="rs-mobile-menu__item"
                 href="/widget/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-boxes"></i></span>
                <span class="rs-mobile-menu__item-label">Widgets</span>
              </a>
              
              <a class="rs-mobile-menu__item"
                 href="/contact/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-envelope"></i></span>
                <span class="rs-mobile-menu__item-label">Contact Us</span>
              </a>
              
              <a class="rs-mobile-menu__item"
                 href="/info/privacy/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-shield-lock"></i></span>
                <span class="rs-mobile-menu__item-label">Privacy</span>
              </a>
              
              <a class="rs-mobile-menu__item"
                 href="/info/term/">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-file-text"></i></span>
                <span class="rs-mobile-menu__item-label">Terms of Use</span>
              </a>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</nav>



                </div>

                <div id="content" class="content-rail-layout">
                    
                    <div class="container content-grow">
                        


<ul class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList" role="navigation">
    
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        
        <a href="/ch/" itemprop="item">
            <span itemprop="name">Switzerland</span>
        </a>
        <meta itemprop="position" content="1" />
    </li>
    
    
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        
        <a href="/ch/region-vaud-ch/" itemprop="item">
            <span itemprop="name">Vaud</span>
        </a>
        <meta itemprop="position" content="2" />
    </li>
    
    
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        
        <a href="/ch/lausanne-ch/" itemprop="item">
            <span itemprop="name">Lausanne</span>
        </a>
        <meta itemprop="position" content="3" />
    </li>
    
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <span itemprop="name">Rouge FM - Suisse Radio</span>
        <meta itemprop="position" content="4" />
    </li>
 </ul>



<div class="station-page-container">
<div class="radio-player station-hero">
    <div class="row g-3 station-hero__row">
        <div class="col-12 col-lg-auto station-hero__logo-col">
            <div class="station-hero__logo-shell">
                <img class="station-logo station-hero__logo"
                     src="/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583"
                     alt="Rouge FM - Suisse Radio logo"
                     title="Rouge FM - Suisse Radio"
                     width="160" height="90">
            </div>
        </div>
        <div class="col station-hero__info-col">
            <div class="station-hero__name-row">
                <h1 class="station-hero__title mb-1">Rouge FM - Suisse Radio</h1>
            </div>
            
        </div>
    </div>

    <div class="station-hero__controls row g-2 align-items-center station-hero__controls-row" id="player">
        <div class="col-12 col-lg station-hero__controls-left">
            <div class="station-hero__play-wrap">
                
                <button id="play-station"
                        type="button"
                        class="station-hero__play-btn"
                        aria-keyshortcuts="Alt+Shift+P"
                        data-stream-url1="https://rouge-suisse.ice.infomaniak.ch/rouge-suisse-128.mp3"
                        data-stream-url2=""
                        data-stream-url3=""
                        data-raw-stream-url1="https://rouge-suisse.ice.infomaniak.ch/rouge-suisse-128.mp3"
                        data-raw-stream-url2=""
                        data-raw-stream-url3=""
                        data-bitrate1="128"
                        data-bitrate2=""
                        data-bitrate3=""
                        data-station-id="44872"
                        data-logo-url="https://radiospinner.com/media/logos/180/44872/logo_UWhF0tXVCE.png?v=1739647583"
                        data-station-name="Rouge FM - Suisse Radio"
                        data-is-favorite="false"
                        data-play-text="Play"
                        data-stop-text="Stop"
                        data-popup-blocked-text="Allow pop-ups to open the HTTP stream.">
                    <span class="station-hero__play-visual" aria-hidden="true">
                        <span class="station-hero__play-pulse"></span>
                        <span class="station-hero__play-spinner"></span>
                    </span>
                    <i class="fas fa-play" aria-hidden="true"></i>
                    <span class="btn-label">Play</span>
                </button>
                <div class="station-player-toast"
                     role="status"
                     aria-live="polite"
                     data-player-toast
                     hidden>
                    <div class="station-player-toast__content" data-player-toast-text></div>
                </div>
            </div>
            <div class="station-hero__secondary-controls">
                <div class="stream-menu station-hero__stream-menu">
                    <button id="stream-menu-btn"
                            class="station-stream-btn station-hero__stream-toggle"
                            type="button"
                            aria-haspopup="true"
                            aria-expanded="false"
                            aria-controls="stream-menu-pop"
                            aria-label="Streams menu"
                            aria-keyshortcuts="Alt+Shift+S">
                        <i class="fas fa-wave-square" aria-hidden="true"></i>
                        <span class="station-stream-label" data-default-label="Streams">
                            <i class="bi bi-check2 station-stream-icon" aria-hidden="true"></i>
                            <span class="station-stream-text">Streams</span>
                        </span>
                        <span class="station-stream-arrow" aria-hidden="true">
                            <i class="fas fa-chevron-down"></i>
                        </span>
                    </button>
                    <div id="stream-menu-pop" class="stream-menu-pop" role="menu">
                        <div id="stream-buttons" class="stream-buttons">
                        
                        
                        <button class="stream-button"
                                data-stream="https://rouge-suisse.ice.infomaniak.ch/rouge-suisse-128.mp3"
                                data-raw-stream="https://rouge-suisse.ice.infomaniak.ch/rouge-suisse-128.mp3"
                                data-bitrate="128"
                                data-label="128k">
                            
                                128k
                            
                        </button>
                        
                        
                        
                        
                        </div>
                    </div>
                </div>
                <div class="station-hero__volume-wrapper">
                  <div class="station-hero__volume-control" role="group" aria-label="Player volume">
                    <button type="button"
                            id="station-volume-mute"
                            class="station-volume__mute"
                            data-label-mute="Mute"
                            data-label-unmute="Unmute"
                            aria-controls="station-volume-panel"
                            aria-label="Mute"
                            aria-keyshortcuts="Alt+Shift+M"
                            aria-expanded="false"
                            title="Mute"
                            aria-pressed="false">
                        <span class="visually-hidden">Mute</span>
                        <i class="station-volume__icon station-volume__icon--up bi bi-volume-up-fill" aria-hidden="true"></i>
                        <i class="station-volume__icon station-volume__icon--off bi bi-volume-mute-fill" aria-hidden="true"></i>
                    </button>
                    <div class="station-volume__panel" id="station-volume-panel" data-volume-panel>
                        <label class="visually-hidden" for="station-volume">Volume</label>
                        <input type="range"
                               id="station-volume"
                               class="station-volume__slider"
                               min="0"
                               max="100"
                               step="1"
                               value="50"
                               aria-valuemin="0"
                               aria-valuemax="100"
                               aria-valuenow="50"
                               aria-label="Volume"
                               aria-keyshortcuts="Alt+Shift+ArrowUp Alt+Shift+ArrowDown Alt+Shift+V">
                    </div>
                  </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-auto station-hero__controls-right d-flex flex-wrap align-items-center justify-content-lg-end gap-2">
            <button id="toggle-favorite"
                class="station-action-btn station-hero__icon-btn"
                    data-auth="false"
                    aria-pressed="false"
                    aria-label="Add to favorites"
                    aria-keyshortcuts="Alt+Shift+F">
                <i id="favorite-icon" class="station-action-icon station-hero__favorite-icon bi bi-heart"></i>
            </button>

            <a href="#commentsSection"
               class="station-action-btn station-action-btn--comments station-comments-link station-hero__comments"
               aria-label="View 0 comments">
                <span class="station-action-icon" aria-hidden="true">
                    <svg class="station-comments-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" role="img">
                        <path fill="none" stroke="currentColor" stroke-width="1.25" d="M2.5 2.5h11a1.5 1.5 0 0 1 1.5 1.5v5a1.5 1.5 0 0 1-1.5 1.5H7.4L4.6 14.4a.5.5 0 0 1-.85-.36V10.5h-1.25A1.5 1.5 0 0 1 1 9.0v-5a1.5 1.5 0 0 1 1.5-1.5Z" />
                        <path fill="currentColor" d="M5.5 7a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm3 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm3 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                    </svg>
                    
                </span>
                <span class="visually-hidden">Comments</span>
            </a>
        </div>
    </div>

        <input type="hidden" name="csrfmiddlewaretoken" value="nMOCfawjUtB9FFC5XXZ7RelnmTRm2q7W2KWKiFQaIKdr4jb86TrDOLaz3LrYwwVi">
        <input type="hidden" id="station-id" value="44872">
        <input type="hidden" id="is-favorite" value="False">
        <input type="hidden" id="is-user-authenticated" value="false">
        <input type="hidden" id="station-categories" value='[]'>
        <input type="hidden" id="station-country-name" value="Switzerland">
        <input type="hidden" id="station-country-code" value="CH">
</div>



<section class="radio-desc station-info-panel surface-panel" aria-label="Station overview">
  <a name="radio-more" id="radio-more"></a>
  <div class="station-info-panel__text">
    
      <p class="station-info-panel__sentence">
        Listen to Rouge FM - Suisse Radio live online for free.
        
          Station genres - Swiss and Pop.
        
        
          Broadcast is from Switzerland, Lausanne.
        
        
          Broadcast language: German.
        
      </p>
    
  </div>
  <div class="station-info-panel__meta">
    
    
    <ul class="station-tags station-summary__taglist station-info-panel__tags">
      
      <li class="station-tag">
        
        <a href="/genres/swiss/" class="station-tag-pill">
          Swiss
        </a>
      </li>
      
      <li class="station-tag">
        
        <a href="/genres/pop/" class="station-tag-pill">
          Pop
        </a>
      </li>
      
    </ul>
    
    
    <div class="station-inline-votes" role="group" aria-label="Station reactions">
      <button type="button"
              class="station-inline-votes__btn station-inline-votes__btn--like"
              data-vote-proxy="like"
              aria-pressed="false">
        <i class="fas fa-thumbs-up" aria-hidden="true"></i>
        <span class="station-inline-votes__count" data-vote-count="like">0</span>
      </button>
      <button type="button"
              class="station-inline-votes__btn station-inline-votes__btn--dislike"
              data-vote-proxy="dislike"
              aria-pressed="false">
        <i class="fas fa-thumbs-down" aria-hidden="true"></i>
        <span class="station-inline-votes__count" data-vote-count="dislike">0</span>
      </button>
    </div>
  </div>
</section>










<section class="station-related station-related--network" aria-labelledby="station-network-title">
  <div class="station-related__header">
    <h2 class="section-title mb-1" id="station-network-title">Related Stations</h2>
    <p class="station-related__description mb-0">
      Explore 9 stations from the same network.
    </p>
  </div>
  <div id="network-stations-root"
       class="station-related__grid"
       data-station-id="44872">
    <div id="network-stations-list" class="station-related__grid-list">
      

  <article class="station-related__card">
    <a href="/ch/rouge-fm-45206/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45206/logo_nQ8xyLxNzr.png?v=1739647610"
             alt="Rouge FM logo"
             title="Rouge FM"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-best-hits-44863/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44863/logo_DNgd3idIGt.png?v=1739647582"
             alt="Rouge FM - Best Hits logo"
             title="Rouge FM - Best Hits"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM - Best Hits</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-reggae-45192/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45192/logo_9VKHW6bkxB.png?v=1739647609"
             alt="Rouge FM - Reggae logo"
             title="Rouge FM - Reggae"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM - Reggae</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-rock-44816/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44816/logo_0kBoDWC90R.png?v=1739647578"
             alt="Rouge FM -  Rock logo"
             title="Rouge FM -  Rock"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM -  Rock</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-urban-45042/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45042/logo_RrophYP69K.png?v=1739647597"
             alt="Rouge FM - Urban logo"
             title="Rouge FM - Urban"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM - Urban</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-france-45300/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45300/logo_pAkGYUjLwc.png?v=1739647617"
             alt="Rouge FM -  France logo"
             title="Rouge FM -  France"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM -  France</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-platine-45320/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45320/logo_jN3yhCAFUz.png?v=1739647619"
             alt="Rouge FM - Platine logo"
             title="Rouge FM - Platine"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM - Platine</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/rouge-fm-best-hits-90s-44854/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44854/logo_N01mSy6W1L.png?v=1739647581"
             alt="Rouge FM - Best Hits 90&#x27;s logo"
             title="Rouge FM - Best Hits 90&#x27;s"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Rouge FM - Best Hits 90&#x27;s</span>
    </a>
  </article>


    </div>
  </div>
  
  <div class="station-related__actions text-center d-none d-sm-block">
    <button type="button"
            class="btn-playlist station-related__action-btn"
            data-stations-modal-open
            data-modal-id="networkStationsModal"
            data-fetch-url="/stations/ajax/network-stations/44872/"
            data-limit="24"
            aria-controls="networkStationsModal"
            aria-haspopup="dialog">
      <i class="fas fa-chevron-down btn-playlist-icon" aria-hidden="true"></i>
      More related
    </button>
  </div>
  <div class="locations-modal"
       id="networkStationsModal"
       role="dialog"
       aria-modal="true"
       aria-hidden="true"
       data-open="false"
       hidden
       data-stations-modal
       data-fetch-url="/stations/ajax/network-stations/44872/"
       data-limit="24">
    <div class="locations-modal__overlay" data-stations-modal-close></div>
    <div class="locations-modal__dialog" role="document">
      <div class="locations-modal__header">
        <h2 class="locations-modal__title">
          All stations in Rouge FM - Suisse Radio network
        </h2>
        <button type="button"
                class="locations-modal__close"
                data-stations-modal-close
                aria-label="Close">
          <i class="bi bi-x-lg" aria-hidden="true"></i>
        </button>
      </div>
      <div class="locations-modal__body">
        <div class="locations-modal__loading" data-stations-modal-loading hidden>
          <span class="locations-modal__spinner" aria-hidden="true"></span>
          <span class="locations-modal__loading-text">Loading...</span>
        </div>
        <div class="locations-modal__content">
          <div class="station-related__grid">
            <div class="station-related__grid-list" data-stations-modal-list></div>
          </div>
          <div class="locations-modal__inline-loader" data-stations-modal-inline-loader hidden>
            <span class="locations-modal__spinner" aria-hidden="true"></span>
            <span class="locations-modal__loading-text">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="station-related__actions d-sm-none text-center">
    <button type="button"
            class="btn-playlist station-related__action-btn"
            data-stations-modal-open
            data-modal-id="networkStationsModal"
            data-fetch-url="/stations/ajax/network-stations/44872/"
            data-limit="24"
            aria-controls="networkStationsModal"
            aria-haspopup="dialog">
      <i class="fas fa-chevron-down btn-playlist-icon" aria-hidden="true"></i>
      More related
    </button>
  </div>
  
</section>


<div id="station-tracklist-panel"
     class="tracklist-panel"
     data-station-id="44872"
     data-load-more-text="Show more tracks"
     data-error-text="Unable to load playlist. Please try again."
     data-tracklist-default-date="2025-11-30"
     data-tracklist-url="/stations/ajax/tracks-by-day/"
     data-tracklist-prefetched="true"
     data-tracklist-next-page=""
     data-tracklist-default-title="Playlist Rouge FM - Suisse – What played today on air, Lausanne, Switzerland"
     data-tracklist-default-description="See what played today on air at Rouge FM - Suisse (Lausanne, Switzerland). Full radio playlist for today. Discover every song that aired during the day."
     data-tz-offset="0"
     
     
     hidden>
  <div class="tracklist-panel__overlay" data-tracklist-close></div>
  <aside class="tracklist-panel__drawer" role="dialog" aria-modal="true" aria-labelledby="tracklistPanelTitle">
    <header class="tracklist-panel__header">
      <div class="tracklist-panel__heading">
        <h2 class="tracklist-panel__title" id="tracklistPanelTitle">
          Playlist — Rouge FM - Suisse Radio
        </h2>
        <p class="tracklist-panel__subtitle" id="tracklistPanelSubtitle"></p>
      </div>
      <button type="button"
              class="tracklist-panel__close"
              data-tracklist-close
              aria-label="Close">
        <i class="bi bi-x-lg" aria-hidden="true"></i>
      </button>
    </header>
    <div class="tracklist-panel__body">
      <div class="tracklist-panel__selector">
        <label class="tracklist-select__label" for="tracklistDaySelect">Select day</label>
        <select id="tracklistDaySelect"
                class="tracklist-select"
                data-tracklist-select>
          
            <option value="2025-11-30"
                    data-tracklist-title="Today"
                    data-tracklist-date="30 Nov"
                    data-tracklist-label="Today · 30 Nov">
              Today · 30 Nov
            </option>
          
            <option value="2025-11-29"
                    data-tracklist-title="Yesterday"
                    data-tracklist-date="29 Nov"
                    data-tracklist-label="Yesterday · 29 Nov">
              Yesterday · 29 Nov
            </option>
          
            <option value="2025-11-28"
                    data-tracklist-title="Fri"
                    data-tracklist-date="28 Nov"
                    data-tracklist-label="Fri · 28 Nov">
              Fri · 28 Nov
            </option>
          
            <option value="2025-11-27"
                    data-tracklist-title="Thu"
                    data-tracklist-date="27 Nov"
                    data-tracklist-label="Thu · 27 Nov">
              Thu · 27 Nov
            </option>
          
            <option value="2025-11-26"
                    data-tracklist-title="Wed"
                    data-tracklist-date="26 Nov"
                    data-tracklist-label="Wed · 26 Nov">
              Wed · 26 Nov
            </option>
          
            <option value="2025-11-25"
                    data-tracklist-title="Tue"
                    data-tracklist-date="25 Nov"
                    data-tracklist-label="Tue · 25 Nov">
              Tue · 25 Nov
            </option>
          
            <option value="2025-11-24"
                    data-tracklist-title="Mon"
                    data-tracklist-date="24 Nov"
                    data-tracklist-label="Mon · 24 Nov">
              Mon · 24 Nov
            </option>
          
        </select>
      </div>
      <div class="tracklist-panel__content" data-tracklist-content>
        
          
<ul class="tracklist-list" data-list="true">
    
</ul>

    <div class="tracklist-empty" data-tracklist-empty="true">
        <img src="/static/image/characters/no_playlist_character_sp.dad72ec078d6.jpg"
             alt="No playlist"
             class="tracklist-empty__image">
        <div class="tracklist-empty__text">
            
                Unfortunately, Rouge FM - Suisse station did not provide track data for this day.
                Try selecting another day of the week or explore playlists of other stations on our website.
            
        </div>
    </div>

    
        <h2 class="my-4">
            
                We think you may like these stations similar to Rouge FM - Suisse
            
        </h2>
        <div class="rs-surface-plain station-card-grid">
            <div class="row gy-3">
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/1fm-absolute-pop-latino-radio-45301/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45301/logo_RlxrDD4tJ7.png?v=1739647617"
                                 alt="1.FM - Absolute Pop Latino Radio logo"
                                 title="1.FM - Absolute Pop Latino Radio"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">1.FM - Absolute Pop Latino Radio</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/one-fm-45213/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45213/logo_YTESwF7FO1.png?v=1739647611"
                                 alt="One FM logo"
                                 title="One FM"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">One FM</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/radio-swiss-pop-45244/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45244/logo_h1jthddv8x.png?v=1739647613"
                                 alt="Radio Swiss Pop logo"
                                 title="Radio Swiss Pop"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Radio Swiss Pop</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/folk-fantazija-45109/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45109/logo_eD3c8sWQYO.png?v=1739647602"
                                 alt="Folk Fantazija logo"
                                 title="Folk Fantazija"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Folk Fantazija</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/vibration-1080-fm-44831/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/44831/logo_gKnqzqIej6.png?v=1739647580"
                                 alt="Vibration 108.0 FM logo"
                                 title="Vibration 108.0 FM"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Vibration 108.0 FM</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/radio-monte-carlo-swiss-45151/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45151/logo_i0SvFs3AFX.png?v=1739647606"
                                 alt="Radio Monte Carlo (Swiss) logo"
                                 title="Radio Monte Carlo (Swiss)"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Radio Monte Carlo (Swiss)</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/1fm-love-classics-radio-44800/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/44800/logo_332dAYWSAd.png?v=1739647577"
                                 alt="1.FM - Love Classics Radio logo"
                                 title="1.FM - Love Classics Radio"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">1.FM - Love Classics Radio</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/vertical-radio-45282/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45282/logo_zhmBQxX70f.png?v=1739647616"
                                 alt="Vertical Radio logo"
                                 title="Vertical Radio"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Vertical Radio</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/energy-zurich-44812/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/44812/logo_oxtCP3ArBb.png?v=1739647578"
                                 alt="Energy Zürich logo"
                                 title="Energy Zürich"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Energy Zürich</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/traxx-fm-funk-45197/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45197/logo_x9WHGOz9uA.png?v=1739647609"
                                 alt="Traxx FM Funk logo"
                                 title="Traxx FM Funk"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Traxx FM Funk</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/energy-st-gallen-45110/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45110/logo_2nDJJdtDNC.png?v=1739647602"
                                 alt="Energy St. Gallen logo"
                                 title="Energy St. Gallen"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Energy St. Gallen</span>
                    </a>
                </div>
            
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 network-station-item">
                    <a href="/ch/vibration-francaise-45281/"
                       class="station-card station-card--compact">
                        <div class="network-station-logo-wrapper station-card__media">
                            <img src="/media/logos/180/45281/logo_i2QMzLNlxq.png?v=1739647616"
                                 alt="Vibration Francaise logo"
                                 title="Vibration Francaise"
                                 class="network-station-logo station-card__image"
                                 width="160"
                                 height="90"
                                 loading="lazy">
                        </div>
                        <span class="network-station-name station-card__title">Vibration Francaise</span>
                    </a>
                </div>
            
            </div>
        </div>
    


        
        <div class="tracklist-panel__loader" data-tracklist-loader hidden>
          <div class="tracklist-panel__spinner" aria-hidden="true"></div>
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
  </aside>
</div>



<section class="station-related" aria-labelledby="station-related-title">
  <div class="station-related__header">
    <h2 class="section-title" id="station-related-title">Similar Stations</h2>
    <p class="station-related__description">
      
        Stations similar to Rouge FM - Suisse Radio also work in the following genres: Swiss and Pop.
      
    </p>
  </div>
  <div id="related-stations-grid"
       class="station-related__grid">
    <div class="station-related__grid-list">
      

  <article class="station-related__card">
    <a href="/ch/1fm-absolute-pop-latino-radio-45301/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45301/logo_RlxrDD4tJ7.png?v=1739647617"
             alt="1.FM - Absolute Pop Latino Radio logo"
             title="1.FM - Absolute Pop Latino Radio"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">1.FM - Absolute Pop Latino Radio</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/one-fm-45213/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45213/logo_YTESwF7FO1.png?v=1739647611"
             alt="One FM logo"
             title="One FM"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">One FM</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/radio-swiss-pop-45244/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45244/logo_h1jthddv8x.png?v=1739647613"
             alt="Radio Swiss Pop logo"
             title="Radio Swiss Pop"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Radio Swiss Pop</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/folk-fantazija-45109/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45109/logo_eD3c8sWQYO.png?v=1739647602"
             alt="Folk Fantazija logo"
             title="Folk Fantazija"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Folk Fantazija</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/vibration-1080-fm-44831/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44831/logo_gKnqzqIej6.png?v=1739647580"
             alt="Vibration 108.0 FM logo"
             title="Vibration 108.0 FM"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Vibration 108.0 FM</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/radio-monte-carlo-swiss-45151/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45151/logo_i0SvFs3AFX.png?v=1739647606"
             alt="Radio Monte Carlo (Swiss) logo"
             title="Radio Monte Carlo (Swiss)"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Radio Monte Carlo (Swiss)</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/1fm-love-classics-radio-44800/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44800/logo_332dAYWSAd.png?v=1739647577"
             alt="1.FM - Love Classics Radio logo"
             title="1.FM - Love Classics Radio"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">1.FM - Love Classics Radio</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/vertical-radio-45282/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45282/logo_zhmBQxX70f.png?v=1739647616"
             alt="Vertical Radio logo"
             title="Vertical Radio"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Vertical Radio</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/energy-zurich-44812/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/44812/logo_oxtCP3ArBb.png?v=1739647578"
             alt="Energy Zürich logo"
             title="Energy Zürich"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Energy Zürich</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/traxx-fm-funk-45197/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45197/logo_x9WHGOz9uA.png?v=1739647609"
             alt="Traxx FM Funk logo"
             title="Traxx FM Funk"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Traxx FM Funk</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/energy-st-gallen-45110/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45110/logo_2nDJJdtDNC.png?v=1739647602"
             alt="Energy St. Gallen logo"
             title="Energy St. Gallen"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Energy St. Gallen</span>
    </a>
  </article>

  <article class="station-related__card">
    <a href="/ch/vibration-francaise-45281/"
       class="station-related__link"
       hreflang="en">
      <div class="station-related__logo-wrap">
        <img src="/media/logos/180/45281/logo_i2QMzLNlxq.png?v=1739647616"
             alt="Vibration Francaise logo"
             title="Vibration Francaise"
             class="station-related__logo"
             width="160"
             height="90"
             loading="lazy">
      </div>
      <span class="station-related__name">Vibration Francaise</span>
    </a>
  </article>


    </div>
  </div>
  
  <div class="station-related__actions text-center d-none d-sm-block">
    <button type="button"
            class="btn-playlist station-related__action-btn"
            data-stations-modal-open
            data-modal-id="relatedStationsModal"
            data-fetch-url="/stations/ajax/related-stations/44872/"
            data-limit="24"
            aria-controls="relatedStationsModal"
            aria-haspopup="dialog">
      <i class="fas fa-chevron-down btn-playlist-icon" aria-hidden="true"></i>
      More similar
    </button>
  </div>
  <div class="locations-modal"
       id="relatedStationsModal"
       role="dialog"
       aria-modal="true"
       aria-hidden="true"
       data-open="false"
       hidden
       data-stations-modal
       data-fetch-url="/stations/ajax/related-stations/44872/"
       data-limit="24">
    <div class="locations-modal__overlay" data-stations-modal-close></div>
    <div class="locations-modal__dialog" role="document">
      <div class="locations-modal__header">
        <h2 class="locations-modal__title">
          Similar Stations
        </h2>
        <button type="button"
                class="locations-modal__close"
                data-stations-modal-close
                aria-label="Close">
          <i class="bi bi-x-lg" aria-hidden="true"></i>
        </button>
      </div>
      <div class="locations-modal__body">
        <div class="locations-modal__loading" data-stations-modal-loading hidden>
          <span class="locations-modal__spinner" aria-hidden="true"></span>
          <span class="locations-modal__loading-text">Loading...</span>
        </div>
        <div class="locations-modal__content">
          <div class="station-related__grid">
            <div class="station-related__grid-list" data-stations-modal-list></div>
          </div>
          <div class="locations-modal__inline-loader" data-stations-modal-inline-loader hidden>
            <span class="locations-modal__spinner" aria-hidden="true"></span>
            <span class="locations-modal__loading-text">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="station-related__actions d-sm-none text-center">
    <button type="button"
            class="btn-playlist station-related__action-btn"
            data-stations-modal-open
            data-modal-id="relatedStationsModal"
            data-fetch-url="/stations/ajax/related-stations/44872/"
            data-limit="24"
            aria-controls="relatedStationsModal"
            aria-haspopup="dialog">
      <i class="fas fa-chevron-down btn-playlist-icon" aria-hidden="true"></i>
      More similar
    </button>
  </div>
  
</section>


<section class="station-comments__grid">
  <div class="comments-form surface-panel">
      <h2 class="section-title station-comments__title">Add a Comment</h2>
      
      
      <div class="station-votes station-comments__votes station-votes--inline">
        <div class="station-votes__summary">
            <div class="station-votes__score">
                <span class="station-votes__value" id="station-votes-total">0</span>
                <span class="station-votes__label">Total votes</span>
            </div>
            <div class="station-votes__buttons">
                <div class="seg pill glass station-votes__seg" id="seg-pill"
                     data-likes="0"
                     data-dislikes="0">
                    <div class="seg-item like">
                      <button id="station-like-seg" class="seg-btn" aria-label="Like station" aria-keyshortcuts="Alt+Shift+L">
                        <i class="fas fa-thumbs-up"></i>
                      </button>
                      <span class="seg-count" id="seg-like-count">0</span>
                    </div>
                    <div class="seg-item dislike">
                      <button id="station-dislike-seg" class="seg-btn" aria-label="Dislike station" aria-keyshortcuts="Alt+Shift+D">
                        <i class="fas fa-thumbs-down"></i>
                      </button>
                      <span class="seg-count" id="seg-dislike-count">0</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="station-votes__bars">
            <div class="station-votes__bar station-votes__bar--likes">
                <span id="station-votes-bar-likes" style="width:0%;"></span>
            </div>
            <div class="station-votes__bar station-votes__bar--dislikes">
                <span id="station-votes-bar-dislikes" style="width:0%;"></span>
            </div>
        </div>
        <div class="station-votes__details">
            <div class="station-votes__detail station-votes__detail--likes">
                <span class="station-votes__detail-label">Likes</span>
                <span class="station-votes__detail-value">
                    <span id="station-votes-likes">0</span>
                    <span class="station-votes__detail-percent" id="station-votes-likes-percent">
                        0%
                    </span>
                </span>
            </div>
            <div class="station-votes__detail station-votes__detail--dislikes">
                <span class="station-votes__detail-label">Dislikes</span>
                <span class="station-votes__detail-value">
                    <span id="station-votes-dislikes">0</span>
                    <span class="station-votes__detail-percent" id="station-votes-dislikes-percent">
                        0%
                    </span>
                </span>
            </div>
        </div>
      </div>
      
      
      <form id="commentForm"
            class="station-comments__form-body"
            
            action="/comments/add_comment/44872/"
            method="post">
        <input type="hidden" name="csrfmiddlewaretoken" value="nMOCfawjUtB9FFC5XXZ7RelnmTRm2q7W2KWKiFQaIKdr4jb86TrDOLaz3LrYwwVi">
        <input type="text" name="nickname" autocomplete="off" class="d-none">
        <textarea id="commentTextArea"
                  name="comment"
                  class="form-control station-comments__textarea"
                  required
                  maxlength="500"
                  placeholder="Share your impression about the station"
                  aria-keyshortcuts="Alt+Shift+C"></textarea>
        <div class="station-comments__meta d-flex flex-wrap align-items-center justify-content-between gap-2">
          <span class="form-text text-muted station-comments__counter">
            <span id="commentCharLeft"
                  data-max="500"
                  data-warn="50"
                  data-danger="10">500</span> characters left
          </span>
          
          <div class="station-comments__guest">
            <label for="guestNameInput" class="visually-hidden">Your name</label>
            <input type="text"
                   id="guestNameInput"
                   name="guest_name"
                   class="form-control station-comments__input"
                   placeholder="Your name"
                   required>
          </div>
          
        </div>
        <button type="submit" class="btn btn-primary station-comments__submit">
          Send
        </button>
      </form>
      <p id="commentMessage"
         class="alert alert-success station-comments__alert"
         style="display:none;"></p>
  </div>
  <div class="station-comments__feed comments-section surface-panel" id="commentsSection">
    <div id="commentsFilter"
         class="station-comments__filter comments-filter"
         data-station-id="44872"
         data-active-sort="date">
      <div class="station-comments__filter-label">
        <span class="filter-label">Sort by:</span>
      </div>
      <div class="segmented">
        <button type="button" class="seg-btn active"
                data-sort="date"
                aria-pressed="true">Date</button>
        <button type="button" class="seg-btn"
                data-sort="pop"
                aria-pressed="false">Popularity</button>
      </div>
    </div>
    <div id="commentsList" class="station-comments__list">
      


<h2 class="section-title d-flex align-items-center justify-content-between">
  <span>Comments: 0</span>
</h2>



  <p>No reviews or comments yet. Be the first to write one!</p>




    </div>
  </div>
</section>





<section class="station-contacts-card surface-panel">
  <h2 class="station-contacts-title">
    Contacts Information for Rouge FM - Suisse Radio
  </h2>
  <div class="station-contacts-card__grid">
    
      <div class="station-contact-item">
        <span class="station-contact-label">Office Address:</span>
        <span class="station-contact-value">4 Av. de la Gare, 1003 Lausanne</span>
      </div>
    

    
      <div class="station-contact-item">
        <span class="station-contact-label">Email:</span>
        <span class="station-contact-value">contact@rougefm.com</span>
      </div>
    

    
      <div class="station-contact-item">
        <span class="station-contact-label">Website:</span>
        <a class="station-contact-link" href="http://www.rougefm.com/webradios-suisse" target="_blank" rel="nofollow">
          www.rougefm.com/webradios-suisse
        </a>
      </div>
    

    
      <div class="station-contact-item">
        <span class="station-contact-label">Phone:</span>
        <a class="station-contact-link" href="tel:+41 21 654 60 10">+41 21 654 60 10</a>
      </div>
    

    

    

    
      <div class="station-contact-item">
        <span class="station-contact-label">Facebook:</span>
        <a class="station-contact-link" href="https://www.facebook.com/rougefm" target="_blank" rel="nofollow">
          @rougefm
        </a>
      </div>
    

    
      <div class="station-contact-item">
        <span class="station-contact-label">Twitter:</span>
        <a class="station-contact-link" href="https://x.com/rougefm" target="_blank" rel="nofollow">
          @rougefm
        </a>
      </div>
    

    

    

    

    

    
  </div>
</section>


</div> 

                        <div id="i18n-seed" hidden
                             data-genres="Genres"
                             data-subgenres="Subgenres"
                            data-all-genres="All genres and subgenres"
                            data-loading-genres="Loading genres..."
                            data-no-genres="No genres available"
                            data-open-parent="Open genre"
                            data-view-children="View subgenres"
                            data-locations="Locations"
                            data-regions="Regions"
                            data-cities="Cities"
                            data-open-region="Open region"
                            data-view-cities="View cities"
                            data-loading-locations="Loading locations..."
                            data-no-locations="No locations available"
                            data-back="Back"
                            data-close="Close"
                            data-continents="Continents"
                            data-countries="Countries"
                            data-loading-countries="Loading countries..."
                            data-no-countries="No countries available"
                            data-view-countries="View countries"
                             data-radio="Radio"
                             data-favorites="Favorites"
                             data-menu="Menu"
                             data-controls="Controls"
                             data-volume="Volume"
                             data-copy-title="Copy track title"
                             data-search-youtube="Search on YouTube"></div>
                    </div>
                    
                    <div class="rail rail--right rs-xl-block" aria-label="Advertisement" role="complementary">
                        <div class="rail-shell">
                            <aside id="right-sidebar-slot" aria-label="Advertisement" role="complementary">
                            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5868138356901656"
                                    crossorigin="anonymous"></script>
                            <!-- RadioSpinner - Right sidebar -->
                            <ins class="adsbygoogle"
                                 style="display:block"
                                 data-ad-client="ca-pub-5868138356901656"
                                 data-ad-slot="9017337242"
                                 data-ad-format="auto"
                                 data-full-width-responsive="true"></ins>
                            <div class="ad-placeholder">Advertisement</div>
                            </aside>
                            <div class="visually-hidden">End of advertisement</div>
                        </div>
                    </div>
                    

                    <footer class="rs-footer">
                        <div class="rs-footer__surface rs-surface-plain">
                            
                            <div class="rs-footer__inner">
                                <div class="rs-footer__brand">
                                    <a href="/"
                                       class="rs-footer__logo-link"
                                       aria-label="RadioSpinner">
                                        <img src="/static/image/logo_radio_w_spinner_d.5ce081ead0d7.png"
                                             alt="RadioSpinner"
                                             class="rs-footer__logo"
                                             width="150"
                                             height="64"
                                             loading="lazy">
                                    </a>
                                    <p class="rs-footer__text">
                                        <b>RadioSpinner</b>. All Radio Stations from around the World. Listen to over 60,000 radio stations for free.
                                    </p>
                                </div>

                                <nav class="rs-footer__nav" aria-label="Menu">
                                    <ul class="rs-footer__nav-list">
                                        
                                        <li><a class="rs-footer__nav-link" href="/widget/banner/">Widgets</a></li>
                                        
                                        <li><a class="rs-footer__nav-link" href="/contact/">Contact Us</a></li>
                                        
                                        <li><a class="rs-footer__nav-link" href="/info/privacy/">Privacy</a></li>
                                        
                                        <li><a class="rs-footer__nav-link" href="/info/term/">Terms of Use</a></li>
                                    </ul>
                                </nav>
                            </div>

                            <div class="rs-footer__bottom">
                                <p class="rs-footer__copyright">&copy; <span id="current-year"></span> RadioSpinner</p>
                            </div>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Mobile controls overlay -->
    <div id="mobile-controls-overlay" class="mobile-controls-overlay" hidden>
        <div class="mco-backdrop"></div>
        <div class="mco-panel">
            <div class="mco-header">
                <span class="mco-title">Controls</span>
                <button id="mco-close" class="mco-close" aria-label="Close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="mco-section" id="mco-streams"></div>
            <div class="mco-section" id="mco-volume"></div>
            <div class="mco-section" id="mco-favorite"></div>
            <div class="mco-section" id="mco-actions"></div>
        </div>
    </div>

    <div id="toast-fav-migrated" class="rs-toast" hidden>
      <div class="rs-toast-content">
        <i class="bi bi-heart-fill me-2"></i>
        Your temporary favorites were added to your account.
      </div>
    </div>

    
    <div class="modal fade"
         id="authModal"
         tabindex="-1"
         aria-labelledby="authModalLabel"
         aria-hidden="true"
         data-bs-backdrop="static"
         data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-transparent border-0">
                <div class="modal-body pt-0">
                    <span id="authModalLabel" class="visually-hidden">Log in</span>
                    <div class="mx-auto position-relative" style="max-width: 520px;">
                        <button type="button"
                                class="btn auth-modal-close d-flex align-items-center justify-content-center position-absolute top-0 end-0 mt-n3 me-n3"
                                style="z-index: 5;"
                                data-bs-dismiss="modal"
                                aria-label="Close">
                            <i class="bi bi-x-lg"></i>
                        </button>
                        









<div class="auth-card">
  
    <h2 class="auth-title text-center">Login</h2>
  

  

  <form method="post"
        action="/accounts/login/"
        data-auth-form
        novalidate>
    <input type="hidden" name="csrfmiddlewaretoken" value="nMOCfawjUtB9FFC5XXZ7RelnmTRm2q7W2KWKiFQaIKdr4jb86TrDOLaz3LrYwwVi">
    <input type="hidden"
           name="next"
           value="/ch/rouge-fm-suisse-44872/"
           data-login-next-field>

    <div class="mb-3">
      <label for="id_login">Email:</label>
      <input type="email" name="login" placeholder="Email" autocomplete="email" maxlength="320" data-bs-title="Email" data-bs-placement="right" data-bs-toggle="tooltip" autocapitalize="none" inputmode="email" class="form-control" required id="id_login">
      
    </div>

    <div class="mb-3">
      <label for="id_password">Password:</label>
      <input type="password" name="password" placeholder="Password" autocomplete="current-password" data-bs-title="Password" data-bs-placement="right" data-bs-toggle="tooltip" class="form-control" required aria-describedby="id_password_helptext" id="id_password">
      
      <div class="form-text mt-1">
        <a href="/accounts/password/reset/" class="small">Forgot password?</a>
      </div>
    </div>

    <div class="form-check mb-4">
      <input type="checkbox" name="remember" id="id_remember" class="form-check-input">
      <label class="form-check-label" for="id_remember">Remember me</label>
    </div>

    <button type="submit" class="btn btn-primary w-100">Log in</button>
  </form>

  <p class="auth-footer mt-3 mb-0">
    Don't have an account?
    <a href="/accounts/signup/?next=/ch/rouge-fm-suisse-44872/">Sign up</a>
  </p>

  
  
    <hr class="separator-line">
    <div class="auth-social">
      
      <a href="https://radiospinner.com/accounts/facebook/login/?process=login&amp;next=%2Faccounts%2Fpopup-close%2F%3Fnext%3D%2Fch%2Frouge-fm-suisse-44872%2F" class="auth-social-btn auth-social-btn--facebook external-auth">
        <span class="auth-social-btn__icon"><i class="bi bi-facebook"></i></span>
        <span class="auth-social-btn__label">Log in with Facebook</span>
      </a>
      
      <a href="https://radiospinner.com/accounts/google/login/?process=login&amp;next=%2Faccounts%2Fpopup-close%2F%3Fnext%3D%2Fch%2Frouge-fm-suisse-44872%2F" class="auth-social-btn auth-social-btn--google external-auth">
        <span class="auth-social-btn__icon"><i class="bi bi-google"></i></span>
        <span class="auth-social-btn__label">Log in with Google</span>
      </a>
    </div>
  
</div>


<script>
  (function () {
    if (window.__rsLoginNextInit) return;
    window.__rsLoginNextInit = true;
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('[data-login-next-field]').forEach(function (input) {
        if (input.dataset.autofill === '1') return;
        input.dataset.autofill = '1';
        try {
          var lastPage = localStorage.getItem('last_page');
          if (lastPage && lastPage !== '' &&
              (!input.value || input.value === '/' || input.value.includes('popup-close'))) {
            input.value = lastPage;
          }
        } catch (e) {}
      });
    });
  })();
</script>

<script>
  (function () {
    if (window.__rsAuthTooltipInit) return;
    window.__rsAuthTooltipInit = true;
    document.addEventListener('DOMContentLoaded', function () {
      try {
        var tooltipTargets = [].slice.call(document.querySelectorAll('.auth-card [data-bs-toggle="tooltip"]'));
        if (typeof bootstrap === 'undefined' || !bootstrap.Tooltip) return;
        tooltipTargets.forEach(function (el) {
          if (!bootstrap.Tooltip.getInstance(el)) {
            new bootstrap.Tooltip(el, { trigger: 'focus', placement: el.dataset.bsPlacement || 'right' });
          }
        });
      } catch (e) {}
    });
  })();
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- External libraries -->
    <script src="/static/admin/js/vendor/jquery/jquery.min.2c872dbe60f4.js"></script>
    <script src="/static/admin/js/vendor/select2/select2.full.c2afdeda3058.js" defer></script>
    <script src="/static/django_select2/django_select2.b0d2036b8b94.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" defer></script>

    <script>
      // Global UI i18n strings for dynamic JS-rendered fragments
      (function(){
          window.i18n = Object.assign(window.i18n || {}, {
            yourTime: "Your time",
            stationTime: "Station time",
            sortBy: "Sort by",
            date: "Date",
            popularity: "Popularity",
          quickSearchPlaceholder: "Quick station search",
          showMoreResults: "Show more results",
          widgets: "Widgets",
          subgenres: "Subgenres",
          allGenres: "All genres and subgenres",
          genres: "Genres",
          openParent: "Open genre",
          viewChildren: "View subgenres",
          locations: "Locations",
          continents: "Continents",
          countries: "Countries",
          regionsLabel: "Regions",
          citiesLabel: "Cities",
          openRegion: "Open region",
          viewCities: "View cities",
          viewCountries: "View countries",
          loadingLocations: "Loading locations...",
          noLocations: "No locations available",
          loadingCountries: "Loading countries...",
          noCountries: "No countries available",
          close: "Close",
          back: "Back",
          volume: "Volume",
          copyTrackTitle: "Copy track title",
          searchOnYouTube: "Search on YouTube"
          });
        })();
      </script>

    

    <script>
      // Language dropdown: render above player with its own scroll (works across AJAX/sidebar updates)
      (function(){
        function handleShown(e){ /* используем нативный Bootstrap рендер */ }
        function handleHidden(e){ /* без переноса узла — действий не требуется */ }
        // Delegate globally so it works after AJAX updates
        // Действуем только после того, как Bootstrap реально открыл меню
        document.addEventListener('shown.bs.dropdown', function(e){
          requestAnimationFrame(function(){ handleShown(e); });
        });
        document.addEventListener('hidden.bs.dropdown', handleHidden);
        // Also rebind after our custom ajax content loads & ensure sidebar closes on navigation
        document.addEventListener('ajaxContentLoaded', function(){
          try {
            initializeSidebarLinks();
            initializeDesktopGenresLink();
            initializeDesktopLocationsLink();
            initializeDesktopCountriesLink();
            if (window.matchMedia('(max-width: 991.98px)').matches) {
              hideSidebar();
              window.__rsRestoreSidebar = false;
              window.__rsIgnoreSidebarAutoClose = false;
            }
          } catch(_) {}
        });
      })();
    </script>

    
    <!-- Application scripts -->
    <script src="/static/stations/js/utils.b02dce253759.js?v=1764461027" defer></script>
    <script src="/static/stations/js/player.eb9b89c22dc1.js?v=1764461027" defer></script>
    <script src="/static/js/auto_gradient.f96925830fc0.js?v=1764461027" defer></script>
    <script src="/static/js/topbar.5687e557e96f.js?v=1764461027" defer></script>
    <script src="/static/stations/js/meta_updates.e2b526ab051e.js?v=1764461027" defer></script>
    <script src="/static/stations/js/album_covers.73c2ed9dfa57.js?v=4" defer></script>
    <script src="/static/stations/js/ajax_navigation.75c066dfc6e8.js?v=1764461027" defer></script>
    <script src="/static/articles/js/article_comments.8b5081498861.js?v=1764461027" defer></script>
    <script src="/static/articles/js/article_likes.3c10b6965073.js?v=1764461027" defer></script>
    <script src="/static/stations/js/play_in_lists.c24eba89ebf2.js" defer></script>
    <script src="/static/js/search_autocomplete.43cb384bc22b.js?v=1764461027" defer></script>
    <script src="/static/js/live_search.7b613423f063.js?v=1764461027" defer></script>
    <script src="/static/engagement/js/engagement.d6dc18d6fa4a.js?v=1764461027" defer></script>
    <script src="/static/engagement/js/engagement_observer.61693964a2d4.js?v=1764461027" defer></script>
    

    <script>
        // ================================
        // Cookie utilities
        // ================================
        function setCookie(name, value, days) {
            try { if (typeof window.rsSetCookie === 'function') { window.rsSetCookie(name, value, days||30); return; } } catch(e){}
            // Fallback: apex-domain only when possible
            var expires = "";
            if (days) { var d=new Date(); d.setTime(d.getTime()+days*864e5); expires = "; expires="+d.toUTCString(); }
            try {
              var host = location.hostname;
              var apex = '';
              if (host && host !== 'localhost' && !/^\d+\.\d+\.\d+\.\d+$/.test(host)) {
                var parts = host.split('.'); apex = (parts.length<=2?'.'+host:'.'+parts.slice(-2).join('.'));
              }
              // remove existing variants before setting
              try { document.cookie = name+"=; Max-Age=0; path=/;"; } catch(_){}
              if (apex) {
                try { document.cookie = name+"=; Max-Age=0; path=/; domain="+apex+";"; } catch(_){}
              }
              if (apex) document.cookie = name+"="+(value||"")+expires+"; path=/; domain="+apex+"; SameSite=Lax" + (location.protocol==='https:'?'; Secure':'');
              else document.cookie = name+"="+(value||"")+expires+"; path=/; SameSite=Lax" + (location.protocol==='https:'?'; Secure':'');
            } catch(_){}
        }

        function getCookie(name) {
            const escaped = name.replace(/[$?*|{}()[\]\\\/+^]/g, '\\$&');
            const pattern = '(?:^|; )' + escaped + '=([^;]*)';
            const match = document.cookie.match(new RegExp(pattern));
            return match ? decodeURIComponent(match[1]) : null;
        }

        // ================================
        // Translated UI messages
        // ================================
        var loginErrorMsg             = "Invalid username or password. Please try again.";
        var registerEmptyFieldsMsg    = "All fields must be filled";
        var invalidEmailMsg           = "Enter a valid email address";
        var passwordsNotMatchMsg      = "Passwords do not match";
        var registrationErrorMsg      = "Registration error";
        window.fallbackCurrentTrackText = "Live Broadcast";
        var PLAY_TEXT                 = "Play";
        var STOP_TEXT                 = "Stop";
        var newUserText               = "New User";
        var loginText                 = "Login";
        var commentAddedMsg           = "Comment added and will be published soon. Thank you.";
        window.NOW_TEXT               = "Now";

        // ================================
        // Global configuration
        // ================================
        // reCAPTCHA removed
        window.STATIC_URL           = "";
        window.userIsAuthenticated  = false;

        // ================================
        // Sidebar behavior
        // ================================
        function setCloseFabMode(mode){
            // mode: 'sidebar' | 'genres' | 'lang' | null
            try {
                // Ensure single FAB instance: remove duplicates created by sidebar re-render
                (function ensureSingleFab(){
                    try {
                        var list = document.querySelectorAll('#close-mobile-sidebar');
                        if (list.length > 1) {
                            for (var i=1;i<list.length;i++){ try{ list[i].remove(); }catch(_){} }
                        }
                        // If not present at all — create minimal FAB
                        if (list.length === 0) {
                            var btn = document.createElement('button');
                            btn.id = 'close-mobile-sidebar'; btn.type='button'; btn.hidden = true;
                            btn.setAttribute('aria-label', (window.i18n?.close || 'Close'));
                            btn.innerHTML = '<i class="bi bi-x-lg"></i>';
                            document.body.appendChild(btn);
                        }
                    } catch(_){}
                })();

                var fab = document.getElementById('close-mobile-sidebar');
                if (!fab) return;
                var sidebarHeader = document.querySelector('#sidebar .sidebar-mobile-header');
                var sidebarNode = document.getElementById('sidebar');
                var attachToSidebar = function(){
                    try {
                        if (sidebarHeader) {
                            if (fab.parentElement !== sidebarHeader) sidebarHeader.appendChild(fab);
                        } else if (sidebarNode) {
                            if (fab.parentElement !== sidebarNode) sidebarNode.insertBefore(fab, sidebarNode.firstChild || null);
                        }
                    } catch(_){}
                    fab.classList.remove('close-fab');
                };
                try { window.__fabMode = (mode || null); fab.setAttribute('data-mode', (mode||'')); } catch(_){}
                if (mode === 'sidebar') {
                    attachToSidebar();
                    fab.hidden = false;
                    fab.onclick = function(e){
                        e.preventDefault(); e.stopPropagation();
                        try { window.__rsRestoreSidebar = false; window.__rsIgnoreSidebarAutoClose = false; } catch(_){}
                        hideSidebar();
                    };
                } else if (mode === 'genres') {
                    if (fab.parentElement !== document.body) document.body.appendChild(fab);
                    fab.classList.add('close-fab');
                    fab.hidden = false;
                    fab.onclick = function(e){
                        e.preventDefault(); e.stopPropagation();
                        try {
                          var sheet=document.getElementById('genres-sheet');
                          // If currently in children view -> go back to parents instead of closing
                          if (window.__genresSheetState && window.__genresSheetState.view === 'children') {
                            if (sheet) { try { renderGenresSheetParents(); } catch(_){} }
                            return;
                          }
                          if(sheet) sheet.classList.remove('open');
                        } catch(_){}
                        try {
                          if (window.__genresOpenedFromSidebar) { window.__rsIgnoreSidebarAutoClose = true; showSidebar(); window.__genresOpenedFromSidebar=false; }
                          else { fab.hidden = true; fab.onclick = null; }
                        } catch(_){}
                    };
                } else if (mode === 'lang') {
                    if (fab.parentElement !== document.body) document.body.appendChild(fab);
                    fab.classList.add('close-fab');
                    fab.hidden = false;
                    fab.onclick = function(e){
                        e.preventDefault(); e.stopPropagation();
                        try { var l=document.getElementById('language-sheet'); if(l){ l.classList.remove('open'); document.documentElement.classList.remove('langsheet-open'); document.body.classList.remove('langsheet-open'); } } catch(_){}
                        try { if (window.__rsRestoreSidebar) { showSidebar(); } else { fab.hidden = true; fab.onclick = null; } } catch(_){}
                    };
                } else {
                    fab.hidden = true; fab.onclick = null;
                    attachToSidebar();
                }
            } catch(_) {}
        }
        function setMobileMenuPanel(targetPanel) {
            try {
                const sb = document.getElementById('sidebar');
                if (!sb) return;
                const menu = sb.querySelector('[data-rs-mobile-menu]');
                if (!menu) return;
                const panels = menu.querySelectorAll('[data-menu-panel]');
                let desired = targetPanel || 'root';
                let matched = false;
                panels.forEach(panel => {
                    const isMatch = panel.dataset.menuPanel === desired;
                    panel.classList.toggle('is-active', isMatch);
                    if (isMatch) matched = true;
                });
                if (!matched) {
                    panels.forEach(panel => panel.classList.toggle('is-active', panel.dataset.menuPanel === 'root'));
                    desired = 'root';
                }
                const surface = menu.querySelector('.rs-mobile-menu__surface');
                if (surface) surface.setAttribute('data-active-panel', desired);
                if (sb) sb.setAttribute('data-active-panel', desired);
            } catch(_){}
        }
        function initMobileMenuPanels() {
            try {
                const sb = document.getElementById('sidebar');
                if (!sb) return;
                const menu = sb.querySelector('[data-rs-mobile-menu]');
                if (!menu) return;
                menu.querySelectorAll('[data-menu-open]').forEach(btn => {
                    if (btn.dataset.rsMenuBound) return;
                    btn.dataset.rsMenuBound = '1';
                btn.addEventListener('click', function(ev){
                    ev.preventDefault();
                    const target = btn.getAttribute('data-menu-open');
                    if (target) {
                        setMobileMenuPanel(target);
                        if (target === 'genres') openGenresMobilePanel();
                        if (target === 'locations') openLocationsMobilePanel();
                        if (target === 'countries') openCountriesMobilePanel();
                    }
                });
            });
                menu.querySelectorAll('[data-menu-back]').forEach(btn => {
                    if (btn.dataset.rsMenuBackBound) return;
                    btn.dataset.rsMenuBackBound = '1';
                    btn.addEventListener('click', function(ev){
                        ev.preventDefault();
                        const target = btn.getAttribute('data-menu-back') || 'root';
                        setMobileMenuPanel(target);
                    });
                });
                menu.querySelectorAll('[data-menu-close]').forEach(btn => {
                    if (btn.dataset.rsMenuCloseBound) return;
                    btn.dataset.rsMenuCloseBound = '1';
                    btn.addEventListener('click', function(ev){
                        ev.preventDefault();
                        hideSidebar();
                    });
                });
                const surface = sb.querySelector('.rs-mobile-menu__surface');
                if (surface && !surface.dataset.rsSwipeBound) {
                    surface.dataset.rsSwipeBound = '1';
                    let startX = 0;
                    let startY = 0;
                    let tracking = false;
                    const minHorizontal = 80;
                    const maxVertical = 90;
                    const isSwipeContext = () => window.matchMedia('(max-width: 991.98px)').matches && sb.classList.contains('open');
                    surface.addEventListener('touchstart', function(ev){
                        if (!isSwipeContext()) { tracking = false; return; }
                        if (!ev.touches || !ev.touches.length) { tracking = false; return; }
                        const touch = ev.touches[0];
                        startX = touch.clientX;
                        startY = touch.clientY;
                        tracking = true;
                    }, { passive: true });
                    surface.addEventListener('touchmove', function(ev){
                        if (!tracking) return;
                        if (!ev.touches || !ev.touches.length) return;
                        const touch = ev.touches[0];
                        const deltaY = Math.abs(touch.clientY - startY);
                        if (deltaY > maxVertical) {
                            tracking = false;
                        }
                    }, { passive: true });
                    const finishSwipe = function(ev){
                        if (!tracking) return;
                        tracking = false;
                        if (!isSwipeContext()) return;
                        const touch = ev.changedTouches && ev.changedTouches.length ? ev.changedTouches[0] : null;
                        if (!touch) return;
                        const deltaX = touch.clientX - startX;
                        const deltaY = Math.abs(touch.clientY - startY);
                        if (deltaX <= -minHorizontal && deltaY < maxVertical) {
                            hideSidebar();
                        }
                    };
                    surface.addEventListener('touchend', finishSwipe);
                    surface.addEventListener('touchcancel', function(){ tracking = false; });
                }
                const activePanel = menu.querySelector('[data-menu-panel].is-active')?.dataset.menuPanel || 'root';
                setMobileMenuPanel(activePanel);
                if (activePanel === 'genres') openGenresMobilePanel();
                if (activePanel === 'locations') openLocationsMobilePanel();
                if (activePanel === 'countries') openCountriesMobilePanel();
            } catch(_){}
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMobileMenuPanels);
        } else {
            initMobileMenuPanels();
        }
        function hideSidebar() {
            // Hide FAB immediately before any animation begins
            try { setCloseFabMode(null); } catch(_) {}
            const sb = document.getElementById('sidebar');
            setMobileMenuPanel('root');
            try {
                if (sb && window.matchMedia('(max-width: 991.98px)').matches && sb.classList.contains('open')) {
                    // Keep z-index on top during closing animation
                    sb.classList.add('closing');
                    const off = function(ev){
                        try { if (!ev || ev.propertyName === 'transform') { sb.classList.remove('closing'); sb.removeEventListener('transitionend', off); } } catch(_){ sb.classList.remove('closing'); }
                    };
                    sb.addEventListener('transitionend', off);
                    // Safety fallback in case transitionend doesn't fire
                    setTimeout(function(){ try { sb.classList.remove('closing'); } catch(_){} }, 420);
            }
        } catch(_){}
        if (sb) sb.classList.remove('open');
        try { if (sb) sb.removeAttribute('data-active-panel'); } catch(_){}
        try { document.documentElement.classList.remove('sidebar-open'); document.body.classList.remove('sidebar-open'); } catch(e) {}
            try { document.documentElement.style.setProperty('--sidebar-scrollbar-comp', '0px'); } catch(_){}
            // Already hidden above; keep call idempotent in case of exceptions
            try { setCloseFabMode(null); } catch(_) {}
        }
        function showSidebar() {
            const sb = document.getElementById('sidebar');
            if (!sb) return;
            if (!window.matchMedia('(max-width: 991.98px)').matches) return; // only mobile
            try {
                setMobileMenuPanel('root');
                var root = document.documentElement;
                var bar = window.innerWidth - root.clientWidth;
                if (bar < 0) bar = 0;
                root.style.setProperty('--sidebar-scrollbar-comp', (bar || 0) + 'px');
            } catch(_){}
            sb.classList.add('open');
            try { document.documentElement.classList.add('sidebar-open'); document.body.classList.add('sidebar-open'); } catch(e) {}
            setCloseFabMode('sidebar');
        }

        function initializeSidebarLinks() {
            const sb = document.getElementById('sidebar');
            if (!sb) return;
            try { console.log('[genres][desktop] initializeSidebarLinks invoked'); } catch(_){}
            sb.querySelectorAll('a').forEach(a => {
                if (a.dataset.bsToggle === 'dropdown' || a.closest('.dropdown-menu')) return;
                a.addEventListener('click', (ev) => {
                    const action = a.dataset.action || '';
                    const isMobile = window.matchMedia('(max-width: 991.98px)').matches;
                    if (isMobile) {
                        if (action === 'genres-sheet') {
                            ev.preventDefault(); ev.stopPropagation();
                            try { window.__genresOpenedFromSidebar = true; } catch(_) {}
                            openGenresSheet();
                            return;
                        }
                        if (action === 'locations-panel') {
                            ev.preventDefault(); ev.stopPropagation();
                            try { window.__locationsOpenedFromSidebar = true; } catch(_) {}
                            showSidebar();
                            setMobileMenuPanel('locations');
                            openLocationsMobilePanel();
                            return;
                        }
                        if (action === 'countries-panel') {
                            ev.preventDefault(); ev.stopPropagation();
                            try { window.__countriesOpenedFromSidebar = true; } catch(_) {}
                            showSidebar();
                            setMobileMenuPanel('countries');
                            openCountriesMobilePanel();
                            return;
                        }
                    } else {
                        if (action === 'genres-sheet') {
                            console.log('[genres][desktop] sidebar link click detected', { href: a.getAttribute('href'), currentPath: window.location.pathname });
                            ev.preventDefault(); ev.stopPropagation();
                            hideLocationsDesktopPanels({ focusTrigger: false });
                            hideCountriesDesktopPanels({ focusTrigger: false });
                            openGenresDesktopPanels();
                            return;
                        }
                        if (action === 'locations-panel') {
                            console.log('[locations][desktop] sidebar link click detected', { href: a.getAttribute('href'), currentPath: window.location.pathname });
                            ev.preventDefault(); ev.stopPropagation();
                            hideGenresDesktopPanels({ focusTrigger: false });
                            hideCountriesDesktopPanels({ focusTrigger: false });
                            openLocationsDesktopPanels();
                            return;
                        }
                        if (action === 'countries-panel') {
                            console.log('[countries][desktop] sidebar link click detected', { href: a.getAttribute('href'), currentPath: window.location.pathname });
                            ev.preventDefault(); ev.stopPropagation();
                            hideGenresDesktopPanels({ focusTrigger: false });
                            hideLocationsDesktopPanels({ focusTrigger: false });
                            openCountriesDesktopPanels();
                            return;
                        }
                    }
                    if (isMobile) {
                        try { window.__rsRestoreSidebar = false; window.__rsIgnoreSidebarAutoClose = false; } catch(_) {}
                        hideSidebar();
                    }
                });
            });
            // Toggle RadioSpinner group
            try {
              const rs = sb.querySelector('.sidebar-rs-group');
              if (rs) {
                const toggle = rs.querySelector('.rs-toggle');
                const template = rs.querySelector('.rs-menu-template');
                const items = template ? Array.from(template.content.querySelectorAll('a')).map(link => ({
                    url: link.getAttribute('href'),
                    text: link.textContent.trim(),
                    icon: link.querySelector('i')?.className || 'bi bi-link-45deg'
                })) : [];
                let popover = null;
                const teardown = [];

                if (template) template.hidden = true;

                const closePopover = () => {
                  if (!popover) return;
                  try { popover.remove(); } catch(_) {}
                  teardown.splice(0).forEach(fn => { try { fn(); } catch(_) {} });
                  popover = null;
                  rs.classList.remove('open');
                };

                const positionPopover = () => {
                  if (!popover || !toggle) return;
                  const rect = toggle.getBoundingClientRect();
                  const margin = 12;
                  const isMobile = window.matchMedia('(max-width: 991.98px)').matches;
                  const availableWidth = window.innerWidth - margin * 2;
                  const targetWidth = Math.min(isMobile ? 360 : 320, availableWidth);
                  popover.style.width = targetWidth + 'px';
                  const actualWidth = popover.offsetWidth || targetWidth;
                  let left = rect.left + (rect.width - actualWidth) / 2;
                  left = Math.min(Math.max(left, margin), window.innerWidth - actualWidth - margin);
                  popover.style.left = left + 'px';
                  const maxHeight = Math.min(420, window.innerHeight - margin * 2);
                  popover.style.maxHeight = maxHeight + 'px';
                  popover.style.overflowY = 'auto';
                  let top = rect.bottom + 12;
                  if (top + maxHeight > window.innerHeight - margin) {
                    top = Math.max(margin, rect.top - maxHeight - 12);
                  }
                  popover.style.top = top + 'px';
                };

                const openPopover = () => {
                  if (!items.length) return;
                  popover = document.createElement('div');
                  popover.className = 'rs-rs-popover';
                  popover.tabIndex = -1;
                  items.forEach(link => {
                    const item = document.createElement('a');
                    item.className = 'rs-item';
                    item.href = link.url;
                    item.innerHTML = `<i class="${link.icon}"></i> ${link.text}`;
                    item.addEventListener('click', ev => {
                      ev.preventDefault();
                      closePopover();
                      if (typeof loadPage === 'function') loadPage(link.url);
                      else window.location.assign(link.url);
                    });
                    popover.appendChild(item);
                  });
                  document.body.appendChild(popover);
                  positionPopover();
                  requestAnimationFrame(positionPopover);
                  setTimeout(() => { try { popover.focus({ preventScroll: true }); } catch(_) {} }, 0);

                  const pointerHandler = ev => {
                    if (!popover) return;
                    if (popover.contains(ev.target) || toggle.contains(ev.target)) return;
                    closePopover();
                  };
                  const keyHandler = ev => { if (ev.key === 'Escape') closePopover(); };
                  const resizeHandler = () => positionPopover();
                  document.addEventListener('pointerdown', pointerHandler, true);
                  document.addEventListener('keydown', keyHandler);
                  window.addEventListener('resize', resizeHandler);
                  window.addEventListener('scroll', resizeHandler, { passive: true });
                  teardown.push(() => document.removeEventListener('pointerdown', pointerHandler, true));
                  teardown.push(() => document.removeEventListener('keydown', keyHandler));
                  teardown.push(() => window.removeEventListener('resize', resizeHandler));
                  teardown.push(() => window.removeEventListener('scroll', resizeHandler, { passive: true }));
                  rs.classList.add('open');
                };



                const openRSSheet = () => {
                  if (!items.length) return;
                  let sheet = document.getElementById('rs-sheet');
                  if (!sheet) {
                    sheet = document.createElement('div');
                    sheet.id = 'rs-sheet';
                    sheet.innerHTML = `
                      <div class="site-sheet">
                        <div class="site-sheet__header">
                          <div class="site-sheet__title">RadioSpinner</div>
                          <button type="button" class="site-sheet__close" aria-label="Close">×</button>
                        </div>
                        <div class="site-sheet__body"></div>
                      </div>
                    `;
                    document.body.appendChild(sheet);
                    sheet.querySelector('.site-sheet__close').addEventListener('click', () => closeSheet());
                    sheet.addEventListener('click', ev => { if (ev.target === sheet) closeSheet(); });
                  }
                  const body = sheet.querySelector('.site-sheet__body');
                  body.innerHTML = '';
                  items.forEach(link => {
                    const item = document.createElement('a');
                    item.className = 'site-sheet__item';
                    item.href = link.url;
                    item.innerHTML = `<i class="${link.icon}"></i> ${link.text}`;
                    item.addEventListener('click', ev => {
                      ev.preventDefault();
                      closeSheet();
                      hideSidebar();
                      if (typeof loadPage === 'function') loadPage(link.url);
                      else window.location.assign(link.url);
                    });
                    body.appendChild(item);
                  });
                  hideSidebar();
                  sheet.classList.add('open');
                  document.documentElement.classList.add('rssheet-open');
                  document.body.classList.add('rssheet-open');

                  function closeSheet(){
                    sheet.classList.remove('open');
                    document.documentElement.classList.remove('rssheet-open');
                    document.body.classList.remove('rssheet-open');
                  }
                };
                toggle && toggle.addEventListener('click', ev => {
                  ev.preventDefault();
                  ev.stopPropagation();
                  if (window.matchMedia('(max-width: 991.98px)').matches) {
                    closePopover();
                    openRSSheet();
                    return;
                  }
                  if (popover) closePopover(); else openPopover();
                });

                const handleSidebarClose = () => {
                  if (!sb.classList.contains('open')) closePopover();
                };
                sb.addEventListener('transitionend', handleSidebarClose);
                teardown.push(() => sb.removeEventListener('transitionend', handleSidebarClose));
              }
            } catch(e) {}


        }

        function initializeDesktopGenresLink() {
            const desktopSidebar = document.querySelector('.rs-desktop-sidebar');
            if (!desktopSidebar) return;
            const link = desktopSidebar.querySelector('a[data-action="genres-sheet"]');
            if (!link) return;
            if (link.dataset.genresBound === '1') return;
            link.dataset.genresBound = '1';
            try { console.log('[genres][desktop] binding desktop genres link'); } catch(_) {}
            link.addEventListener('click', (ev)=>{
                try { console.log('[genres][desktop] desktop genres link clicked'); } catch(_) {}
                ev.preventDefault(); ev.stopPropagation();
                hideLocationsDesktopPanels({ focusTrigger: false });
                hideCountriesDesktopPanels({ focusTrigger: false });
                openGenresDesktopPanels();
            });
        }

        function initializeDesktopLocationsLink() {
            const desktopSidebar = document.querySelector('.rs-desktop-sidebar');
            if (!desktopSidebar) return;
            const link = desktopSidebar.querySelector('a[data-action="locations-panel"]');
            if (!link) return;
            if (link.dataset.locationsBound === '1') return;
            link.dataset.locationsBound = '1';
            try { console.log('[locations][desktop] binding desktop locations link'); } catch(_) {}
            link.addEventListener('click', (ev)=>{
                try { console.log('[locations][desktop] desktop locations link clicked'); } catch(_) {}
                ev.preventDefault(); ev.stopPropagation();
                hideGenresDesktopPanels({ focusTrigger: false });
                hideCountriesDesktopPanels({ focusTrigger: false });
                openLocationsDesktopPanels();
            });
        }

        function initializeDesktopCountriesLink() {
            const desktopSidebar = document.querySelector('.rs-desktop-sidebar');
            if (!desktopSidebar) return;
            const link = desktopSidebar.querySelector('a[data-action="countries-panel"]');
            if (!link) return;
            if (link.dataset.countriesBound === '1') return;
            link.dataset.countriesBound = '1';
            try { console.log('[countries][desktop] binding desktop countries link'); } catch(_) {}
            link.addEventListener('click', (ev)=>{
                try { console.log('[countries][desktop] desktop countries link clicked'); } catch(_) {}
                ev.preventDefault(); ev.stopPropagation();
                hideGenresDesktopPanels({ focusTrigger: false });
                hideLocationsDesktopPanels({ focusTrigger: false });
                openCountriesDesktopPanels();
            });
        }

        // Глобальный счётчик запросов сайдбара — предотвращает "откат" старым ответом
        window.__rsSidebarReqId = window.__rsSidebarReqId || 0;

        function updateSidebar(lang) {
            const reqId = (++window.__rsSidebarReqId);
            const currentPath = window.location
                ? (window.location.pathname + window.location.search + window.location.hash)
                : '/';
            let url = '/sidebar/?_=' + reqId;
            try {
                if (currentPath) {
                    url += '&path=' + encodeURIComponent(currentPath);
                }
            } catch(_){ }

            fetch(url, { credentials: 'same-origin', cache: 'no-store' })
                .then(response => response.ok ? response.text() : Promise.reject(response.status))
                .then(html => {
                    // Если за это время был инициирован более новый запрос — игнорируем этот ответ
                    if (reqId !== window.__rsSidebarReqId) return;
                    const tmp = document.createElement('div');
                    tmp.innerHTML = html;
                    tmp.querySelectorAll('script').forEach(s => {
                        if (s.textContent.includes('userIsAuthenticated')) s.remove();
                    });
                    const sb = document.getElementById('sidebar');
                    // Сохраним введённый текст из поиска в сайдбаре (если был)
                    let prevSidebarQuery = '';
                    try { prevSidebarQuery = sb?.querySelector('input[name="query"]').value || ''; } catch(_) {}
                    if (sb) sb.innerHTML = tmp.innerHTML;
                    try {
                        if (prevSidebarQuery) {
                            const newSbInput = sb.querySelector('input[name="query"]');
                            if (newSbInput) newSbInput.value = prevSidebarQuery;
                        }
                    } catch(_) {}
                    try { document.dispatchEvent(new Event('sidebarUpdated')); } catch(_) {}

                    // If requested, reopen sidebar after a successful language update
                    try {
                        if (window.__rsShowSidebarOnUpdate === true) {
                            window.__rsShowSidebarOnUpdate = false;
                            // Ensure we open only on mobile
                            if (window.matchMedia('(max-width: 991.98px)').matches) {
                                showSidebar();
                            }
                        }
                    } catch(_){}

                    if (typeof initializeLogoutBtn === 'function') initializeLogoutBtn();
                    if (typeof initializeSearchForms === 'function') initializeSearchForms();
                    if (typeof initializeLanguageSwitch === 'function') initializeLanguageSwitch();
                    if (typeof initializeSidebarLinks === 'function') initializeSidebarLinks();
                    if (typeof initializeDesktopGenresLink === 'function') initializeDesktopGenresLink();
                    if (typeof initializeDesktopLocationsLink === 'function') initializeDesktopLocationsLink();
                    if (typeof initializeDesktopCountriesLink === 'function') initializeDesktopCountriesLink();
                    if (typeof initializeSidebarMeta === 'function') initializeSidebarMeta();
                });
        }

        // ================================
        // Language switch links
        // ================================
        function setLanguageCookie(lang) {
            document.cookie = 'django_language=' + lang + '; path=/; max-age=31536000; SameSite=Lax';
            document.cookie = 'rs_lang_v=2; path=/; max-age=31536000; SameSite=Lax';
        }

        function normalizeLanguageCode(value) {
            try {
                return (value || '').split('-')[0].toLowerCase();
            } catch (_) {
                return '';
            }
        }

        function detectBrowserLanguage() {
            try {
                var langs = [];
                if (Array.isArray(navigator.languages) && navigator.languages.length) {
                    langs = navigator.languages;
                } else if (navigator.language) {
                    langs = [navigator.language];
                } else if (navigator.userLanguage) {
                    langs = [navigator.userLanguage];
                }
                if (!langs.length) {
                    return '';
                }
                return normalizeLanguageCode(langs[0]);
            } catch (_) {
                return '';
            }
        }

        function postSetLanguage(lang, reloadAfter) {
            var normalized = normalizeLanguageCode(lang) || 'en';
            var headers = {
                'Content-Type': 'application/json',
                'X-Requested-With': 'XMLHttpRequest',
            };
            try {
                var csrf = getCookie('csrftoken');
                if (csrf) {
                    headers['X-CSRFToken'] = csrf;
                }
            } catch (_) {}
            var payload = JSON.stringify({
                language: normalized,
                next: window.location.pathname + window.location.search + window.location.hash,
            });
            return fetch('/set_language/', {
                method: 'POST',
                credentials: 'same-origin',
                headers: headers,
                body: payload,
            })
                .then(function(res) { return res.ok ? res.json() : null; })
                .then(function(data) {
                    if (reloadAfter) {
                        var target = (data && data.redirect) ? data.redirect : (window.location.pathname + window.location.search + window.location.hash);
                        window.location.replace(target);
                    }
                    return data;
                })
                .catch(function() { return null; });
        }

        function handleLanguageSelection(lang, targetHref, fallbackReload) {
            var normalized = normalizeLanguageCode(lang) || 'en';
            try { localStorage.setItem('selectedLanguageGlobal', normalized); } catch (_) {}
            try { sessionStorage.setItem('autoLangApplied', '1'); } catch (_) {}
            try { setLanguageCookie(normalized); } catch (_) {}
            try { document.documentElement.setAttribute('lang', normalized); } catch (_) {}
            postSetLanguage(normalized, false);
            if (targetHref) {
                try {
                    navigateInternal(targetHref);
                } catch (_) {
                    if (fallbackReload !== false) {
                        updateLanguageUI(normalized);
                    }
                }
            } else if (fallbackReload !== false) {
                updateLanguageUI(normalized);
            }
        }

        function autoApplyBrowserLanguage() {
            try { if (sessionStorage.getItem('autoLangApplied') === '1') return; } catch (_) {}
            var manualPreference = null;
            try { manualPreference = localStorage.getItem('selectedLanguageGlobal'); } catch (_) {}
            if (manualPreference) {
                try { sessionStorage.setItem('autoLangApplied', '1'); } catch (_) {}
                return;
            }
            var cookieLang = normalizeLanguageCode(getCookie('django_language'));
            if (cookieLang) {
                try { sessionStorage.setItem('autoLangApplied', '1'); } catch (_) {}
                return;
            }
            var browserLang = detectBrowserLanguage();
            if (!browserLang || browserLang === 'en') {
                try { sessionStorage.setItem('autoLangApplied', '1'); } catch (_) {}
                return;
            }
            try { sessionStorage.setItem('autoLangApplied', '1'); } catch (_) {}
            postSetLanguage(browserLang, true);
        }

        function updateLanguageUI(lang) {
            var normalizedLang = normalizeLanguageCode(lang) || 'en';
            setLanguageCookie(normalizedLang);
            try { window.__rsLangOverride = normalizedLang; } catch (_) {}
            try { document.documentElement.setAttribute('lang', normalizedLang); } catch (_) {}
            try {
                var urlObj = new URL(window.location.href);
                urlObj.searchParams.delete('language');
                var query = urlObj.searchParams.toString();
                window.location.href = urlObj.pathname + (query ? '?' + query : '') + urlObj.hash;
            } catch (_) {
                window.location.reload();
            }
        }

        function initializeLanguageSwitch() {
            try { autoApplyBrowserLanguage(); } catch (_) {}
            document.querySelectorAll('.language-link').forEach(function(link) {
                var clone = link.cloneNode(true);
                link.parentNode.replaceChild(clone, link);
            });
            document.querySelectorAll('.language-link').forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    var selectedLanguage = (link.dataset && link.dataset.lang) ? link.dataset.lang : null;
                    handleLanguageSelection(selectedLanguage, link.getAttribute('href'));
                    try {
                      var dd = link.closest('.dropdown-menu');
                      if (dd && dd.previousElementSibling) {
                        bootstrap.Dropdown.getOrCreateInstance(dd.previousElementSibling).hide();
                      }
                    } catch(_){}
                });
            });

            // Global delegated handler — covers dynamically injected language links
            if (!window.__rsLangDelegated) {
              window.__rsLangDelegated = true;
              document.addEventListener('click', function(e){
                if (e.defaultPrevented) return;
                if (e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;
                var a = e.target && e.target.closest && e.target.closest('a.language-link');
                if (!a) return;
                e.preventDefault();
                var selectedLanguage = (a.dataset && a.dataset.lang) ? a.dataset.lang : null;
                handleLanguageSelection(selectedLanguage, a.getAttribute('href'));
                try {
                  var dm = a.closest('.dropdown-menu');
                  if (dm && dm.previousElementSibling) bootstrap.Dropdown.getOrCreateInstance(dm.previousElementSibling).hide();
                } catch(_){}
              }, true);
            }


            // Mobile: open languages as fullscreen sheet
            (function(){
              const trigger = document.getElementById('languageDropdown');
              if (!trigger) return;
              trigger.addEventListener('click', function(e){
                if (!window.matchMedia('(max-width: 991.98px)').matches) return;
                e.preventDefault();
                try { e.stopImmediatePropagation(); } catch(_) {}
                e.stopPropagation();
                try { var dd = bootstrap.Dropdown.getOrCreateInstance(trigger); dd && dd.hide(); } catch(_) {}
                // Запомним, был ли сайдбар открыт
                try { window.__rsRestoreSidebar = !!document.getElementById('sidebar')?.classList.contains('open'); } catch(_) { window.__rsRestoreSidebar = true; }
                hideSidebar();
                openLanguageSheet(); try { setCloseFabMode('lang'); } catch(_){}
              });
              function openLanguageSheet(){
                let sheet = document.getElementById('language-sheet');
                if (!sheet) {
                  sheet = document.createElement('div'); sheet.id='language-sheet';
                  sheet.innerHTML = `
                    <div class="site-sheet">
                      <div class="site-sheet__header">
                        <div class="site-sheet__title">${(window.i18n?.languages || 'Languages')}</div>
                        <button type="button" class="site-sheet__close" aria-label="Close">×</button>
                      </div>
                      <div class="site-sheet__body"></div>
                    </div>
                  `;
                  document.body.appendChild(sheet);
                  sheet.querySelector('.site-sheet__close').addEventListener('click', closeSheet);
                  sheet.addEventListener('click', function(ev){ if (ev.target===sheet) closeSheet(); });
                }
                const body = sheet.querySelector('.site-sheet__body'); body.innerHTML='';
                document.querySelectorAll('.language-dropdown .dropdown-menu .language-link').forEach(a=>{
                  const url = a.getAttribute('href'); const text = a.textContent.trim(); const active = a.classList.contains('active');
                  const langCode = (a.dataset && a.dataset.lang) ? a.dataset.lang : 'en';
                  const item = document.createElement('a'); item.href=url; item.dataset.lang = langCode; item.className='site-sheet__lang'+(active?' site-sheet__lang--active':''); item.textContent=text;
                  item.addEventListener('click', function(ev){ ev.preventDefault();
                    try { setCloseFabMode(null); } catch(_){}
                    try { if (window.__rsRestoreSidebar) { window.__rsShowSidebarOnUpdate = true; } } catch(_){}
                    const langCode = (item.dataset && item.dataset.lang) ? item.dataset.lang : 'en';
                    updateLanguageUI(langCode);
                    closeSheet();
                    // Вернуться к открытому меню после выбора языка, только если он был открыт
                    // (Перенесено: открытие будет выполнено после обновления сайдбара)
                  });
                  body.appendChild(item);
                });
                sheet.classList.add('open');
                document.documentElement.classList.add('langsheet-open'); document.body.classList.add('langsheet-open');
                try { setCloseFabMode('lang'); } catch(_){}
              }
              function closeSheet(){
                const sheet = document.getElementById('language-sheet'); if (!sheet) return;
                try { setCloseFabMode(null); } catch(_){}
                sheet.classList.remove('open');
                document.documentElement.classList.remove('langsheet-open'); document.body.classList.remove('langsheet-open');
                // Если пользователь просто закрыл лист — возвращаем сайдбар, только если он был открыт раньше
                if (window.__rsRestoreSidebar) {
                    // Не открываем сразу — дождёмся updateSidebar и откроем там
                    try { window.__rsShowSidebarOnUpdate = true; } catch(_){}
                }
                else { try { setCloseFabMode(null); } catch(_){} }
                }
            })();
        }

        // ================================
        // Genres Fullscreen Sheet (mobile)
        // ================================
        function getCurrentLang(){
          // Порядок: language в URL -> <html lang> фактической страницы -> cookie -> 'en'
          try {
            var overrideLang = normalizeLanguageCode(window.__rsLangOverride);
            if (overrideLang) return overrideLang;
          } catch(_){}
          try {
            var sp = new URLSearchParams(window.location.search);
            var viaParam = sp.get('language');
            if (viaParam) return viaParam.split('-')[0].toLowerCase();
          } catch(_){}
          try {
            var htmlLang = document.documentElement.getAttribute('lang');
            if (htmlLang) return htmlLang.split('-')[0].toLowerCase();
          } catch(_){}
          try {
            var m = document.cookie.match(/(?:^|; )django_language=([^;]+)/);
            if (m) return decodeURIComponent(m[1]).split('-')[0].toLowerCase();
          } catch(_){}
          return 'en';
        }

        function navigateInternal(url) {
          if (!url) return;
          if (typeof loadPage === 'function') {
            loadPage(url);
          } else {
            window.location.href = url;
          }
        }
        try {
          console.log('[genres] base script evaluated');
        } catch (_){}

        function openGenresSheet(){
          if (!window.matchMedia('(max-width: 991.98px)').matches) return;
          let sheet = document.getElementById('genres-sheet');
          if (!sheet) {
            sheet = document.createElement('div');
            sheet.id = 'genres-sheet';
            sheet.innerHTML = `
              <div class="site-sheet">
                <div class="site-sheet__header">
                  <button type="button" class="site-sheet__back" aria-label="${window.i18n?.back || 'Back'}" hidden>‹</button>
                  <div class="site-sheet__title">Genres</div>
                  <button type="button" class="site-sheet__close" aria-label="${window.i18n?.close || 'Close'}" hidden>×</button>
                </div>
                <div class="site-sheet__body"></div>
              </div>
            `;
            document.body.appendChild(sheet);
            // Controls (top close is hidden on mobile; keep handler for safety)
            sheet.querySelector('.site-sheet__close').addEventListener('click', () => { sheet.classList.remove('open'); try { if (window.__genresOpenedFromSidebar) { showSidebar(); window.__genresOpenedFromSidebar=false; setCloseFabMode('sidebar'); } else { setCloseFabMode(null); } } catch(_){} });
            sheet.querySelector('.site-sheet__back').addEventListener('click', () => {
              if (window.__genresSheetState?.view === 'children') {
                renderGenresSheetParents();
              } else {
                sheet.classList.remove('open');
                try { if (window.__genresOpenedFromSidebar) { showSidebar(); window.__genresOpenedFromSidebar=false; setCloseFabMode('sidebar'); } else { setCloseFabMode(null); } } catch(_){}
              }
            });
          }
          hideSidebar();
          sheet.classList.add('open');
          // FAB handles closing the sheet (and returns to sidebar when needed)
          setCloseFabMode('genres');
          // Load data once per language
          try { if (window.__genresLang !== getCurrentLang()) { window.__genresData = null; } } catch(_){}
          if (!window.__genresData) {
            const lang = getCurrentLang();
            // cache-bust to avoid stale caches
            fetch(`/api/site/genres-simple/?_=${Date.now()}`)
              .then(r=>r.json()).then(json => { window.__genresLang = lang; window.__genresData=json || []; renderGenresSheetParents(); })
              .catch(()=>{ window.__genresLang = lang; window.__genresData=[]; renderGenresSheetParents(); });
          } else {
            renderGenresSheetParents();
          }
        }

        function renderGenresSheetParents(){
          const sheet = document.getElementById('genres-sheet'); if(!sheet) return;
          const body = sheet.querySelector('.site-sheet__body'); const back = sheet.querySelector('.site-sheet__back');
          if (back) back.hidden = true;
          const data = Array.isArray(window.__genresData) ? window.__genresData : [];
          const parents = data.filter(g => !g.parent).sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'}));
          const lang = getCurrentLang();
          body.innerHTML = parents.map(g => `
            <a href="/genres/${g.slug}/" class="site-sheet__item" data-id="${g.id}" data-slug="${g.slug}">
              <i class="bi bi-music-note-beamed"></i>
              <span>${g.name}</span>
              <i class="bi bi-chevron-right ms-auto"></i>
            </a>
          `).join('');
          body.querySelectorAll('.site-sheet__item').forEach(a => {
            a.addEventListener('click', (e)=>{
              e.preventDefault(); e.stopPropagation();
              const id = Number(a.dataset.id);
              const genre = (window.__genresData||[]).find(x=>x.id===id);
              if (!genre) return;
              renderGenresSheetChildren(genre);
            });
          });
          window.__genresSheetState = { view:'parents' };
        }

        function renderGenresSheetChildren(parent){
          const sheet = document.getElementById('genres-sheet'); if(!sheet) return;
          const body = sheet.querySelector('.site-sheet__body'); const back = sheet.querySelector('.site-sheet__back');
          if (back) back.hidden = false;
          const children = Array.isArray(parent.subgenres) ? [...parent.subgenres].sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'})) : [];
          if (!children.length) {
            // no children — go to parent page
            const target = `/genres/${parent.slug}/`;
            try { sheet.classList.remove('open'); } catch(_) {}
            try { window.__genresOpenedFromSidebar = false; } catch(_){}
            try { setCloseFabMode(null); } catch(_){}
            navigateInternal(target);
            return;
          }
          body.innerHTML = `
            <div class="mb-2" style="font-weight:900;">${parent.name}: ${window.i18n?.subgenres || 'Subgenres'}</div>
            <a href="/genres/${parent.slug}/" class="site-sheet__item site-sheet__item--parent" data-parent-slug="${parent.slug}">
              <i class="bi bi-folder"></i>
              <span>${parent.name}</span>
              <i class="bi bi-chevron-right ms-auto"></i>
            </a>
            ${children.map(c => `
              <a href="/genres/${c.slug||''}/" class="site-sheet__item site-sheet__item--child" data-slug="${c.slug||''}">
                <i class="bi bi-tag"></i>
                <span>${c.name}</span>
                <i class="bi bi-chevron-right ms-auto"></i>
              </a>
            `).join('')}
          `;
          // Click on parent link closes sheet and navigates
          body.querySelectorAll('a.site-sheet__item--parent').forEach(a => {
            a.addEventListener('click', (e)=>{
              e.preventDefault(); e.stopPropagation();
              try { sheet.classList.remove('open'); } catch(_) {}
              try { window.__genresOpenedFromSidebar = false; } catch(_){}
              try { setCloseFabMode(null); } catch(_){}
              const slug = a.dataset.parentSlug || parent.slug;
              if (slug) {
                const href = a.getAttribute('href') || `/genres/${slug}/`;
                navigateInternal(href);
              }
            });
          });
          body.querySelectorAll('a.site-sheet__item--child').forEach(a => {
            a.addEventListener('click', (e)=>{
              e.preventDefault(); e.stopPropagation();
              try { sheet.classList.remove('open'); } catch(_) {}
              try { window.__genresOpenedFromSidebar = false; } catch(_){}
              try { setCloseFabMode(null); } catch(_){}
              const slug = a.dataset.slug;
              if (slug) {
                const href = a.getAttribute('href') || `/genres/${slug}/`;
                navigateInternal(href);
              }
            });
          });
          window.__genresSheetState = { view:'children', parentId: parent.id };
        }

        function getMobileGenresPanel(){
          try {
            const sb = document.getElementById('sidebar');
            if (!sb) return null;
            return sb.querySelector('[data-menu-panel="genres"]');
          } catch(_) { return null; }
        }

        function openGenresMobilePanel(){
          const panel = getMobileGenresPanel(); if (!panel) return;
          panel.dataset.mobileGenresState = 'root';
          const backBtn = panel.querySelector('[data-mobile-genres-back]');
          const rootList = panel.querySelector('[data-mobile-genres-root]');
          const childrenList = panel.querySelector('[data-mobile-genres-children]');
          if (rootList) {
            const seed = document.getElementById('i18n-seed');
            rootList.innerHTML = `
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">${window.i18n?.loadingGenres || seed?.dataset.loadingGenres || 'Loading genres...'}</span>
              </div>
            `;
            rootList.hidden = false;
          }
          if (childrenList) childrenList.hidden = true;
          if (backBtn && !backBtn.dataset.mobileGenresBound) {
            backBtn.dataset.mobileGenresBound = '1';
            backBtn.addEventListener('click', function(ev){
              if (panel.dataset.mobileGenresState === 'children') {
                ev.preventDefault();
                ev.stopPropagation();
                renderGenresMobileParents();
              }
            });
          }
          ensureGenresData(function(){
            renderGenresMobileParents();
          });
        }

        function renderGenresMobileParents(){
          const panel = getMobileGenresPanel(); if (!panel) return;
          panel.dataset.mobileGenresState = 'root';
          const seed = document.getElementById('i18n-seed');
          const title = panel.querySelector('[data-mobile-genres-title]');
          const backBtn = panel.querySelector('[data-mobile-genres-back]');
          const rootList = panel.querySelector('[data-mobile-genres-root]');
          const childrenList = panel.querySelector('[data-mobile-genres-children]');
          if (backBtn) backBtn.hidden = false;
          if (title) title.textContent = window.i18n?.genres || seed?.dataset.genres || 'Genres';
          if (childrenList) childrenList.hidden = true;
          if (rootList) {
            rootList.hidden = false;
            const data = Array.isArray(window.__genresData) ? window.__genresData : [];
            const parents = data.filter(g => !g.parent).sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'}));
            if (!parents.length) {
              const noGenresText = window.i18n?.noGenres || seed?.dataset.noGenres || 'No genres available';
              rootList.innerHTML = `
                <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                  <span class="rs-mobile-menu__item-label">${noGenresText}</span>
                </div>
              `;
            } else {
              rootList.innerHTML = parents.map(g => `
                <button type="button"
                        class="rs-mobile-menu__item"
                        data-mobile-genre-id="${g.id}">
                  <span class="rs-mobile-menu__item-icon"><i class="bi bi-music-note-beamed"></i></span>
                  <span class="rs-mobile-menu__item-label">${g.name}</span>
                  <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
                </button>
              `).join('');
              rootList.querySelectorAll('[data-mobile-genre-id]').forEach(btn => {
                btn.addEventListener('click', function(){
                  const id = Number(btn.dataset.mobileGenreId);
                  const genre = (window.__genresData || []).find(item => item.id === id);
                  if (!genre) return;
                  const hasChildren = Array.isArray(genre.subgenres) && genre.subgenres.length;
                  if (!hasChildren) {
                    const href = `/genres/${genre.slug}/`;
                    hideSidebar();
                    try { setCloseFabMode(null); } catch(_){}
                    navigateInternal(href);
                    return;
                  }
                  renderGenresMobileChildren(genre);
                }, { once: true });
              });
            }
          }
        }

        function renderGenresMobileChildren(parent){
          const panel = getMobileGenresPanel(); if (!panel) return;
          panel.dataset.mobileGenresState = 'children';
          const title = panel.querySelector('[data-mobile-genres-title]');
          const backBtn = panel.querySelector('[data-mobile-genres-back]');
          const rootList = panel.querySelector('[data-mobile-genres-root]');
          const childrenList = panel.querySelector('[data-mobile-genres-children]');
          if (rootList) rootList.hidden = true;
          if (childrenList) childrenList.hidden = false;
          if (title) title.textContent = parent.name || (window.i18n?.genres || 'Genres');
          if (backBtn) backBtn.hidden = false;
          if (childrenList) {
            const lang = getCurrentLang();
            const children = Array.isArray(parent.subgenres) ? [...parent.subgenres].sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'})) : [];
            const parentHref = `/genres/${parent.slug}/`;
            childrenList.innerHTML = `
              <a href="${parentHref}"
                 class="rs-mobile-menu__item rs-mobile-menu__item--nested"
                 data-mobile-genre-link="${parent.slug}">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-folder"></i></span>
                <span class="rs-mobile-menu__item-label">${parent.name}</span>
                <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </a>
              ${children.map(child => {
                const slug = child.slug || '';
                const href = `/genres/${slug}/`;
                return `
                  <a href="${href}"
                     class="rs-mobile-menu__item"
                     data-mobile-genre-link="${slug}">
                    <span class="rs-mobile-menu__item-icon"><i class="bi bi-tag"></i></span>
                    <span class="rs-mobile-menu__item-label">${child.name}</span>
                    <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
                  </a>
                `;
              }).join('')}
            `;
            childrenList.querySelectorAll('[data-mobile-genre-link]').forEach(link => {
              link.addEventListener('click', function(ev){
                ev.preventDefault();
                ev.stopPropagation();
                const href = link.getAttribute('href');
                if (!href) return;
                hideSidebar();
                try { setCloseFabMode(null); } catch(_){}
                navigateInternal(href);
              }, { once: true });
            });
          }
        }

        // ================================
        // Genres Desktop Panels (beside sidebar)
        // ================================
        const genresDesktopMQ = window.matchMedia('(min-width: 992px)');
        let genresDesktopDocHandler = null;
        let genresDesktopKeyHandler = null;

        function ensureGenresData(cb){
          const lang = getCurrentLang();
          try { console.log('[genres][desktop] ensureGenresData start', { lang }); } catch(_){}
          try { if (window.__genresLang !== lang) { window.__genresData = null; } } catch(_){}
          if (window.__genresData) { try { console.log('[genres][desktop] using cached data', { cachedLang: window.__genresLang, count: Array.isArray(window.__genresData)? window.__genresData.length : null }); } catch(_) {} cb && cb(); return; }
          fetch('/api/site/genres-simple/?_=' + Date.now())
            .then(r=>r.json())
            .then(json=>{ window.__genresLang = lang; window.__genresData=json||[]; try { console.log('[genres][desktop] genres data loaded', { count: window.__genresData.length }); } catch(_) {} cb&&cb(); })
            .catch(()=>{ window.__genresLang = lang; window.__genresData=[]; try { console.log('[genres][desktop] genres data load failed, using empty list'); } catch(_) {} cb&&cb(); });
        }

        function getDesktopSidebarHost(){
          return document.querySelector('.rs-desktop-sidebar') || document.body;
        }

        function getSidebarCountryCode(){
          try {
            var desk = document.querySelector('.rs-desktop-sidebar');
            if (desk && desk.dataset.countryCode) return (desk.dataset.countryCode || '').toUpperCase();
            var deskNav = desk ? desk.querySelector('.sidebar-wrapper') : null;
            if (deskNav && deskNav.dataset.countryCode) return (deskNav.dataset.countryCode || '').toUpperCase();
          } catch (_) {}
          try {
            var mobileSidebar = document.getElementById('sidebar');
            var mobileNav = mobileSidebar ? mobileSidebar.querySelector('.sidebar-wrapper') : null;
            if (mobileNav && mobileNav.dataset.countryCode) return (mobileNav.dataset.countryCode || '').toUpperCase();
          } catch (_) {}
          return '';
        }

        function setDesktopGenresExpanded(expanded){
          const trigger = document.querySelector('.rs-desktop-sidebar [data-action="genres-sheet"]');
          if (trigger) trigger.setAttribute('aria-expanded', expanded ? 'true' : 'false');
        }

        function toggleGenresPanel(panel, open){
          if (!panel) return;
          panel.classList.toggle('is-open', !!open);
          panel.setAttribute('aria-hidden', open ? 'false' : 'true');
          if (open) {
            const list = panel.querySelector('.panel-list');
            if (list) list.scrollTop = 0;
          }
        }

        function hideGenresDesktopPanels(opts){
          const level1 = document.getElementById('genres-desk-level1');
          const level2 = document.getElementById('genres-desk-level2');
          toggleGenresPanel(level1, false);
          toggleGenresPanel(level2, false);
          if (level1) {
            level1.querySelectorAll('.panel-item.active').forEach(node => node.classList.remove('active'));
          }
          if (genresDesktopDocHandler) {
            document.removeEventListener('click', genresDesktopDocHandler, true);
            genresDesktopDocHandler = null;
          }
          if (genresDesktopKeyHandler) {
            document.removeEventListener('keydown', genresDesktopKeyHandler, true);
            genresDesktopKeyHandler = null;
          }
          setDesktopGenresExpanded(false);
          try { window.__genresDesktopState = { view: 'closed' }; } catch(_){}
          try { console.log('[genres][desktop] panels hidden', { restoreFocus: !!(opts && opts.focusTrigger) }); } catch(_){}
          if (opts && opts.focusTrigger) {
            const trigger = document.querySelector('.rs-desktop-sidebar [data-action="genres-sheet"]');
            if (trigger) {
              try { trigger.focus(); } catch(_){}
            }
          }
        }

        function createOrGetPanel(id, level){
          let panel = document.getElementById(id);
          if (!panel) {
            panel = document.createElement('div');
            panel.id = id;
            panel.className = `sidebar-genres-panel ${level}`;
            panel.setAttribute('role', 'dialog');
            panel.setAttribute('aria-hidden', 'true');
            panel.innerHTML = `
              <div class="panel-header">
                <button type="button" class="panel-back" aria-label="${window.i18n?.back || 'Back'}" hidden>‹</button>
                <div class="panel-title"></div>
                <button type="button" class="panel-close" aria-label="${window.i18n?.close || 'Close'}">×</button>
              </div>
              <div class="panel-list"></div>
            `;
            getDesktopSidebarHost().appendChild(panel);
            const closeBtn = panel.querySelector('.panel-close');
            if (closeBtn) {
              closeBtn.addEventListener('click', () => { hideGenresDesktopPanels({ focusTrigger: true }); });
            }
          } else {
            const host = getDesktopSidebarHost();
            if (panel.parentElement !== host) host.appendChild(panel);
          }
          panel.classList.remove('is-open');
          panel.setAttribute('aria-hidden', 'true');
          return panel;
        }

        function setPanelLoading(panel, label){
          if (!panel) return;
          const list = panel.querySelector('.panel-list');
          if (!list) return;
          const text = label || 'Loading...';
          list.innerHTML = `
            <div class="d-flex align-items-center justify-content-center gap-2 py-4">
              <div class="spinner-border spinner-border-sm text-primary" role="status" aria-hidden="true"></div>
              <span>${text}</span>
            </div>
          `;
        }

        function openGenresDesktopPanels(){
          if (!genresDesktopMQ.matches) {
            console.log('[genres][desktop] breakpoint <992px, fallback to mobile sheet');
            openGenresSheet();
            return;
          }
          console.log('[genres][desktop] openGenresDesktopPanels() triggered');
          const panel1 = createOrGetPanel('genres-desk-level1', 'level-1');
          const panel2 = createOrGetPanel('genres-desk-level2', 'level-2');
          setPanelLoading(panel1, window.i18n?.loadingGenres || document.getElementById('i18n-seed')?.dataset.loadingGenres || 'Loading genres...');
          toggleGenresPanel(panel1, true);
          toggleGenresPanel(panel2, false);
          ensureGenresData(()=>{
            const state = (window.__genresDesktopState && typeof window.__genresDesktopState === 'object')
              ? window.__genresDesktopState
              : { view:'parents', parentId: null };
            try { window.__genresDesktopState = state; } catch(_){}
            renderGenresDesktopParents(panel1, panel2);
            if (state.view === 'children' && typeof state.parentId === 'number') {
              const parent = (window.__genresData || []).find(g => g.id === state.parentId);
              if (parent) {
                console.log('[genres][desktop] restoring children view', { parentId: parent.id, name: parent.name });
                renderGenresDesktopChildren(panel1, panel2, parent);
              } else {
                console.log('[genres][desktop] stored parent not found, fallback to parents');
                toggleGenresPanel(panel2, false);
                try { window.__genresDesktopState = { view:'parents', parentId: null }; } catch(_){}
              }
            } else {
              console.log('[genres][desktop] showing parents view (initial open)');
              toggleGenresPanel(panel2, false);
            }
            toggleGenresPanel(panel1, true);
            setDesktopGenresExpanded(true);
            if (genresDesktopDocHandler) {
              document.removeEventListener('click', genresDesktopDocHandler, true);
            }
            genresDesktopDocHandler = (event)=>{
              const p1 = document.getElementById('genres-desk-level1');
              const p2 = document.getElementById('genres-desk-level2');
              const sidebar = document.querySelector('.rs-desktop-sidebar');
              if ((p1 && p1.contains(event.target)) || (p2 && p2.contains(event.target)) || (sidebar && sidebar.contains(event.target))) {
                return;
              }
              console.log('[genres][desktop] click outside panels, closing');
              hideGenresDesktopPanels({ focusTrigger: false });
            };
            setTimeout(()=>document.addEventListener('click', genresDesktopDocHandler, true), 0);
            if (genresDesktopKeyHandler) {
              document.removeEventListener('keydown', genresDesktopKeyHandler, true);
            }
            genresDesktopKeyHandler = (event)=>{
              if (event.key === 'Escape' || event.key === 'Esc') {
                console.log('[genres][desktop] ESC pressed, closing panels');
                hideGenresDesktopPanels({ focusTrigger: true });
              }
            };
            document.addEventListener('keydown', genresDesktopKeyHandler, true);
            console.log('[genres][desktop] panels opened');
          });
        }

        function renderGenresDesktopParents(panel1, panel2){
          if (!panel1) return;
          const title = panel1.querySelector('.panel-title');
          if (title) title.textContent = (window.i18n?.genres || 'Genres');
          const back = panel1.querySelector('.panel-back');
          if (back) back.hidden = true;
          const list = panel1.querySelector('.panel-list');
          const data = Array.isArray(window.__genresData) ? window.__genresData : [];
          const parents = data.filter(g=>!g.parent).sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'}));
          const state = window.__genresDesktopState || {};
          if (!parents.length) {
            console.log('[genres][desktop] no parent genres available');
            list.innerHTML = `<div class="panel-empty">${window.i18n?.noGenres || 'No genres available'}</div>`;
            toggleGenresPanel(panel2, false);
            return;
          }
          console.log('[genres][desktop] rendering parents', { count: parents.length });
          let html = `
            <a href="/genres/" class="panel-item panel-item--all" data-all="1">
              <span class="panel-item__body">
                <span class="panel-item__title">
                  <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-collection"></i></span>
                  <span class="panel-item__name">${(window.i18n?.allGenres)||'All genres and subgenres'}</span>
                </span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </span>
            </a>`;
          parents.forEach(g=>{
              html += `
              <div class="panel-item panel-item--parent" data-id="${g.id}" data-slug="${g.slug}">
                <div class="panel-item__body" data-href="/genres/${g.slug}/" role="link" tabindex="0">
                  <div class="panel-item__title"><span class="panel-item__name">${g.name}</span></div>
                </div>
                ${Array.isArray(g.subgenres) && g.subgenres.length ? `
                  <div class="panel-item__actions panel-item__actions--external">
                    <button type="button"
                            class="panel-item__link panel-item__link--children"
                            data-id="${g.id}"
                            data-slug="${g.slug}"
                            aria-label="${window.i18n?.viewChildren || 'Subgenres'}"
                            title="${window.i18n?.viewChildren || 'Subgenres'}">
                      <i class="bi bi-chevron-right" aria-hidden="true"></i>
                    </button>
                  </div>
                ` : ''}
              </div>`;
          });
          list.innerHTML = html;
          const allLink = list.querySelector('a.panel-item[data-all="1"]');
          if (allLink) {
            allLink.addEventListener('click', (ev)=>{
              ev.preventDefault();
              hideGenresDesktopPanels({ focusTrigger: false });
              navigateInternal(allLink.getAttribute('href'));
            });
          }
          list.querySelectorAll('.panel-item__link--children').forEach(btn=>{
            btn.addEventListener('click', (ev)=>{
              ev.preventDefault();
              ev.stopPropagation();
              const id = Number(btn.dataset.id);
              console.log('[genres][desktop] parent clicked', { id });
              const parent = (window.__genresData || []).find(x=>x.id===id);
              if (!parent) return;
              try { window.__genresDesktopState = { view:'children', parentId: id }; } catch(_){}
              renderGenresDesktopChildren(panel1, panel2, parent);
            });
          });
          list.querySelectorAll('.panel-item--parent .panel-item__body').forEach(body=>{
            const href = body.dataset.href || `/genres/${body.closest('.panel-item--parent')?.dataset.slug || ''}/`;
            body.addEventListener('click', (ev)=>{
              if (ev.target.closest('.panel-item__link--children')) return;
              ev.preventDefault();
              hideGenresDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
            body.addEventListener('keydown', (ev)=>{
              if (ev.key === 'Enter' || ev.key === ' ') {
                ev.preventDefault();
                hideGenresDesktopPanels({ focusTrigger: false });
                if (href) navigateInternal(href);
              }
            });
          });
          if (typeof state.parentId === 'number') {
            list.querySelectorAll('.panel-item').forEach(node=>{
              const id = Number(node.dataset.id);
              node.classList.toggle('active', id === Number(state.parentId));
            });
          } else {
            list.querySelectorAll('.panel-item').forEach(node=>node.classList.remove('active'));
          }
          if (!state || state.view !== 'children') {
            toggleGenresPanel(panel2, false);
          }
        }

        function renderGenresDesktopChildren(panel1, panel2, parent){
          if (!panel1 || !panel2 || !parent) return;
          const title = panel2.querySelector('.panel-title');
          if (title) title.textContent = `${parent.name}: ${window.i18n?.subgenres || 'Subgenres'}`;
          const back = panel2.querySelector('.panel-back');
          if (back) {
            back.hidden = false;
            back.onclick = (ev)=>{
              ev.preventDefault();
              toggleGenresPanel(panel2, false);
              try { window.__genresDesktopState = { view:'parents', parentId: parent.id }; } catch(_){}
            };
          }
          const list = panel2.querySelector('.panel-list');
          const children = Array.isArray(parent.subgenres) ? [...parent.subgenres].sort((a,b)=> (a.name||'').localeCompare(b.name||'', undefined, {sensitivity:'base'})) : [];
          if (!children.length) {
            console.log('[genres][desktop] parent has no subgenres, navigate to parent', { parentId: parent.id, slug: parent.slug });
            hideGenresDesktopPanels({ focusTrigger: false });
            navigateInternal(`/genres/${parent.slug}/`);
            return;
          }
          console.log('[genres][desktop] rendering children', { parentId: parent.id, count: children.length });
          let html = `
            <div class="panel-item panel-item--parent-link" data-parent-slug="${parent.slug}">
              <a href="/genres/${parent.slug}/" class="panel-item__body panel-item__body--link">
                <span class="panel-item__title">${parent.name}</span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-arrow-up-right"></i></span>
              </a>
            </div>
            ${children.map(child => `
              <a href="/genres/${child.slug || ''}/" class="panel-item panel-item--child" data-slug="${child.slug || ''}">
                <span class="panel-item__body">
                  <span class="panel-item__title"><span class="panel-item__name">${child.name}</span></span>
                  <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
                </span>
              </a>`).join('')}
          `;
          list.innerHTML = html;
          toggleGenresPanel(panel2, true);
          try { window.__genresDesktopState = { view:'children', parentId: parent.id }; } catch(_){}
          panel1.querySelectorAll('.panel-item').forEach(node=>{
            const id = Number(node.dataset.id);
            node.classList.toggle('active', id === parent.id);
          });
          const parentLink = list.querySelector('.panel-item--parent-link a');
          if (parentLink) {
            parentLink.addEventListener('click', ()=>{
              try { console.log('[genres][desktop] navigating to parent', { href: parentLink.getAttribute('href') }); } catch(_){}
            });
          }
          list.querySelectorAll('.panel-item--child').forEach(link=>{
            link.addEventListener('click', (ev)=>{
              ev.preventDefault();
              const href = link.getAttribute('href');
              hideGenresDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
          });
        }

        let locationsDesktopMQ = window.matchMedia('(min-width: 992px)');
        let locationsDesktopDocHandler = null;
        let locationsDesktopKeyHandler = null;
        try { window.__locationsOpenedFromSidebar = window.__locationsOpenedFromSidebar || false; } catch(_) { window.__locationsOpenedFromSidebar = false; }
        try { window.__locationsDesktopState = window.__locationsDesktopState || { view:'regions', regionSlug: null, regionType: null }; } catch(_) { window.__locationsDesktopState = { view:'regions', regionSlug: null, regionType: null }; }

        function ensureLocationsData(cb){
          const code = (getSidebarCountryCode() || '').toUpperCase();
          try { if (window.__locationsCountry !== code) { window.__locationsData = null; } } catch(_) {}
          if (!code) {
            try { window.__locationsCountry = ''; window.__locationsData = { regions: [], country: null }; } catch(_) {}
            cb && cb();
            return;
          }
          if (window.__locationsData) { cb && cb(); return; }
          fetch('/api/site/locations-simple/?country=' + encodeURIComponent(code) + '&_=' + Date.now())
            .then(r=>r.json())
            .then(json=>{
              try {
                window.__locationsCountry = code;
                window.__locationsData = json || { regions: [] };
                console.log('[locations][desktop] locations data loaded', { country: code, regions: Array.isArray(window.__locationsData?.regions) ? window.__locationsData.regions.length : null });
              } catch(_){ window.__locationsCountry = code; window.__locationsData = json || { regions: [] }; }
              cb && cb();
            })
            .catch(()=>{
              try {
                window.__locationsCountry = code;
                window.__locationsData = { regions: [] };
                console.log('[locations][desktop] locations data load failed, using empty list');
              } catch(_) {}
              cb && cb();
            });
        }

        function setDesktopLocationsExpanded(expanded){
          const trigger = document.querySelector('.rs-desktop-sidebar [data-action="locations-panel"]');
          if (trigger) trigger.setAttribute('aria-expanded', expanded ? 'true' : 'false');
        }

        function toggleLocationsPanel(panel, open){
          if (!panel) return;
          panel.classList.toggle('is-open', !!open);
          panel.setAttribute('aria-hidden', open ? 'false' : 'true');
          if (open) {
            const list = panel.querySelector('.panel-list');
            if (list) list.scrollTop = 0;
          }
        }

        function hideLocationsDesktopPanels(opts){
          const level1 = document.getElementById('locations-desk-level1');
          const level2 = document.getElementById('locations-desk-level2');
          toggleLocationsPanel(level1, false);
          toggleLocationsPanel(level2, false);
          if (level1) level1.querySelectorAll('.panel-item.active').forEach(node => node.classList.remove('active'));
          if (locationsDesktopDocHandler) {
            document.removeEventListener('click', locationsDesktopDocHandler, true);
            locationsDesktopDocHandler = null;
          }
          if (locationsDesktopKeyHandler) {
            document.removeEventListener('keydown', locationsDesktopKeyHandler, true);
            locationsDesktopKeyHandler = null;
          }
          setDesktopLocationsExpanded(false);
          try { window.__locationsDesktopState = { view:'regions', regionSlug: null, regionType: null }; } catch(_) {}
          if (opts && opts.focusTrigger) {
            const trigger = document.querySelector('.rs-desktop-sidebar [data-action="locations-panel"]');
            if (trigger) {
              try { trigger.focus(); } catch(_){}
            }
          }
          try { console.log('[locations][desktop] panels hidden'); } catch(_){}
        }

        function createOrGetLocationsPanel(id, level){
          let panel = document.getElementById(id);
          if (!panel) {
            panel = document.createElement('div');
            panel.id = id;
            panel.className = `sidebar-genres-panel sidebar-locations-panel ${level}`;
            panel.setAttribute('role', 'dialog');
            panel.setAttribute('aria-hidden', 'true');
            panel.innerHTML = `
              <div class="panel-header">
                <button type="button" class="panel-back" aria-label="${window.i18n?.back || 'Back'}" hidden>‹</button>
                <div class="panel-title"></div>
                <button type="button" class="panel-close" aria-label="${window.i18n?.close || 'Close'}">×</button>
              </div>
              <div class="panel-list"></div>
            `;
            getDesktopSidebarHost().appendChild(panel);
            const closeBtn = panel.querySelector('.panel-close');
            if (closeBtn) closeBtn.addEventListener('click', () => hideLocationsDesktopPanels({ focusTrigger: true }));
          } else {
            const host = getDesktopSidebarHost();
            if (panel.parentElement !== host) host.appendChild(panel);
          }
          panel.classList.remove('is-open');
          panel.setAttribute('aria-hidden', 'true');
          return panel;
        }

        function renderLocationsDesktopRegions(panel1, panel2){
          if (!panel1) return;
          const seed = document.getElementById('i18n-seed');
          const title = panel1.querySelector('.panel-title');
          if (title) title.textContent = window.i18n?.regionsLabel || seed?.dataset.regions || 'Regions';
          const back = panel1.querySelector('.panel-back');
          if (back) back.hidden = true;
          const list = panel1.querySelector('.panel-list');
          const data = window.__locationsData || {};
          const regions = Array.isArray(data.regions) ? data.regions : [];
          if (!regions.length) {
            const emptyText = window.i18n?.noLocations || seed?.dataset.noLocations || 'No locations available';
            list.innerHTML = `<div class="panel-empty">${emptyText}</div>`;
            toggleLocationsPanel(panel2, false);
            return;
          }
          try { window.__locationsDesktopState = window.__locationsDesktopState || { view:'regions', regionSlug: null, regionType: null }; } catch(_) {}
          const state = window.__locationsDesktopState || {};
          const stateSlug = state.regionSlug || '';
          const stateType = state.regionType || '';
          let html = '';
          regions.forEach(region => {
            const hasCities = Array.isArray(region.cities) && region.cities.length;
            const regionUrl = region.url || '';
            html += `
              <div class="panel-item panel-item--parent" data-slug="${region.slug || ''}" data-url="${regionUrl}" data-type="${region.type || 'region'}">
                <div class="panel-item__body" role="link" tabindex="0" data-href="${regionUrl}">
                  <div class="panel-item__title"><span class="panel-item__name">${region.name}</span></div>
                </div>
                ${hasCities ? `
                  <div class="panel-item__actions panel-item__actions--external">
                    <button type="button"
                            class="panel-item__link panel-item__link--children"
                            data-slug="${region.slug || ''}"
                            data-region-type="${region.type || 'region'}">
                      <i class="bi bi-chevron-right" aria-hidden="true"></i>
                    </button>
                  </div>
                ` : ''}
              </div>`;
          });
          list.innerHTML = html;
          list.querySelectorAll('.panel-item__body').forEach(body=>{
            body.addEventListener('click', (ev)=>{
              if (ev.target.closest('.panel-item__link--children')) return;
              ev.preventDefault();
              const href = body.dataset.href || '';
              hideLocationsDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
            body.addEventListener('keydown', (ev)=>{
              if (ev.key === 'Enter' || ev.key === ' ') {
                ev.preventDefault();
                const href = body.dataset.href || '';
                hideLocationsDesktopPanels({ focusTrigger: false });
                if (href) navigateInternal(href);
              }
            });
          });
          list.querySelectorAll('.panel-item__link--children').forEach(btn=>{
            btn.addEventListener('click', (ev)=>{
              ev.preventDefault();
              ev.stopPropagation();
              const slug = btn.dataset.slug || '';
              const regionsList = Array.isArray(window.__locationsData?.regions) ? window.__locationsData.regions : [];
              const regionType = btn.dataset.regionType || 'region';
              const region = regionsList.find(r => (r.slug || '') === slug && (r.type || 'region') === regionType);
              if (!region) return;
              try { window.__locationsDesktopState = { view:'cities', regionSlug: slug, regionType }; } catch(_) {}
              renderLocationsDesktopCities(panel1, panel2, region);
            });
          });
          list.querySelectorAll('.panel-item').forEach(node=>{
            const slug = node.dataset.slug || '';
            const type = node.dataset.type || 'region';
            node.classList.toggle('active', slug === stateSlug && type === stateType);
          });
          const hasExplicitRegions = regions.some(region => (region.type || 'region') === 'region');
          let fallbackApplied = false;
          if (!hasExplicitRegions) {
            const firstWithCities = regions.find(region => Array.isArray(region.cities) && region.cities.length);
            if (firstWithCities) {
              if (!state || state.view !== 'cities') {
                try { window.__locationsDesktopState = { view:'cities', regionSlug: firstWithCities.slug || '', regionType: firstWithCities.type || 'region' }; } catch(_) {}
                renderLocationsDesktopCities(panel1, panel2, firstWithCities);
              } else if ((stateSlug || stateType) && (firstWithCities.slug || '') === stateSlug && (firstWithCities.type || 'region') === stateType) {
                renderLocationsDesktopCities(panel1, panel2, firstWithCities);
              }
              fallbackApplied = true;
            }
          }
          if (!fallbackApplied) {
            if (state && state.view === 'cities') {
              const regionsList = Array.isArray(window.__locationsData?.regions) ? window.__locationsData.regions : [];
              const region = regionsList.find(r => (r.slug || '') === stateSlug && (r.type || 'region') === (stateType || 'region'));
              if (region) {
                renderLocationsDesktopCities(panel1, panel2, region);
              } else {
                toggleLocationsPanel(panel2, false);
              }
            } else {
              toggleLocationsPanel(panel2, false);
            }
          }
        }

        function renderLocationsDesktopCities(panel1, panel2, region){
          if (!panel1 || !panel2 || !region) return;
          const seed = document.getElementById('i18n-seed');
          const title = panel2.querySelector('.panel-title');
          if (title) title.textContent = `${region.name}: ${window.i18n?.citiesLabel || seed?.dataset.cities || 'Cities'}`;
          const back = panel2.querySelector('.panel-back');
          if (back) {
            back.hidden = false;
            back.onclick = (ev)=>{
              ev.preventDefault();
              toggleLocationsPanel(panel2, false);
              try { window.__locationsDesktopState = { view:'regions', regionSlug: region.slug || null, regionType: region.type || null }; } catch(_){}
            };
          }
          const list = panel2.querySelector('.panel-list');
          const cities = Array.isArray(region.cities) ? region.cities : [];
          if (!cities.length) {
            try { window.__locationsDesktopState = { view:'regions', regionSlug: region.slug || null, regionType: region.type || null }; } catch(_){}
            hideLocationsDesktopPanels({ focusTrigger: false });
            if (region.url) navigateInternal(region.url);
            return;
          }
          let html = region.url ? `
            <div class="panel-item panel-item--parent-link" data-region-slug="${region.slug || ''}">
              <a href="${region.url}" class="panel-item__body panel-item__body--link">
                <span class="panel-item__title">${region.name}</span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-arrow-up-right"></i></span>
              </a>
            </div>` : '';
          html += cities.map(city => `
            <a href="${city.url || ''}" class="panel-item panel-item--child" data-city-slug="${city.slug || ''}">
              <span class="panel-item__body">
                <span class="panel-item__title"><span class="panel-item__name">${city.name}</span></span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </span>
            </a>`).join('');
          list.innerHTML = html;
          toggleLocationsPanel(panel2, true);
          panel1.querySelectorAll('.panel-item').forEach(node=>{
            const slug = node.dataset.slug || '';
            const type = node.dataset.type || 'region';
            node.classList.toggle('active', slug === (region.slug || '') && type === (region.type || 'region'));
          });
          list.querySelectorAll('.panel-item--child').forEach(link=>{
            link.addEventListener('click', (ev)=>{
              ev.preventDefault();
              const href = link.getAttribute('href');
              hideLocationsDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
          });
        }

        function openLocationsDesktopPanels(){
          if (!locationsDesktopMQ.matches) {
            openLocationsMobilePanel();
            return;
          }
          const panel1 = createOrGetLocationsPanel('locations-desk-level1', 'level-1');
          const panel2 = createOrGetLocationsPanel('locations-desk-level2', 'level-2');
          setPanelLoading(
            panel1,
            window.i18n?.loadingLocations
              || document.getElementById('i18n-seed')?.dataset.loadingLocations
              || 'Loading locations...'
          );
          toggleLocationsPanel(panel1, true);
          toggleLocationsPanel(panel2, false);
          setDesktopLocationsExpanded(true);
          ensureLocationsData(()=>{
            renderLocationsDesktopRegions(panel1, panel2);
            const state = window.__locationsDesktopState || {};
            if (state.view === 'cities') {
              const regionsList = Array.isArray(window.__locationsData?.regions) ? window.__locationsData.regions : [];
              const stateType = state.regionType || 'region';
              const region = regionsList.find(r => (r.slug || '') === (state.regionSlug || '') && (r.type || 'region') === stateType);
              if (region) {
                renderLocationsDesktopCities(panel1, panel2, region);
              } else {
                toggleLocationsPanel(panel2, false);
              }
            } else {
              toggleLocationsPanel(panel2, false);
            }
            if (locationsDesktopDocHandler) {
              document.removeEventListener('click', locationsDesktopDocHandler, true);
            }
            locationsDesktopDocHandler = (event)=>{
              const p1 = document.getElementById('locations-desk-level1');
              const p2 = document.getElementById('locations-desk-level2');
              const sidebar = document.querySelector('.rs-desktop-sidebar');
              if ((p1 && p1.contains(event.target)) || (p2 && p2.contains(event.target)) || (sidebar && sidebar.contains(event.target))) {
                return;
              }
              hideLocationsDesktopPanels({ focusTrigger: false });
            };
            setTimeout(()=>document.addEventListener('click', locationsDesktopDocHandler, true), 0);
            if (locationsDesktopKeyHandler) {
              document.removeEventListener('keydown', locationsDesktopKeyHandler, true);
            }
            locationsDesktopKeyHandler = (event)=>{
              if (event.key === 'Escape' || event.key === 'Esc') {
                hideLocationsDesktopPanels({ focusTrigger: true });
              }
            };
            document.addEventListener('keydown', locationsDesktopKeyHandler, true);
            try { console.log('[locations][desktop] panels opened'); } catch(_){}
          });
        }

        // ================================
        // Countries Desktop Panels
        // ================================
        const countriesDesktopMQ = window.matchMedia('(min-width: 992px)');
        let countriesDesktopDocHandler = null;
        let countriesDesktopKeyHandler = null;
        try { window.__countriesOpenedFromSidebar = window.__countriesOpenedFromSidebar || false; } catch(_) { window.__countriesOpenedFromSidebar = false; }
        try { window.__countriesDesktopState = window.__countriesDesktopState || { view:'continents', continentSlug: null }; } catch(_) { window.__countriesDesktopState = { view:'continents', continentSlug: null }; }

        function ensureCountriesData(cb){
          const lang = getCurrentLang();
          try { if (window.__countriesLang !== lang) { window.__countriesData = null; } } catch(_) {}
          if (window.__countriesData) { cb && cb(); return; }
          fetch('/api/site/continents-simple/?_=' + Date.now())
            .then(r=>r.json())
            .then(json=>{
              try { window.__countriesLang = lang; window.__countriesData = json || { continents: [], current_country: null }; } catch(_){ window.__countriesLang = lang; window.__countriesData = json || { continents: [], current_country: null }; }
              cb && cb();
            })
            .catch(()=>{
              try { window.__countriesLang = lang; window.__countriesData = { continents: [], current_country: null }; } catch(_){}
              cb && cb();
            });
        }

        function setDesktopCountriesExpanded(expanded){
          const trigger = document.querySelector('.rs-desktop-sidebar [data-action="countries-panel"]');
          if (trigger) trigger.setAttribute('aria-expanded', expanded ? 'true' : 'false');
        }

        function toggleCountriesPanel(panel, open){
          if (!panel) return;
          panel.classList.toggle('is-open', !!open);
          panel.setAttribute('aria-hidden', open ? 'false' : 'true');
          if (open) {
            const list = panel.querySelector('.panel-list');
            if (list) list.scrollTop = 0;
          }
        }

        function hideCountriesDesktopPanels(opts){
          const level1 = document.getElementById('countries-desk-level1');
          const level2 = document.getElementById('countries-desk-level2');
          toggleCountriesPanel(level1, false);
          toggleCountriesPanel(level2, false);
          if (level1) {
            level1.querySelectorAll('.panel-item.active').forEach(node => node.classList.remove('active'));
          }
          if (countriesDesktopDocHandler) {
            document.removeEventListener('click', countriesDesktopDocHandler, true);
            countriesDesktopDocHandler = null;
          }
          if (countriesDesktopKeyHandler) {
            document.removeEventListener('keydown', countriesDesktopKeyHandler, true);
            countriesDesktopKeyHandler = null;
          }
          setDesktopCountriesExpanded(false);
          try { window.__countriesDesktopState = { view:'continents', continentSlug: null }; } catch(_){}
          if (opts && opts.focusTrigger) {
            const trigger = document.querySelector('.rs-desktop-sidebar [data-action="countries-panel"]');
            if (trigger) {
              try { trigger.focus(); } catch(_){}
            }
          }
        }

        function createOrGetCountriesPanel(id, level){
          let panel = document.getElementById(id);
          if (!panel) {
            panel = document.createElement('div');
            panel.id = id;
            panel.className = `sidebar-genres-panel sidebar-locations-panel ${level}`;
            panel.setAttribute('role', 'dialog');
            panel.setAttribute('aria-hidden', 'true');
            panel.innerHTML = `
              <div class="panel-header">
                <button type="button" class="panel-back" aria-label="${window.i18n?.back || 'Back'}" hidden>‹</button>
                <div class="panel-title"></div>
                <button type="button" class="panel-close" aria-label="${window.i18n?.close || 'Close'}">×</button>
              </div>
              <div class="panel-list"></div>
            `;
            getDesktopSidebarHost().appendChild(panel);
            const closeBtn = panel.querySelector('.panel-close');
            if (closeBtn) closeBtn.addEventListener('click', () => hideCountriesDesktopPanels({ focusTrigger: true }));
          } else {
            const host = getDesktopSidebarHost();
            if (panel.parentElement !== host) host.appendChild(panel);
          }
          panel.classList.remove('is-open');
          panel.setAttribute('aria-hidden', 'true');
          return panel;
        }

        function setCountriesPanelLoading(panel, customText){
          const seed = document.getElementById('i18n-seed');
          const label = customText
            || window.i18n?.loadingCountries
            || seed?.dataset.loadingCountries
            || 'Loading countries...';
          setPanelLoading(panel, label);
        }

        function renderCountriesDesktopContinents(panel1, panel2){
          if (!panel1) return;
          const seed = document.getElementById('i18n-seed');
          const title = panel1.querySelector('.panel-title');
          if (title) title.textContent = window.i18n?.continents || seed?.dataset.continents || 'Continents';
          const back = panel1.querySelector('.panel-back');
          if (back) back.hidden = true;
          const list = panel1.querySelector('.panel-list');
          const data = window.__countriesData || {};
          const continents = Array.isArray(data.continents) ? data.continents : [];
          if (!continents.length) {
            const emptyText = window.i18n?.noCountries || seed?.dataset.noCountries || 'No countries available';
            list.innerHTML = `<div class="panel-empty">${emptyText}</div>`;
            toggleCountriesPanel(panel2, false);
            return;
          }
          const state = window.__countriesDesktopState || {};
          const current = data.current_country || null;
          const currentSlug = state.continentSlug || (current && current.continent_slug) || '';
          const viewLabel = window.i18n?.viewCountries || seed?.dataset.viewCountries || 'View countries';
          let html = '';
          continents.forEach(continent => {
            const hasCountries = Array.isArray(continent.countries) && continent.countries.length;
            const continentUrl = continent.url || '';
            html += `
              <div class="panel-item panel-item--parent" data-slug="${continent.slug || ''}" data-url="${continentUrl}">
                <div class="panel-item__body" role="link" tabindex="0" data-href="${continentUrl}">
                  <div class="panel-item__title"><span class="panel-item__name">${continent.name}</span></div>
                </div>
                ${hasCountries ? `
                  <div class="panel-item__actions panel-item__actions--external">
                    <button type="button"
                            class="panel-item__link panel-item__link--children"
                            data-slug="${continent.slug || ''}"
                            aria-label="${viewLabel}">
                      <i class="bi bi-chevron-right" aria-hidden="true"></i>
                    </button>
                  </div>
                ` : ''}
              </div>`;
          });
          list.innerHTML = html;
          list.querySelectorAll('.panel-item__body').forEach(body=>{
            body.addEventListener('click', (ev)=>{
              if (ev.target.closest('.panel-item__link--children')) return;
              ev.preventDefault();
              const href = body.dataset.href || '';
              hideCountriesDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
            body.addEventListener('keydown', (ev)=>{
              if (ev.key === 'Enter' || ev.key === ' ') {
                ev.preventDefault();
                const href = body.dataset.href || '';
                hideCountriesDesktopPanels({ focusTrigger: false });
                if (href) navigateInternal(href);
              }
            });
          });
          list.querySelectorAll('.panel-item__link--children').forEach(btn=>{
            btn.addEventListener('click', (ev)=>{
              ev.preventDefault();
              ev.stopPropagation();
              const slug = btn.dataset.slug || '';
              const continentsList = Array.isArray(window.__countriesData?.continents) ? window.__countriesData.continents : [];
              const continent = continentsList.find(item => (item.slug || '') === slug);
              if (!continent) return;
              try { window.__countriesDesktopState = { view:'countries', continentSlug: slug }; } catch(_){}
              renderCountriesDesktopCountries(panel1, panel2, continent);
            });
          });
          list.querySelectorAll('.panel-item').forEach(node=>{
            const slug = node.dataset.slug || '';
            node.classList.toggle('active', slug && slug === (currentSlug || ''));
          });
          if (!state || state.view !== 'countries') {
            toggleCountriesPanel(panel2, false);
          }
        }

        function renderCountriesDesktopCountries(panel1, panel2, continent){
          if (!panel1 || !panel2 || !continent) return;
          try { window.__countriesDesktopState = { view:'countries', continentSlug: continent.slug || null }; } catch(_){}
          const seed = document.getElementById('i18n-seed');
          const title = panel2.querySelector('.panel-title');
          if (title) title.textContent = `${continent.name || (window.i18n?.countries || seed?.dataset.countries || 'Countries')}`;
          const back = panel2.querySelector('.panel-back');
          if (back) {
            back.hidden = false;
            back.onclick = (ev)=>{
              ev.preventDefault();
              toggleCountriesPanel(panel2, false);
              try { window.__countriesDesktopState = { view:'continents', continentSlug: continent.slug || null }; } catch(_){}
            };
          }
          const list = panel2.querySelector('.panel-list');
          const countries = Array.isArray(continent.countries) ? continent.countries : [];
          if (!countries.length) {
            hideCountriesDesktopPanels({ focusTrigger: false });
            if (continent.url) navigateInternal(continent.url);
            return;
          }
          let html = continent.url ? `
            <div class="panel-item panel-item--parent-link" data-continent-slug="${continent.slug || ''}">
              <a href="${continent.url}" class="panel-item__body panel-item__body--link">
                <span class="panel-item__title">${continent.name}</span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-arrow-up-right"></i></span>
              </a>
            </div>` : '';
          html += countries.map(country => `
            <a href="${country.url || ''}" class="panel-item panel-item--child" data-country-code="${country.code || ''}">
              <span class="panel-item__body">
                <span class="panel-item__title"><span class="panel-item__name">${country.name}</span></span>
                <span class="panel-item__icon" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </span>
            </a>`).join('');
          list.innerHTML = html;
          toggleCountriesPanel(panel2, true);
          panel1.querySelectorAll('.panel-item').forEach(node=>{
            const slug = node.dataset.slug || '';
            node.classList.toggle('active', slug && slug === (continent.slug || ''));
          });
          const current = window.__countriesData?.current_country || null;
          const currentCode = (current && current.code ? current.code.toUpperCase() : '');
          list.querySelectorAll('.panel-item.panel-item--child').forEach(link=>{
            const code = (link.dataset.countryCode || '').toUpperCase();
            if (code && code === currentCode) {
              link.classList.add('active');
            }
            link.addEventListener('click', (ev)=>{
              ev.preventDefault();
              const href = link.getAttribute('href');
              hideCountriesDesktopPanels({ focusTrigger: false });
              if (href) navigateInternal(href);
            });
          });
        }

        function openCountriesDesktopPanels(){
          if (!countriesDesktopMQ.matches) return;
          const panel1 = createOrGetCountriesPanel('countries-desk-level1', 'level-1');
          const panel2 = createOrGetCountriesPanel('countries-desk-level2', 'level-2');
          setCountriesPanelLoading(panel1);
          toggleCountriesPanel(panel1, true);
          setDesktopCountriesExpanded(true);
          toggleCountriesPanel(panel2, false);
          ensureCountriesData(()=>{
            renderCountriesDesktopContinents(panel1, panel2);
            const state = window.__countriesDesktopState || {};
            if (state && state.view === 'countries') {
              const continentsList = Array.isArray(window.__countriesData?.continents) ? window.__countriesData.continents : [];
              const target = continentsList.find(item => (item.slug || '') === (state.continentSlug || ''));
              if (target) {
                renderCountriesDesktopCountries(panel1, panel2, target);
              } else {
                toggleCountriesPanel(panel2, false);
              }
            } else {
              toggleCountriesPanel(panel2, false);
            }
            if (countriesDesktopDocHandler) {
              document.removeEventListener('click', countriesDesktopDocHandler, true);
            }
            countriesDesktopDocHandler = (event)=>{
              const p1 = document.getElementById('countries-desk-level1');
              const p2 = document.getElementById('countries-desk-level2');
              const sidebar = document.querySelector('.rs-desktop-sidebar');
              if ((p1 && p1.contains(event.target)) || (p2 && p2.contains(event.target)) || (sidebar && sidebar.contains(event.target))) {
                return;
              }
              hideCountriesDesktopPanels({ focusTrigger: false });
            };
            setTimeout(()=>document.addEventListener('click', countriesDesktopDocHandler, true), 0);
            if (countriesDesktopKeyHandler) {
              document.removeEventListener('keydown', countriesDesktopKeyHandler, true);
            }
            countriesDesktopKeyHandler = (event)=>{
              if (event.key === 'Escape' || event.key === 'Esc') {
                hideCountriesDesktopPanels({ focusTrigger: true });
              }
            };
            document.addEventListener('keydown', countriesDesktopKeyHandler, true);
          });
        }

        function getMobileCountriesPanel(){
          try {
            const sb = document.getElementById('sidebar');
            if (!sb) return null;
            return sb.querySelector('[data-menu-panel="countries"]');
          } catch(_) { return null; }
        }

        function renderCountriesMobileContinents(){
          const panel = getMobileCountriesPanel(); if (!panel) return;
          panel.dataset.mobileCountriesState = 'continents';
          const seed = document.getElementById('i18n-seed');
          const title = panel.querySelector('[data-mobile-countries-title]');
          const backBtn = panel.querySelector('[data-mobile-countries-back]');
          const rootList = panel.querySelector('[data-mobile-countries-root]');
          const childrenList = panel.querySelector('[data-mobile-countries-children]');
          const continents = Array.isArray(window.__countriesData?.continents) ? window.__countriesData.continents : [];
          if (title) title.textContent = window.i18n?.continents || seed?.dataset.continents || 'Continents';
          if (backBtn) backBtn.hidden = false;
          if (childrenList) childrenList.hidden = true;
          if (!rootList) return;
          if (!continents.length) {
            const emptyText = window.i18n?.noCountries || seed?.dataset.noCountries || 'No countries available';
            rootList.hidden = false;
            rootList.innerHTML = `
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">${emptyText}</span>
              </div>
            `;
          } else {
            rootList.hidden = false;
            rootList.innerHTML = continents.map((continent, index) => {
              const hasCountries = Array.isArray(continent.countries) && continent.countries.length;
              const arrowIcon = hasCountries ? 'bi bi-chevron-right' : 'bi bi-arrow-up-right';
              return `
                <button type="button"
                        class="rs-mobile-menu__item"
                        data-mobile-continent-index="${index}"
                        data-mobile-continent-has-countries="${hasCountries ? '1' : '0'}"
                        data-mobile-continent-url="${continent.url || ''}">
                  <span class="rs-mobile-menu__item-icon"><i class="bi bi-globe2"></i></span>
                  <span class="rs-mobile-menu__item-label">${continent.name}</span>
                  <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="${arrowIcon}"></i></span>
                </button>
              `;
            }).join('');
            rootList.querySelectorAll('[data-mobile-continent-index]').forEach(btn=>{
              if (btn.dataset.mobileCountriesBound === '1') return;
              btn.dataset.mobileCountriesBound = '1';
              btn.addEventListener('click', ev=>{
                ev.preventDefault();
                ev.stopPropagation();
                const idx = Number(btn.dataset.mobileContinentIndex);
                const continent = continents[idx];
                if (!continent) return;
                const hasCountries = btn.dataset.mobileContinentHasCountries === '1';
                if (hasCountries) {
                  renderCountriesMobileCountries(continent);
                } else {
                  hideSidebar();
                  setCloseFabMode(null);
                  const href = btn.dataset.mobileContinentUrl || continent.url || '';
                  if (href) navigateInternal(href);
                }
              });
            });
          }
          try {
            if (window.__countriesOpenedFromSidebar) {
              window.__countriesOpenedFromSidebar = false;
              window.__rsIgnoreSidebarAutoClose = true;
              showSidebar();
              setCloseFabMode('sidebar');
            }
          } catch(_) {}
        }

        function renderCountriesMobileCountries(continent){
          const panel = getMobileCountriesPanel(); if (!panel) return;
          panel.dataset.mobileCountriesState = 'countries';
          const seed = document.getElementById('i18n-seed');
          const title = panel.querySelector('[data-mobile-countries-title]');
          const rootList = panel.querySelector('[data-mobile-countries-root]');
          const childrenList = panel.querySelector('[data-mobile-countries-children]');
          if (title) title.textContent = continent.name || (window.i18n?.countries || seed?.dataset.countries || 'Countries');
          if (rootList) rootList.hidden = true;
          if (!childrenList) return;
          const countries = Array.isArray(continent.countries) ? continent.countries : [];
          if (!countries.length && continent.url) {
            hideSidebar();
            setCloseFabMode(null);
            navigateInternal(continent.url);
            return;
          }
          let html = '';
          if (continent.url) {
            html += `
              <a href="${continent.url}" class="rs-mobile-menu__item">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-arrow-up-right"></i></span>
                <span class="rs-mobile-menu__item-label">${continent.name}</span>
              </a>
            `;
          }
          html += countries.map(country => `
            <a href="${country.url || ''}" class="rs-mobile-menu__item">
              <span class="rs-mobile-menu__item-icon"><i class="bi bi-geo-alt"></i></span>
              <span class="rs-mobile-menu__item-label">${country.name}</span>
              <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
            </a>
          `).join('');
          childrenList.innerHTML = html;
          childrenList.hidden = false;
          childrenList.querySelectorAll('a').forEach(link=>{
            if (link.dataset.mobileCountryBound === '1') return;
            link.dataset.mobileCountryBound = '1';
            link.addEventListener('click', ev=>{
              ev.preventDefault();
              const href = link.getAttribute('href');
              hideSidebar();
              setCloseFabMode(null);
              if (href) navigateInternal(href);
            });
          });
        }

        function openCountriesMobilePanel(){
          const panel = getMobileCountriesPanel(); if (!panel) return;
          const backBtn = panel.querySelector('[data-mobile-countries-back]');
          if (backBtn && !backBtn.dataset.mobileCountriesBound) {
            backBtn.dataset.mobileCountriesBound = '1';
            backBtn.addEventListener('click', ev=>{
              ev.preventDefault();
              if (panel.dataset.mobileCountriesState === 'countries') {
                renderCountriesMobileContinents();
              } else {
                setMobileMenuPanel('root');
              }
            });
          }
          const rootList = panel.querySelector('[data-mobile-countries-root]');
          const childrenList = panel.querySelector('[data-mobile-countries-children]');
          if (rootList) {
            rootList.hidden = false;
            const seed = document.getElementById('i18n-seed');
            rootList.innerHTML = `
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">${window.i18n?.loadingCountries || seed?.dataset.loadingCountries || 'Loading countries...'}</span>
              </div>
            `;
          }
          if (childrenList) childrenList.hidden = true;
          ensureCountriesData(()=>renderCountriesMobileContinents());
        }

        function getMobileLocationsPanel(){
          try {
            const sb = document.getElementById('sidebar');
            if (!sb) return null;
            return sb.querySelector('[data-menu-panel=\"locations\"]');
          } catch(_) { return null; }
        }

        function renderLocationsMobileRegions(){
          const panel = getMobileLocationsPanel(); if (!panel) return;
          panel.dataset.mobileLocationsState = 'regions';
          const seed = document.getElementById('i18n-seed');
          const title = panel.querySelector('[data-mobile-locations-title]');
          const backBtn = panel.querySelector('[data-mobile-locations-back]');
          const rootList = panel.querySelector('[data-mobile-locations-root]');
          const childrenList = panel.querySelector('[data-mobile-locations-children]');
          const regions = Array.isArray(window.__locationsData?.regions) ? window.__locationsData.regions : [];
          if (title) title.textContent = window.i18n?.locations || seed?.dataset.locations || 'Locations';
          if (backBtn) backBtn.hidden = false;
          if (childrenList) childrenList.hidden = true;
          if (rootList) {
            if (!regions.length) {
              const emptyText = window.i18n?.noLocations || seed?.dataset.noLocations || 'No locations available';
              rootList.innerHTML = `
                <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                  <span class="rs-mobile-menu__item-label">${emptyText}</span>
                </div>
              `;
              rootList.hidden = false;
            } else {
              rootList.hidden = false;
              rootList.innerHTML = regions.map((region, index) => {
                const hasCities = Array.isArray(region.cities) && region.cities.length;
                const arrowIcon = hasCities ? 'bi bi-chevron-right' : 'bi bi-arrow-up-right';
                return `
                  <button type="button"
                          class="rs-mobile-menu__item"
                          data-mobile-location-index="${index}"
                          data-mobile-location-has-cities="${hasCities ? '1' : '0'}"
                          data-mobile-location-url="${region.url || ''}">
                    <span class="rs-mobile-menu__item-icon"><i class="bi bi-geo-alt"></i></span>
                    <span class="rs-mobile-menu__item-label">${region.name}</span>
                    <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="${arrowIcon}"></i></span>
                  </button>
                `;
              }).join('');
              rootList.querySelectorAll('[data-mobile-location-index]').forEach(btn=>{
                if (btn.dataset.mobileLocationsBound === '1') return;
                btn.dataset.mobileLocationsBound = '1';
                btn.addEventListener('click', ev=>{
                  ev.preventDefault();
                  ev.stopPropagation();
                  const idx = Number(btn.dataset.mobileLocationIndex);
                  const region = regions[idx];
                  if (!region) return;
                  const hasCities = btn.dataset.mobileLocationHasCities === '1';
                  if (hasCities) {
                    renderLocationsMobileCities(region);
                  } else {
                    hideSidebar();
                    setCloseFabMode(null);
                    const href = btn.dataset.mobileLocationUrl || region.url || '';
                    if (href) navigateInternal(href);
                  }
                });
              });
            }
          }
          try {
            if (window.__locationsOpenedFromSidebar) {
              window.__locationsOpenedFromSidebar = false;
              window.__rsIgnoreSidebarAutoClose = true;
              showSidebar();
              setCloseFabMode('sidebar');
            }
          } catch(_) {}
        }

        function renderLocationsMobileCities(region){
          const panel = getMobileLocationsPanel(); if (!panel) return;
          panel.dataset.mobileLocationsState = 'cities';
          const seed = document.getElementById('i18n-seed');
          const title = panel.querySelector('[data-mobile-locations-title]');
          const rootList = panel.querySelector('[data-mobile-locations-root]');
          const childrenList = panel.querySelector('[data-mobile-locations-children]');
          if (title) title.textContent = region.name || (window.i18n?.citiesLabel || seed?.dataset.cities || 'Cities');
          if (rootList) rootList.hidden = true;
          if (childrenList) {
            const cities = Array.isArray(region.cities) ? region.cities : [];
            if (!cities.length && region.url) {
              hideSidebar();
              setCloseFabMode(null);
              navigateInternal(region.url);
              return;
            }
            let html = '';
            if (region.url) {
              html += `
                <a href="${region.url}" class="rs-mobile-menu__item">
                  <span class="rs-mobile-menu__item-icon"><i class="bi bi-arrow-up-right"></i></span>
                  <span class="rs-mobile-menu__item-label">${region.name}</span>
                </a>
              `;
            }
            html += cities.map(city => `
              <a href="${city.url || ''}" class="rs-mobile-menu__item">
                <span class="rs-mobile-menu__item-icon"><i class="bi bi-geo"></i></span>
                <span class="rs-mobile-menu__item-label">${city.name}</span>
                <span class="rs-mobile-menu__item-arrow" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
              </a>
            `).join('');
            childrenList.innerHTML = html;
            childrenList.hidden = false;
            childrenList.querySelectorAll('a').forEach(link=>{
              if (link.dataset.mobileLocationCityBound === '1') return;
              link.dataset.mobileLocationCityBound = '1';
              link.addEventListener('click', ev=>{
                ev.preventDefault();
                const href = link.getAttribute('href');
                hideSidebar();
                setCloseFabMode(null);
                if (href) navigateInternal(href);
              });
            });
          }
        }

        function openLocationsMobilePanel(){
          const panel = getMobileLocationsPanel(); if (!panel) return;
          const backBtn = panel.querySelector('[data-mobile-locations-back]');
          if (backBtn && !backBtn.dataset.mobileLocationsBound) {
            backBtn.dataset.mobileLocationsBound = '1';
            backBtn.addEventListener('click', ev=>{
              ev.preventDefault();
              if (panel.dataset.mobileLocationsState === 'cities') {
                renderLocationsMobileRegions();
              } else {
                setMobileMenuPanel('root');
              }
            });
          }
          const rootList = panel.querySelector('[data-mobile-locations-root]');
          const childrenList = panel.querySelector('[data-mobile-locations-children]');
          if (rootList) {
            rootList.hidden = false;
            rootList.innerHTML = `
              <div class="rs-mobile-menu__item rs-mobile-menu__item--muted">
                <span class="rs-mobile-menu__item-label">${window.i18n?.loadingLocations || (document.getElementById('i18n-seed')?.dataset.loadingLocations) || 'Loading locations...'}</span>
              </div>
            `;
          }
          if (childrenList) childrenList.hidden = true;
          ensureLocationsData(()=>renderLocationsMobileRegions());
        }
        if (locationsDesktopMQ) {
          const mqHandlerLoc = (ev)=>{
            if (!ev.matches) hideLocationsDesktopPanels({ focusTrigger: false });
          };
          if (typeof locationsDesktopMQ.addEventListener === 'function') {
            locationsDesktopMQ.addEventListener('change', mqHandlerLoc);
          } else if (typeof locationsDesktopMQ.addListener === 'function') {
            locationsDesktopMQ.addListener(mqHandlerLoc);
          }
        }
        if (genresDesktopMQ) {
          const mqHandler = (ev)=>{
            if (!ev.matches) hideGenresDesktopPanels({ focusTrigger: false });
          };
          if (typeof genresDesktopMQ.addEventListener === 'function') {
            genresDesktopMQ.addEventListener('change', mqHandler);
          } else if (typeof genresDesktopMQ.addListener === 'function') {
            genresDesktopMQ.addListener(mqHandler);
          }
        }
        if (countriesDesktopMQ) {
          const mqHandlerCountries = (ev)=>{
            if (!ev.matches) hideCountriesDesktopPanels({ focusTrigger: false });
          };
          if (typeof countriesDesktopMQ.addEventListener === 'function') {
            countriesDesktopMQ.addEventListener('change', mqHandlerCountries);
          } else if (typeof countriesDesktopMQ.addListener === 'function') {
            countriesDesktopMQ.addListener(mqHandlerCountries);
          }
        }
        document.addEventListener('beforeAjaxPageUnload', () => {
            hideGenresDesktopPanels({ focusTrigger: false });
            hideLocationsDesktopPanels({ focusTrigger: false });
            hideCountriesDesktopPanels({ focusTrigger: false });
        });
        document.addEventListener('ajaxContentLoaded', () => {
            try { console.log('[genres][desktop] ajaxContentLoaded fired'); } catch(_) {}
            hideGenresDesktopPanels({ focusTrigger: false });
            initializeDesktopGenresLink();
            hideLocationsDesktopPanels({ focusTrigger: false });
            initializeDesktopLocationsLink();
            hideCountriesDesktopPanels({ focusTrigger: false });
            initializeDesktopCountriesLink();
            const lang = localStorage.getItem('selectedLanguageGlobal');
            if (lang) {
                setTimeout(() => {
                    if (typeof updateSidebar === 'function') {
                        updateSidebar(lang);
                    }
                    localStorage.removeItem('selectedLanguageGlobal');
                }, 200);
            }
        });
        // ================================
        // Search form handling
        // ================================
        function initializeSearchForms() {
            document.addEventListener('submit', event => {
                const form = event.target;
                if (!form.matches('form.search-form, form[class*="search-form"]')) return;
                event.preventDefault();
                const input = form.querySelector('input[name="query"]');
                const query = input ? input.value.trim() : '';
                const searchUrl = '/search/?query=' + encodeURIComponent(query);
                if (window.matchMedia('(max-width: 991.98px)').matches) {
                    hideSidebar();
                }
                // Сбросим трекеры пагинации/кэша перед переходом на новую выдачу
                try {
                    window.__rsLoadedHrefs = new Set();
                    window._stationsPageCache = new Map();
                    window.__rsCurrentPage = 1;
                    const key = JSON.stringify({q: query, country: new URLSearchParams(location.search).get('country')||'', sort: new URLSearchParams(location.search).get('sort')||''});
                    window.__rsLastQueryKey = key;
                } catch(e) {}
                if (typeof loadPage === 'function') {
                    loadPage(searchUrl);
                } else {
                    location.href = searchUrl;
                }
            });
        }

        // ================================
        // Main initialization on page load
        // ================================
document.addEventListener('DOMContentLoaded', () => {
            try { console.log('[genres] DOMContentLoaded fired'); } catch(_) {}
            if (!getCookie('country_code')) {
                // Если страна не определена — по умолчанию ставим US
                setCookie('country_code', 'us', 365);
            }

            try {
                var ipCountry = 'US'.trim().toLowerCase();
                if (ipCountry && !getCookie('country_code_ip')) {
                    setCookie('country_code_ip', ipCountry, 365);
                }
            } catch (_) {}

            initializeLanguageSwitch();
            initializeSearchForms();

            // Инициализация сайдбара: синхронизируем с текущим языком страницы
            // Приоритет для первого рендера: <html lang> (язык фактического контента)
            try {
                const htmlLang = (document.documentElement.getAttribute('lang') || '').split('-')[0].toLowerCase();
                const sp = new URLSearchParams(location.search);
                const hasParam = sp.has('language');
                const hasCookie = /(?:^|; )django_language=/.test(document.cookie || '');
                if (htmlLang) {
                    updateSidebar(htmlLang);
                } else if (!hasParam && !hasCookie) {
                    // Нет параметра и куки — пусть сервер выберет по Accept-Language
                    updateSidebar(null);
                } else {
                    updateSidebar(getCurrentLang());
                }
            } catch(_) {
                updateSidebar(getCurrentLang());
            }

            const toggleBtn = document.getElementById('toggle-sidebar');
            const sidebarEl = document.getElementById('sidebar');
            if (toggleBtn && sidebarEl) {
                toggleBtn.addEventListener('click', e => {
                    e.stopPropagation();
                    const willOpen = !sidebarEl.classList.contains('open');
                    sidebarEl.classList.toggle('open');
                    try { if (willOpen) { document.documentElement.classList.add('sidebar-open'); document.body.classList.add('sidebar-open'); } else { document.documentElement.classList.remove('sidebar-open'); document.body.classList.remove('sidebar-open'); } } catch(e) {}
                });
                document.addEventListener('click', e => {
                    if (window.__rsIgnoreSidebarAutoClose) { try { window.__rsIgnoreSidebarAutoClose = false; } catch(_) {} return; }
                    if (
                        sidebarEl.classList.contains('open') &&
                        !sidebarEl.contains(e.target) &&
                        e.target !== toggleBtn &&
                        !e.target.closest('.dropdown-menu')
                    ) {
                        hideSidebar();
                    }
                });
            }
            initializeSidebarLinks();
            initializeDesktopGenresLink();
            initializeDesktopLocationsLink();

            const yearEl = document.getElementById('current-year');
            if (yearEl) {
                const startYear = 2020;
                const currentYear = new Date().getFullYear();
                yearEl.textContent = startYear === currentYear
                    ? startYear
                    : `${startYear}-${currentYear}`;
            }

            const moreOptionsToggle = document.getElementById('more-options-toggle');
            const playerStreams     = document.getElementById('player-volume-str');
            if (moreOptionsToggle && playerStreams) {
                moreOptionsToggle.addEventListener('click', e => {
                    e.stopPropagation();
                    playerStreams.classList.toggle('show-streams');
                });
                document.addEventListener('click', e => {
                    if (
                        !playerStreams.contains(e.target) &&
                        !moreOptionsToggle.contains(e.target)
                    ) {
                        playerStreams.classList.remove('show-streams');
                    }
                });
            }

            document.querySelectorAll('.external-auth').forEach(btn => {
                btn.addEventListener('click', () => {
                    const path = window.location.pathname;
                    if (
                        path.startsWith('/accounts/login') ||
                        path.startsWith('/accounts/signup')
                    ) return;
                    const params   = new URLSearchParams(window.location.search);
                    const next     = params.get('next');
                    const lastPage = next || path + window.location.search;
                    setCookie('last_page', lastPage, 0.5);
                }, { once: true });
            });
        });

        // ================================
        // Sidebar meta: labels and auto-country switch
        // ================================
        function initializeSidebarMeta() {
            try {
                // Save auto country in localStorage for quick restore
                const autoSwitches = document.querySelectorAll('[data-auto-country-switch]');
                if (autoSwitches.length) {
                    autoSwitches.forEach((autoEl, index)=>{
                        const code = autoEl.dataset.autoCode || '';
                        const name = autoEl.dataset.autoName || '';
                        if (index === 0 && code) {
                            try {
                                localStorage.setItem('autoCountryCode', code);
                                localStorage.setItem('autoCountryName', name);
                            } catch(e) {}
                        }
                        if (autoEl.dataset.autoBound === '1') return;
                        autoEl.dataset.autoBound = '1';
                        autoEl.addEventListener('click', function(e){
                            e.preventDefault();
                            const detectCode = (this.dataset.autoCode || '').toLowerCase();
                            if (!detectCode) return;
                            setCookie('country_code', detectCode, 365);
                            try { setCookie('country_code_ts', String(Math.floor(Date.now()/1000)), 365); } catch(_){}
                            try { localStorage.setItem('countrySelection', 'auto'); } catch(ex) { console.warn(ex); }
                            if (typeof updateSidebar === 'function') updateSidebar(getCurrentLang());
                            try {
                                if (window.matchMedia('(max-width: 991.98px)').matches) {
                                    hideSidebar();
                                    setCloseFabMode(null);
                                }
                            } catch(_){}
                            const target = this.getAttribute('href') || (window.location.pathname + window.location.search);
                            if (typeof loadPage === 'function') loadPage(target);
                            else window.location.href = target;
                        });
                    });
                }

                // Основной линк страны ведёт на страницу страны; авто‑переключение — только по отдельной ссылке
            } catch(e) { console.log(e); }
        }

        // Horizontal scroll prevention handled by CSS: touch-action: pan-y; overscroll-behavior-x: none;

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language switch
            initializeLanguageSwitch();
            initMobileMenuPanels();
            // Mobile bottom bar handlers
            try {
                // Watch for sidebar open-state changes and hide FAB when closed
                (function watchSidebar(){
                    function bind(){
                        try {
                            var sb = document.getElementById('sidebar');
                            if (!sb) return;
                            const obs = new MutationObserver(function(){
                                try { if ((window.__fabMode||null)==='sidebar' && !sb.classList.contains('open')) setCloseFabMode(null); } catch(_){}
                            });
                            obs.observe(sb, { attributes: true, attributeFilter: ['class'] });
                            // initial sync
                            try { if ((window.__fabMode||null)==='sidebar' && !sb.classList.contains('open')) setCloseFabMode(null); } catch(_){}
                        } catch(_){}
                    }
                    bind();
                    document.addEventListener('sidebarUpdated', bind);
                })();

                // Compute safe zones (top sticky ads etc.) and apply to sidebar
                function computeSidebarSafeTop(){
                    var safe = 0;
                    try {
                        // Search for potential sticky/fixed top banners
                        var cands = Array.prototype.slice.call(document.querySelectorAll('div[id^="div-gpt-"], [id*="google_ads"], .sticky, .sticky-top, [style*="position:fixed"], [style*="position: sticky"]'));
                        cands.forEach(function(el){
                            try {
                                var cs = getComputedStyle(el);
                                var pos = cs.position || '';
                                if ((pos === 'fixed' || pos === 'sticky') && (parseInt(cs.top,10) <= 4)) {
                                    var rect = el.getBoundingClientRect();
                                    if (rect.height > 30 && rect.bottom > 0) {
                                        safe = Math.max(safe, Math.ceil(rect.height));
                                    }
                                }
                            } catch(_){ }
                        });
                    } catch(_){ }
                    try { document.documentElement.style.setProperty('--sidebar-safe-top', safe + 'px'); } catch(_){ }
                }
                computeSidebarSafeTop();
                window.addEventListener('resize', function(){ try { computeSidebarSafeTop(); } catch(_){ } });
                document.addEventListener('sidebarUpdated', function(){ try { computeSidebarSafeTop(); } catch(_){ } });
                document.addEventListener('sidebarUpdated', initMobileMenuPanels);
                document.addEventListener('ajaxContentLoaded', initMobileMenuPanels);

                // Swipe-to-close for mobile sidebar (gesture: swipe left)
                function initSidebarSwipe(){
                    try {
                        var sb = document.getElementById('sidebar');
                        if (!sb || sb.dataset.swipeBound === '1') return;
                        sb.dataset.swipeBound = '1';
                        var startX = 0, startY = 0, tracking = false, startT = 0;
                        var THRESH_X = 50, THRESH_Y = 40, MAX_TIME = 700;
                        function onStart(ev){
                            if (!window.matchMedia('(max-width: 991.98px)').matches) return;
                            if (!sb.classList.contains('open')) return;
                            var t = ev.touches ? ev.touches[0] : ev;
                            startX = t.clientX; startY = t.clientY; startT = Date.now(); tracking = true;
                        }
                        function onMove(ev){
                            if (!tracking) return;
                            var t = ev.touches ? ev.touches[0] : ev;
                            var dx = t.clientX - startX; var dy = t.clientY - startY;
                            if (Math.abs(dy) > THRESH_Y) { tracking = false; return; }
                            if (dx < -THRESH_X && (Date.now() - startT) < MAX_TIME) {
                                try { ev.preventDefault(); } catch(_){ }
                                tracking = false; hideSidebar();
                            }
                        }
                        function onEnd(){ tracking = false; }
                        // Touch + pointer support
                        sb.addEventListener('touchstart', onStart, {passive:true});
                        sb.addEventListener('touchmove', onMove, {passive:false});
                        sb.addEventListener('touchend', onEnd, {passive:true});
                        sb.addEventListener('pointerdown', onStart, {passive:true});
                        sb.addEventListener('pointermove', onMove);
                        sb.addEventListener('pointerup', onEnd, {passive:true});
                    } catch(_){}
                }
                initSidebarSwipe();
                document.addEventListener('sidebarUpdated', initSidebarSwipe);

                // After any AJAX content swap, always hide FAB and deduplicate if sidebar re-rendered
                document.addEventListener('ajaxContentLoaded', function(){
                    try {
                        // remove duplicates from re-rendered sidebar
                        var list = document.querySelectorAll('#close-mobile-sidebar');
                        if (list.length > 1) { for (var i=1;i<list.length;i++){ try{ list[i].remove(); }catch(_){} } }
                        setCloseFabMode(null);
                    } catch(_){}
                });
            } catch(_e) {}
        });

    </script>

    <script>
      (function(){
        function isAccountRoute(){
          try {
            const path = window.location && window.location.pathname ? window.location.pathname : '';
            return path.startsWith('/account/');
          } catch (e) {
            return false;
          }
        }

        function syncAccountLayout(root){
          try {
            var scope = (root && root.querySelector) ? root : document;
            var hasAccountMarkup = !!scope.querySelector('.account-page');
            var shouldEnable = hasAccountMarkup || isAccountRoute();
            if (!document.body) return;
            document.body.classList.toggle('account-mode', shouldEnable);
          } catch (e) {
            try { console.warn('[ajax-nav] account layout toggle failed', e); } catch(_){}
          }
        }
        document.addEventListener('DOMContentLoaded', function(){ syncAccountLayout(document); });
        document.addEventListener('ajaxContentLoaded', function(ev){
          var container = (ev && ev.detail && ev.detail.container) || document;
          syncAccountLayout(container);
        });
        document.addEventListener('beforeAjaxPageUnload', function(){
          if (document.body) document.body.classList.remove('account-mode');
        });
      })();
    </script>

    <script src="/static/stations/js/ajax_signup.e41c60cfbfbd.js?v=1764461027" defer></script>

    <script
        src="/static/stations/js/album_covers.73c2ed9dfa57.js"
        data-placeholder="/static/stations/img/cover_placeholder_auto.ecdd5cedf8b4.svg">
    </script>
    <script>
      (function(){
        function fmt(d){
          try{ return d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}); }catch(e){
            const hh = String(d.getHours()).padStart(2,'0');
            const mm = String(d.getMinutes()).padStart(2,'0');
            return hh+':'+mm;
          }
        }
        function tick(){
          var el = document.getElementById('station-local-time');
          if(!el) return;
          // Пока нет явного пояса станции — показываем локальное время пользователя.
          // Позже можно задать data-timezone на контейнере и использовать Intl с timeZone.
          var now = new Date();
          el.textContent = fmt(now);
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', function(){ tick(); setInterval(tick, 30000); });
        } else {
          tick(); setInterval(tick, 30000);
        }
      })();
    </script>
    <script>
      (function(){
        const panel = document.getElementById('station-tracklist-panel');
        if (!panel) return;

        const panelId = panel.id;
        const triggers = Array.from(document.querySelectorAll('[data-tracklist-open]')).filter(function(btn){
          const target = btn.dataset.tracklistPanel;
          return !target || target === panelId;
        });
        const overlay = panel.querySelector('.tracklist-panel__overlay');
        const drawer = panel.querySelector('.tracklist-panel__drawer');
        const closeControls = panel.querySelectorAll('[data-tracklist-close]');
        const daySelect = panel.querySelector('[data-tracklist-select]');
        const content = panel.querySelector('[data-tracklist-content]');
        const loader = panel.querySelector('[data-tracklist-loader]');
        const meta = document.getElementById('tracklistPanelSubtitle');
        const loadMoreText = panel.dataset.loadMoreText || 'Show more tracks';
        const errorText = panel.dataset.errorText || 'Unable to load playlist. Please try again.';
        const stationId = panel.dataset.stationId;
        const endpoint = panel.dataset.tracklistUrl;
        const defaultDate = panel.dataset.tracklistDefaultDate || new Date().toISOString().split('T')[0];
        const defaultMetaTitle = panel.dataset.tracklistDefaultTitle || '';
        const defaultMetaDescription = panel.dataset.tracklistDefaultDescription || '';
        const tzAttr = Number.parseInt(panel.dataset.tzOffset, 10);
        const tzOffset = Number.isFinite(tzAttr) ? tzAttr : -new Date().getTimezoneOffset();
        const supportsIntersection = 'IntersectionObserver' in window;
        let infiniteObserver = null;
        let sentinel = null;

        if (!stationId || !endpoint) return;

        if (meta && (defaultMetaTitle || defaultMetaDescription)) {
          meta.textContent = defaultMetaTitle || defaultMetaDescription;
        }

        let nextPage = parsePage(panel.dataset.tracklistNextPage);
        if (nextPage) {
          panel.dataset.tracklistNextPage = String(nextPage);
        } else {
          delete panel.dataset.tracklistNextPage;
        }
        let currentDate = panel.dataset.tracklistPrefetched === 'true' ? (panel.dataset.initialDate || defaultDate) : null;
        let isOpen = false;
        let loadMoreBtn = null;
        let abortController = null;
        let lastFocusedTrigger = null;
        let hideTimer = null;

        if (supportsIntersection && content) {
          infiniteObserver = new IntersectionObserver(onSentinelIntersect, {
            root: content,
            rootMargin: '0px 0px 180px 0px',
            threshold: 0.01,
          });
        }

        if (daySelect) {
          const initialSelect = panel.dataset.initialDate || defaultDate;
          if (initialSelect) {
            updateSelectDisplay(initialSelect);
          }
        }

        function parsePage(value) {
          const num = Number.parseInt(value, 10);
          return Number.isFinite(num) && num > 1 ? num : null;
        }

        function getPrefetchedFlag() {
          return panel.dataset.tracklistPrefetched === 'true';
        }

        function getActiveDate() {
          return currentDate || defaultDate || new Date().toISOString().split('T')[0];
        }

        function contentHasList() {
          return !!(content && content.querySelector('[data-list="true"]'));
        }

        function ensureSentinel() {
          if (!supportsIntersection || !content) return;
          if (!sentinel) {
            sentinel = document.createElement('div');
            sentinel.dataset.tracklistSentinel = 'true';
            sentinel.setAttribute('aria-hidden', 'true');
            sentinel.style.height = '1px';
          }
          if (!content.contains(sentinel)) {
            if (loader && loader.parentNode === content) {
              loader.insertAdjacentElement('afterend', sentinel);
            } else {
              content.appendChild(sentinel);
            }
          }
          if (infiniteObserver) {
            if (nextPage) {
              infiniteObserver.observe(sentinel);
            } else {
              infiniteObserver.unobserve(sentinel);
            }
          }
        }

        function onSentinelIntersect(entries) {
          if (!isOpen) return;
          entries.forEach(function(entry){
            if (!entry.isIntersecting) return;
            if (!nextPage || abortController) return;
            fetchTracks(getActiveDate(), nextPage, true);
          });
        }

        function setLoading(show, append) {
          if (!loader || !content) return;
          if (show) {
            loader.removeAttribute('hidden');
            if (!append) {
              content.innerHTML = '';
            }
            if (loader.parentNode !== content) {
              content.appendChild(loader);
            }
          } else {
            loader.setAttribute('hidden', 'hidden');
          }
        }

        function updateSelectDisplay(date) {
          if (!daySelect || !date) return;
          const option = Array.from(daySelect.options).find(function(opt){
            return opt.value === date;
          });
          if (option) {
            daySelect.value = date;
            daySelect.dataset.tracklistSelectedTitle = option.dataset.tracklistTitle || '';
            daySelect.dataset.tracklistSelectedDate = option.dataset.tracklistDate || '';
            if (meta && !meta.textContent) {
              const fallback = option.dataset.tracklistTitle || option.dataset.tracklistLabel || option.textContent || '';
              if (fallback) {
                meta.textContent = fallback;
              }
            }
          }
        }

        function renderHtml(html, append) {
          if (!content) return;
          const fragment = document.createElement('div');
          fragment.innerHTML = html;
          const incomingList = fragment.querySelector('[data-list="true"]');
          const existingList = content.querySelector('[data-list="true"]');
          if (!append || !existingList) {
            const loaderAttached = loader && loader.parentNode === content;
            if (loaderAttached) {
              loader.remove();
            }
            content.innerHTML = '';
            if (incomingList) {
              content.appendChild(incomingList);
            } else {
              Array.from(fragment.childNodes).forEach(function(node){
                content.appendChild(node);
              });
            }
            if (loader) {
              loader.setAttribute('hidden', 'hidden');
              content.appendChild(loader);
            }
          } else if (incomingList && existingList) {
            existingList.append(...Array.from(incomingList.children));
          } else {
            Array.from(fragment.childNodes).forEach(function(node){
              content.appendChild(node);
            });
          }
          ensureSentinel();
        }

        function clearLoadMore() {
          if (loadMoreBtn && loadMoreBtn.parentNode) {
            loadMoreBtn.parentNode.removeChild(loadMoreBtn);
          }
          loadMoreBtn = null;
        }

        function attachLoadMore(nextPageValue) {
          clearLoadMore();
          const pageNum = parsePage(nextPageValue);
          if (!pageNum) {
            nextPage = null;
            if (supportsIntersection && infiniteObserver && sentinel) {
              infiniteObserver.unobserve(sentinel);
            }
            return;
          }
          nextPage = pageNum;
          loadMoreBtn = document.createElement('button');
          loadMoreBtn.type = 'button';
          loadMoreBtn.className = 'tracklist-panel__load-more';
          loadMoreBtn.textContent = loadMoreText;
          loadMoreBtn.addEventListener('click', function(){
            fetchTracks(getActiveDate(), nextPage, true);
          });
          if (content) {
            if (loader && loader.parentNode === content) {
              content.insertBefore(loadMoreBtn, loader);
            } else {
              content.appendChild(loadMoreBtn);
            }
          }
          if (supportsIntersection) {
            loadMoreBtn.hidden = true;
            ensureSentinel();
          } else {
            loadMoreBtn.hidden = false;
          }
        }

        function renderError() {
          if (!content) return;
          clearLoadMore();
          nextPage = null;
          delete panel.dataset.tracklistNextPage;
          const error = document.createElement('div');
          error.className = 'tracklist-panel__error';
          error.textContent = errorText;
          content.innerHTML = '';
          content.appendChild(error);
          if (loader) {
            loader.setAttribute('hidden', 'hidden');
            content.appendChild(loader);
          }
          if (supportsIntersection && infiniteObserver && sentinel) {
            infiniteObserver.unobserve(sentinel);
          }
          ensureSentinel();
        }

        function fetchTracks(date, page = 1, append = false) {
          if (!stationId || !endpoint || !date) return;
          if (abortController) {
            abortController.abort();
          }
          abortController = new AbortController();
          if (!append) {
            clearLoadMore();
          }
          setLoading(true, append);
          const url = new URL(endpoint, window.location.origin);
          url.searchParams.set('station_id', stationId);
          url.searchParams.set('date', date);
          url.searchParams.set('page', page);
          url.searchParams.set('tz_offset', tzOffset);
          fetch(url.toString(), {
            headers: { 'X-Requested-With': 'XMLHttpRequest' },
            signal: abortController.signal,
          }).then(function(response){
            if (!response.ok) throw new Error('Request failed');
            return response.json();
          }).then(function(data){
            if (meta) {
              const message = data.playlist_title || data.playlist_description || defaultMetaTitle || defaultMetaDescription || '';
              if (message) {
                meta.textContent = message;
              }
            }
            renderHtml(data.html || '', append);
            currentDate = date;
            updateSelectDisplay(date);
            nextPage = parsePage(data.has_next ? data.next_page : null);
            if (nextPage) {
              panel.dataset.tracklistNextPage = String(nextPage);
            } else {
              delete panel.dataset.tracklistNextPage;
            }
            if (date === defaultDate && data.html) {
              panel.dataset.tracklistPrefetched = 'true';
            }
            attachLoadMore(nextPage);
            if (supportsIntersection) {
              ensureSentinel();
            }
          }).catch(function(err){
            if (err.name === 'AbortError') return;
            renderError();
          }).finally(function(){
            setLoading(false);
            abortController = null;
          });
        }

        function clearTracklistQuery() {
          try {
            const url = new URL(window.location.href);
            let changed = false;
            if (url.searchParams.has('tracklist')) {
              url.searchParams.delete('tracklist');
              changed = true;
            }
            if (url.searchParams.has('tracklist_date')) {
              url.searchParams.delete('tracklist_date');
              changed = true;
            }
            if (changed) {
              window.history.replaceState({}, '', url.toString());
            }
          } catch (_) {}
        }

        function handleKeydown(event) {
          if (event.key === 'Escape') {
            event.preventDefault();
            closePanel();
          }
        }

        function openPanel(requestedDate, triggerEl) {
          if (isOpen) return;
          isOpen = true;
          if (hideTimer) {
            clearTimeout(hideTimer);
            hideTimer = null;
          }
          lastFocusedTrigger = triggerEl || null;
          panel.removeAttribute('hidden');
          requestAnimationFrame(function(){
            panel.classList.add('is-open');
          });
          document.body.classList.add('tracklist-panel-open');
          document.addEventListener('keydown', handleKeydown);
          clearTracklistQuery();

          const targetDate = requestedDate || defaultDate || new Date().toISOString().split('T')[0];
          const prefetchedFlag = getPrefetchedFlag();
          const hasList = contentHasList();
          const shouldFetch = !prefetchedFlag || targetDate !== defaultDate || currentDate !== targetDate || !hasList;

          if (shouldFetch) {
            fetchTracks(targetDate, 1, false);
          } else {
            currentDate = targetDate;
            updateSelectDisplay(targetDate);
            attachLoadMore(panel.dataset.tracklistNextPage);
          }
          if (supportsIntersection) {
            ensureSentinel();
          }
        }

        function closePanel() {
          if (!isOpen) return;
          isOpen = false;
          document.body.classList.remove('tracklist-panel-open');
          panel.classList.remove('is-open');
          setLoading(false);
          clearLoadMore();
          if (abortController) {
            abortController.abort();
            abortController = null;
          }
          document.removeEventListener('keydown', handleKeydown);
          if (supportsIntersection && infiniteObserver && sentinel) {
            infiniteObserver.unobserve(sentinel);
          }

          const finalizeHide = function(){
            if (hideTimer) {
              clearTimeout(hideTimer);
              hideTimer = null;
            }
            panel.setAttribute('hidden', 'hidden');
            if (drawer) {
              drawer.removeEventListener('transitionend', finalizeHide);
            }
          };

          if (drawer) {
            drawer.addEventListener('transitionend', finalizeHide);
            hideTimer = window.setTimeout(finalizeHide, 360);
          } else {
            finalizeHide();
          }

          if (lastFocusedTrigger && typeof lastFocusedTrigger.focus === 'function') {
            lastFocusedTrigger.focus({ preventScroll: true });
          }
        }

        triggers.forEach(function(btn){
          btn.addEventListener('click', function(event){
            event.preventDefault();
            const targetPanel = btn.dataset.tracklistPanel;
            if (targetPanel && targetPanel !== panelId) return;
            const requestedDate = btn.dataset.tracklistDate || panel.dataset.initialDate || defaultDate;
            openPanel(requestedDate, btn);
          });
        });

        closeControls.forEach(function(control){
          control.addEventListener('click', closePanel);
        });

        if (overlay) {
          overlay.addEventListener('click', closePanel);
        }

        if (daySelect) {
          daySelect.addEventListener('change', function(){
            const val = daySelect.value;
            if (!val || val === currentDate) return;
            fetchTracks(val, 1, false);
          });
        }

        if (supportsIntersection) {
          ensureSentinel();
        }

        if (panel.dataset.autoOpen === 'true') {
          const run = function(){
            openPanel(panel.dataset.initialDate || defaultDate);
          };
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', run);
          } else {
            run();
          }
        }
      })();
    </script>



    <script>
      (function(){
        function getCookie(name){
          const m = document.cookie.match(new RegExp('(?:^|; )' + name.replace(/([.$?*|{}()\[\]\\/+^])/g,'\\$1') + '=([^;]*)'));
          return m ? decodeURIComponent(m[1]) : undefined;
        }
        function delCookie(name){ document.cookie = name + '=; path=/; max-age=0'; }
        function showToast(){
          var t = document.getElementById('toast-fav-migrated');
          if(!t) return;
          t.hidden = false;
          t.classList.add('show');
          setTimeout(function(){ t.classList.remove('show'); t.hidden = true; }, 3200);
        }
        if (getCookie('favMigrated') === '1') {
          delCookie('favMigrated');
          if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', showToast);
          else showToast();
        }
      })();
    </script>

    <style>
      .rs-toast { position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%); z-index: 9999; }
      .rs-toast .rs-toast-content { background: rgba(17,17,17,.92); color: #fff; border-radius: 12px; padding: 10px 14px; font-weight: 700; box-shadow: 0 8px 22px rgba(0,0,0,.26); display: inline-flex; align-items: center; }
      :root[data-theme="dark"] .rs-toast .rs-toast-content { background: rgba(250,250,250,.96); color: #111; }
      .rs-toast.show { animation: rsToastIn .24s ease forwards; }
      @keyframes rsToastIn { from { transform: translate(-50%, 10px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
    </style>

<div id="ajax-loader-overlay">
    <div class="loader"></div>
</div>
    
    
    
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a66156c0ced5a3f',t:'MTc2NDQ2MTAyNw=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
